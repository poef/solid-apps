(()=>{var Oc=Object.create;var hi=Object.defineProperty;var Mc=Object.getOwnPropertyDescriptor;var Bc=Object.getOwnPropertyNames;var Cc=Object.getPrototypeOf,Dc=Object.prototype.hasOwnProperty;var T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),cr=(t,e)=>{for(var r in e)hi(t,r,{get:e[r],enumerable:!0})},Fc=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Bc(e))!Dc.call(t,i)&&i!==r&&hi(t,i,{get:()=>e[i],enumerable:!(n=Mc(e,i))||n.enumerable});return t};var tn=(t,e,r)=>(r=t!=null?Oc(Cc(t)):{},Fc(e||!t||!t.__esModule?hi(r,"default",{value:t,enumerable:!0}):r,t));var pa=T(gn=>{"use strict";gn.byteLength=kf;gn.toByteArray=Tf;gn.fromByteArray=jf;var be=[],ne=[],Ef=typeof Uint8Array<"u"?Uint8Array:Array,Ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(dt=0,fa=Ci.length;dt<fa;++dt)be[dt]=Ci[dt],ne[Ci.charCodeAt(dt)]=dt;var dt,fa;ne[45]=62;ne[95]=63;function ha(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function kf(t){var e=ha(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Af(t,e,r){return(e+r)*3/4-r}function Tf(t){var e,r=ha(t),n=r[0],i=r[1],s=new Ef(Af(t,n,i)),o=0,a=i>0?n-4:n,l;for(l=0;l<a;l+=4)e=ne[t.charCodeAt(l)]<<18|ne[t.charCodeAt(l+1)]<<12|ne[t.charCodeAt(l+2)]<<6|ne[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=ne[t.charCodeAt(l)]<<2|ne[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=ne[t.charCodeAt(l)]<<10|ne[t.charCodeAt(l+1)]<<4|ne[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function If(t){return be[t>>18&63]+be[t>>12&63]+be[t>>6&63]+be[t&63]}function Rf(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(If(n));return i.join("")}function jf(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(Rf(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(be[e>>2]+be[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(be[e>>10]+be[e>>4&63]+be[e<<2&63]+"=")),i.join("")}});var ba=T(Di=>{Di.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,l=(1<<a)-1,u=l>>1,d=-7,c=r?i-1:0,h=r?-1:1,f=t[e+c];for(c+=h,s=f&(1<<-d)-1,f>>=-d,d+=a;d>0;s=s*256+t[e+c],c+=h,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=n;d>0;o=o*256+t[e+c],c+=h,d-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-u}return(f?-1:1)*o*Math.pow(2,s-n)};Di.write=function(t,e,r,n,i,s){var o,a,l,u=s*8-i-1,d=(1<<u)-1,c=d>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,p=n?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+c>=1?e+=h/l:e+=h*Math.pow(2,1-c),e*l>=2&&(o++,l/=2),o+c>=d?(a=0,o=d):o+c>=1?(a=(e*l-1)*Math.pow(2,i),o=o+c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;t[r+f]=a&255,f+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[r+f]=o&255,f+=p,o/=256,u-=8);t[r+f-p]|=b*128}});var me=T(qt=>{"use strict";var Fi=pa(),Ut=ba(),ga=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;qt.Buffer=g;qt.SlowBuffer=Bf;qt.INSPECT_MAX_BYTES=50;var mn=2147483647;qt.kMaxLength=mn;g.TYPED_ARRAY_SUPPORT=Nf();!g.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Nf(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}});Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}});function Ne(t){if(t>mn)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,g.prototype),e}function g(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return zi(t)}return wa(t,e,r)}g.poolSize=8192;function wa(t,e,r){if(typeof t=="string")return Pf(t,e);if(ArrayBuffer.isView(t))return Of(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(ge(t,ArrayBuffer)||t&&ge(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(t,SharedArrayBuffer)||t&&ge(t.buffer,SharedArrayBuffer)))return $i(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return g.from(n,e,r);let i=Mf(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return g.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}g.from=function(t,e,r){return wa(t,e,r)};Object.setPrototypeOf(g.prototype,Uint8Array.prototype);Object.setPrototypeOf(g,Uint8Array);function xa(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function Lf(t,e,r){return xa(t),t<=0?Ne(t):e!==void 0?typeof r=="string"?Ne(t).fill(e,r):Ne(t).fill(e):Ne(t)}g.alloc=function(t,e,r){return Lf(t,e,r)};function zi(t){return xa(t),Ne(t<0?0:Wi(t)|0)}g.allocUnsafe=function(t){return zi(t)};g.allocUnsafeSlow=function(t){return zi(t)};function Pf(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!g.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=va(t,e)|0,n=Ne(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function Ui(t){let e=t.length<0?0:Wi(t.length)|0,r=Ne(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function Of(t){if(ge(t,Uint8Array)){let e=new Uint8Array(t);return $i(e.buffer,e.byteOffset,e.byteLength)}return Ui(t)}function $i(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,g.prototype),n}function Mf(t){if(g.isBuffer(t)){let e=Wi(t.length)|0,r=Ne(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Gi(t.length)?Ne(0):Ui(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Ui(t.data)}function Wi(t){if(t>=mn)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+mn.toString(16)+" bytes");return t|0}function Bf(t){return+t!=t&&(t=0),g.alloc(+t)}g.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==g.prototype};g.compare=function(e,r){if(ge(e,Uint8Array)&&(e=g.from(e,e.offset,e.byteLength)),ge(r,Uint8Array)&&(r=g.from(r,r.offset,r.byteLength)),!g.isBuffer(e)||!g.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};g.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};g.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return g.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=g.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){let o=e[n];if(ge(o,Uint8Array))s+o.length>i.length?(g.isBuffer(o)||(o=g.from(o)),o.copy(i,s)):Uint8Array.prototype.set.call(i,o,s);else if(g.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function va(t,e){if(g.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||ge(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return qi(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Na(t).length;default:if(i)return n?-1:qi(t).length;e=(""+e).toLowerCase(),i=!0}}g.byteLength=va;function Cf(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Qf(this,e,r);case"utf8":case"utf-8":return Ea(this,e,r);case"ascii":return Hf(this,e,r);case"latin1":case"binary":return Gf(this,e,r);case"base64":return zf(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Kf(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}g.prototype._isBuffer=!0;function ct(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}g.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)ct(this,r,r+1);return this};g.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)ct(this,r,r+3),ct(this,r+1,r+2);return this};g.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)ct(this,r,r+7),ct(this,r+1,r+6),ct(this,r+2,r+5),ct(this,r+3,r+4);return this};g.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Ea(this,0,e):Cf.apply(this,arguments)};g.prototype.toLocaleString=g.prototype.toString;g.prototype.equals=function(e){if(!g.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:g.compare(this,e)===0};g.prototype.inspect=function(){let e="",r=qt.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};ga&&(g.prototype[ga]=g.prototype.inspect);g.prototype.compare=function(e,r,n,i,s){if(ge(e,Uint8Array)&&(e=g.from(e,e.offset,e.byteLength)),!g.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;let o=s-i,a=n-r,l=Math.min(o,a),u=this.slice(i,s),d=e.slice(r,n);for(let c=0;c<l;++c)if(u[c]!==d[c]){o=u[c],a=d[c];break}return o<a?-1:a<o?1:0};function Sa(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Gi(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=g.from(e,n)),g.isBuffer(e))return e.length===0?-1:ma(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):ma(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function ma(t,e,r,n,i){let s=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function l(d,c){return s===1?d[c]:d.readUInt16BE(c*s)}let u;if(i){let d=-1;for(u=r;u<o;u++)if(l(t,u)===l(e,d===-1?0:u-d)){if(d===-1&&(d=u),u-d+1===a)return d*s}else d!==-1&&(u-=u-d),d=-1}else for(r+a>o&&(r=o-a),u=r;u>=0;u--){let d=!0;for(let c=0;c<a;c++)if(l(t,u+c)!==l(e,c)){d=!1;break}if(d)return u}return-1}g.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};g.prototype.indexOf=function(e,r,n){return Sa(this,e,r,n,!0)};g.prototype.lastIndexOf=function(e,r,n){return Sa(this,e,r,n,!1)};function Df(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let s=e.length;n>s/2&&(n=s/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(Gi(a))return o;t[r+o]=a}return o}function Ff(t,e,r,n){return yn(qi(e,t.length-r),t,r,n)}function Uf(t,e,r,n){return yn(Xf(e),t,r,n)}function $f(t,e,r,n){return yn(Na(e),t,r,n)}function qf(t,e,r,n){return yn(Zf(e,t.length-r),t,r,n)}g.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return Df(this,e,r,n);case"utf8":case"utf-8":return Ff(this,e,r,n);case"ascii":case"latin1":case"binary":return Uf(this,e,r,n);case"base64":return $f(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qf(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function zf(t,e,r){return e===0&&r===t.length?Fi.fromByteArray(t):Fi.fromByteArray(t.slice(e,r))}function Ea(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let s=t[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=r){let l,u,d,c;switch(a){case 1:s<128&&(o=s);break;case 2:l=t[i+1],(l&192)===128&&(c=(s&31)<<6|l&63,c>127&&(o=c));break;case 3:l=t[i+1],u=t[i+2],(l&192)===128&&(u&192)===128&&(c=(s&15)<<12|(l&63)<<6|u&63,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:l=t[i+1],u=t[i+2],d=t[i+3],(l&192)===128&&(u&192)===128&&(d&192)===128&&(c=(s&15)<<18|(l&63)<<12|(u&63)<<6|d&63,c>65535&&c<1114112&&(o=c))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return Wf(n)}var ya=4096;function Wf(t){let e=t.length;if(e<=ya)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=ya));return r}function Hf(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function Gf(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function Qf(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let s=e;s<r;++s)i+=eh[t[s]];return i}function Kf(t,e,r){let n=t.slice(e,r),i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}g.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,g.prototype),i};function q(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}g.prototype.readUintLE=g.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||q(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return i};g.prototype.readUintBE=g.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||q(e,r,this.length);let i=this[e+--r],s=1;for(;r>0&&(s*=256);)i+=this[e+--r]*s;return i};g.prototype.readUint8=g.prototype.readUInt8=function(e,r){return e=e>>>0,r||q(e,1,this.length),this[e]};g.prototype.readUint16LE=g.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||q(e,2,this.length),this[e]|this[e+1]<<8};g.prototype.readUint16BE=g.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||q(e,2,this.length),this[e]<<8|this[e+1]};g.prototype.readUint32LE=g.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||q(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};g.prototype.readUint32BE=g.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||q(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};g.prototype.readBigUInt64LE=Ge(function(e){e=e>>>0,$t(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&yr(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))});g.prototype.readBigUInt64BE=Ge(function(e){e=e>>>0,$t(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&yr(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)});g.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||q(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};g.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||q(e,r,this.length);let i=r,s=1,o=this[e+--i];for(;i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};g.prototype.readInt8=function(e,r){return e=e>>>0,r||q(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};g.prototype.readInt16LE=function(e,r){e=e>>>0,r||q(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};g.prototype.readInt16BE=function(e,r){e=e>>>0,r||q(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};g.prototype.readInt32LE=function(e,r){return e=e>>>0,r||q(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};g.prototype.readInt32BE=function(e,r){return e=e>>>0,r||q(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};g.prototype.readBigInt64LE=Ge(function(e){e=e>>>0,$t(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&yr(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});g.prototype.readBigInt64BE=Ge(function(e){e=e>>>0,$t(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&yr(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});g.prototype.readFloatLE=function(e,r){return e=e>>>0,r||q(e,4,this.length),Ut.read(this,e,!0,23,4)};g.prototype.readFloatBE=function(e,r){return e=e>>>0,r||q(e,4,this.length),Ut.read(this,e,!1,23,4)};g.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||q(e,8,this.length),Ut.read(this,e,!0,52,8)};g.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||q(e,8,this.length),Ut.read(this,e,!1,52,8)};function Z(t,e,r,n,i,s){if(!g.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}g.prototype.writeUintLE=g.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Z(this,e,r,n,a,0)}let s=1,o=0;for(this[r]=e&255;++o<n&&(s*=256);)this[r+o]=e/s&255;return r+n};g.prototype.writeUintBE=g.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Z(this,e,r,n,a,0)}let s=n-1,o=1;for(this[r+s]=e&255;--s>=0&&(o*=256);)this[r+s]=e/o&255;return r+n};g.prototype.writeUint8=g.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Z(this,e,r,1,255,0),this[r]=e&255,r+1};g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Z(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Z(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Z(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Z(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function ka(t,e,r,n,i){ja(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function Aa(t,e,r,n,i){ja(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}g.prototype.writeBigUInt64LE=Ge(function(e,r=0){return ka(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});g.prototype.writeBigUInt64BE=Ge(function(e,r=0){return Aa(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});g.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let l=Math.pow(2,8*n-1);Z(this,e,r,n,l-1,-l)}let s=0,o=1,a=0;for(this[r]=e&255;++s<n&&(o*=256);)e<0&&a===0&&this[r+s-1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};g.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let l=Math.pow(2,8*n-1);Z(this,e,r,n,l-1,-l)}let s=n-1,o=1,a=0;for(this[r+s]=e&255;--s>=0&&(o*=256);)e<0&&a===0&&this[r+s+1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};g.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Z(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};g.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Z(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};g.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Z(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};g.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Z(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};g.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Z(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};g.prototype.writeBigInt64LE=Ge(function(e,r=0){return ka(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});g.prototype.writeBigInt64BE=Ge(function(e,r=0){return Aa(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ta(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Ia(t,e,r,n,i){return e=+e,r=r>>>0,i||Ta(t,e,r,4,34028234663852886e22,-34028234663852886e22),Ut.write(t,e,r,n,23,4),r+4}g.prototype.writeFloatLE=function(e,r,n){return Ia(this,e,r,!0,n)};g.prototype.writeFloatBE=function(e,r,n){return Ia(this,e,r,!1,n)};function Ra(t,e,r,n,i){return e=+e,r=r>>>0,i||Ta(t,e,r,8,17976931348623157e292,-17976931348623157e292),Ut.write(t,e,r,n,52,8),r+8}g.prototype.writeDoubleLE=function(e,r,n){return Ra(this,e,r,!0,n)};g.prototype.writeDoubleBE=function(e,r,n){return Ra(this,e,r,!1,n)};g.prototype.copy=function(e,r,n,i){if(!g.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),s};g.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!g.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{let o=g.isBuffer(e)?e:g.from(e,i),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=o[s%a]}return this};var Ft={};function Hi(t,e,r){Ft[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Hi("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Hi("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Hi("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=_a(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=_a(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function _a(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Vf(t,e,r){$t(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&yr(e,t.length-(r+1))}function ja(t,e,r,n,i,s){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw s>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:a=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new Ft.ERR_OUT_OF_RANGE("value",a,t)}Vf(n,i,s)}function $t(t,e){if(typeof t!="number")throw new Ft.ERR_INVALID_ARG_TYPE(e,"number",t)}function yr(t,e,r){throw Math.floor(t)!==t?($t(t,r),new Ft.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Ft.ERR_BUFFER_OUT_OF_BOUNDS:new Ft.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var Yf=/[^+/0-9A-Za-z-_]/g;function Jf(t){if(t=t.split("=")[0],t=t.trim().replace(Yf,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function qi(t,e){e=e||1/0;let r,n=t.length,i=null,s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function Xf(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Zf(t,e){let r,n,i,s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function Na(t){return Fi.toByteArray(Jf(t))}function yn(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function ge(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Gi(t){return t!==t}var eh=(function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e})();function Ge(t){return typeof BigInt>"u"?th:t}function th(){throw new Error("BigInt not supported")}});var L=T((Ww,Qa)=>{"use strict";var Ji=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};Qa.exports={AggregateError:Ji,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var Xi=T((Hw,Ka)=>{"use strict";Ka.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var G=T((Gw,Ja)=>{"use strict";var{format:xh,inspect:vn}=Xi(),{AggregateError:vh}=L(),Sh=globalThis.AggregateError||vh,Eh=Symbol("kIsNodeError"),kh=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Ah=/^([A-Z][a-z0-9]*)+$/,Th="__node_internal_",Sn={};function mt(t,e){if(!t)throw new Sn.ERR_INTERNAL_ASSERTION(e)}function Va(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Ih(t,e,r){if(typeof e=="function")return mt(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return mt(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:xh(e,...r)}function H(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(Ih(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[Eh]=!0,Sn[t]=n}function Ya(t){let e=Th+t.name;return Object.defineProperty(t,"name",{value:e}),t}function Rh(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new Sh([e,t],e.message);return r.code=e.code,r}return t||e}var Zi=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Sn.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};H("ERR_ASSERTION","%s",Error);H("ERR_INVALID_ARG_TYPE",(t,e,r)=>{mt(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)mt(typeof l=="string","All expected entries have to be of type string"),kh.includes(l)?i.push(l.toLowerCase()):Ah.test(l)?s.push(l):(mt(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=vn(r,{depth:-1});n+=`. Received ${l}`}}else{let l=vn(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);H("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=vn(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);H("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);H("ERR_MISSING_ARGS",(...t)=>{mt(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);H("ERR_OUT_OF_RANGE",(t,e,r)=>{mt(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=Va(String(r));else if(typeof r=="bigint"){n=String(r);let i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=Va(n)),n+="n"}else n=vn(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);H("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);H("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);H("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);H("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);H("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);H("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);H("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);H("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);H("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);H("ERR_STREAM_WRITE_AFTER_END","write after end",Error);H("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);Ja.exports={AbortError:Zi,aggregateTwoErrors:Ya(Rh),hideStackFrames:Ya,codes:Sn}});var Qt=T((Qw,En)=>{"use strict";var{AbortController:Xa,AbortSignal:jh}=typeof self<"u"?self:typeof window<"u"?window:void 0;En.exports=Xa;En.exports.AbortSignal=jh;En.exports.default=Xa});var Ar=T((Kw,es)=>{"use strict";var Kt=typeof Reflect=="object"?Reflect:null,Za=Kt&&typeof Kt.apply=="function"?Kt.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},kn;Kt&&typeof Kt.ownKeys=="function"?kn=Kt.ownKeys:Object.getOwnPropertySymbols?kn=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:kn=function(e){return Object.getOwnPropertyNames(e)};function Nh(t){console&&console.warn&&console.warn(t)}var tl=Number.isNaN||function(e){return e!==e};function R(){R.init.call(this)}es.exports=R;es.exports.once=Mh;R.EventEmitter=R;R.prototype._events=void 0;R.prototype._eventsCount=0;R.prototype._maxListeners=void 0;var el=10;function An(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(R,"defaultMaxListeners",{enumerable:!0,get:function(){return el},set:function(t){if(typeof t!="number"||t<0||tl(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");el=t}});R.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};R.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||tl(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function rl(t){return t._maxListeners===void 0?R.defaultMaxListeners:t._maxListeners}R.prototype.getMaxListeners=function(){return rl(this)};R.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")Za(l,this,r);else for(var u=l.length,d=al(l,u),n=0;n<u;++n)Za(d[n],this,r);return!0};function nl(t,e,r,n){var i,s,o;if(An(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=rl(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Nh(a)}return t}R.prototype.addListener=function(e,r){return nl(this,e,r,!1)};R.prototype.on=R.prototype.addListener;R.prototype.prependListener=function(e,r){return nl(this,e,r,!0)};function Lh(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function il(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Lh.bind(n);return i.listener=r,n.wrapFn=i,i}R.prototype.once=function(e,r){return An(r),this.on(e,il(this,e,r)),this};R.prototype.prependOnceListener=function(e,r){return An(r),this.prependListener(e,il(this,e,r)),this};R.prototype.removeListener=function(e,r){var n,i,s,o,a;if(An(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():Ph(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};R.prototype.off=R.prototype.removeListener;R.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function sl(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Oh(i):al(i,i.length)}R.prototype.listeners=function(e){return sl(this,e,!0)};R.prototype.rawListeners=function(e){return sl(this,e,!1)};R.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ol.call(t,e)};R.prototype.listenerCount=ol;function ol(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}R.prototype.eventNames=function(){return this._eventsCount>0?kn(this._events):[]};function al(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Ph(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Oh(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Mh(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}ll(t,e,s,{once:!0}),e!=="error"&&Bh(t,i,{once:!0})})}function Bh(t,e,r){typeof t.on=="function"&&ll(t,"error",e,r)}function ll(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var V=T((Vw,rs)=>{"use strict";var Ch=me(),{format:Dh,inspect:Fh}=Xi(),{codes:{ERR_INVALID_ARG_TYPE:ts}}=G(),{kResistStopPropagation:Uh,AggregateError:$h,SymbolDispose:qh}=L(),zh=globalThis.AbortSignal||Qt().AbortSignal,Wh=globalThis.AbortController||Qt().AbortController,Hh=Object.getPrototypeOf(async function(){}).constructor,ul=globalThis.Blob||Ch.Blob,Gh=typeof ul<"u"?function(e){return e instanceof ul}:function(e){return!1},dl=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ts(e,"AbortSignal",t)},Qh=(t,e)=>{if(typeof t!="function")throw new ts(e,"Function",t)};rs.exports={AggregateError:$h,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format:Dh,inspect:Fh,types:{isAsyncFunction(t){return t instanceof Hh},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:Gh,deprecate(t,e){return t},addAbortListener:Ar().addAbortListener||function(e,r){if(e===void 0)throw new ts("signal","AbortSignal",e);dl(e,"signal"),Qh(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[Uh]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[qh](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:zh.any||function(e){if(e.length===1)return e[0];let r=new Wh,n=()=>r.abort();return e.forEach(i=>{dl(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};rs.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Yt=T((Yw,wl)=>{"use strict";var{ArrayIsArray:is,ArrayPrototypeIncludes:pl,ArrayPrototypeJoin:bl,ArrayPrototypeMap:Kh,NumberIsInteger:ss,NumberIsNaN:Vh,NumberMAX_SAFE_INTEGER:Yh,NumberMIN_SAFE_INTEGER:Jh,NumberParseInt:Xh,ObjectPrototypeHasOwnProperty:Zh,RegExpPrototypeExec:gl,String:ep,StringPrototypeToUpperCase:tp,StringPrototypeTrim:rp}=L(),{hideStackFrames:ie,codes:{ERR_SOCKET_BAD_PORT:np,ERR_INVALID_ARG_TYPE:Q,ERR_INVALID_ARG_VALUE:Vt,ERR_OUT_OF_RANGE:yt,ERR_UNKNOWN_SIGNAL:cl}}=G(),{normalizeEncoding:ip}=V(),{isAsyncFunction:sp,isArrayBufferView:op}=V().types,fl={};function ap(t){return t===(t|0)}function lp(t){return t===t>>>0}var up=/^[0-7]+$/,dp="must be a 32-bit unsigned integer or an octal string";function cp(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(gl(up,t)===null)throw new Vt(e,t,dp);t=Xh(t,8)}return ml(t,e),t}var fp=ie((t,e,r=Jh,n=Yh)=>{if(typeof t!="number")throw new Q(e,"number",t);if(!ss(t))throw new yt(e,"an integer",t);if(t<r||t>n)throw new yt(e,`>= ${r} && <= ${n}`,t)}),hp=ie((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Q(e,"number",t);if(!ss(t))throw new yt(e,"an integer",t);if(t<r||t>n)throw new yt(e,`>= ${r} && <= ${n}`,t)}),ml=ie((t,e,r=!1)=>{if(typeof t!="number")throw new Q(e,"number",t);if(!ss(t))throw new yt(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new yt(e,`>= ${n} && <= ${i}`,t)});function os(t,e){if(typeof t!="string")throw new Q(e,"string",t)}function pp(t,e,r=void 0,n){if(typeof t!="number")throw new Q(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&Vh(t))throw new yt(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var bp=ie((t,e,r)=>{if(!pl(r,t)){let i="must be one of: "+bl(Kh(r,s=>typeof s=="string"?`'${s}'`:ep(s)),", ");throw new Vt(e,t,i)}});function yl(t,e){if(typeof t!="boolean")throw new Q(e,"boolean",t)}function ns(t,e,r){return t==null||!Zh(t,e)?r:t[e]}var gp=ie((t,e,r=null)=>{let n=ns(r,"allowArray",!1),i=ns(r,"allowFunction",!1);if(!ns(r,"nullable",!1)&&t===null||!n&&is(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Q(e,"Object",t)}),mp=ie((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Q(e,"a dictionary",t)}),Tn=ie((t,e,r=0)=>{if(!is(t))throw new Q(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Vt(e,t,n)}});function yp(t,e){Tn(t,e);for(let r=0;r<t.length;r++)os(t[r],`${e}[${r}]`)}function _p(t,e){Tn(t,e);for(let r=0;r<t.length;r++)yl(t[r],`${e}[${r}]`)}function wp(t,e){Tn(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new Q(i,"AbortSignal",n);_l(n,i)}}function xp(t,e="signal"){if(os(t,e),fl[t]===void 0)throw fl[tp(t)]!==void 0?new cl(t+" (signals must use all capital letters)"):new cl(t)}var vp=ie((t,e="buffer")=>{if(!op(t))throw new Q(e,["Buffer","TypedArray","DataView"],t)});function Sp(t,e){let r=ip(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Vt("encoding",e,`is invalid for data of length ${n}`)}function Ep(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&rp(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new np(e,t,r);return t|0}var _l=ie((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Q(e,"AbortSignal",t)}),kp=ie((t,e)=>{if(typeof t!="function")throw new Q(e,"Function",t)}),Ap=ie((t,e)=>{if(typeof t!="function"||sp(t))throw new Q(e,"Function",t)}),Tp=ie((t,e)=>{if(t!==void 0)throw new Q(e,"undefined",t)});function Ip(t,e,r){if(!pl(r,t))throw new Q(e,`('${bl(r,"|")}')`,t)}var Rp=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function hl(t,e){if(typeof t>"u"||!gl(Rp,t))throw new Vt(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function jp(t){if(typeof t=="string")return hl(t,"hints"),t;if(is(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];hl(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Vt("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}wl.exports={isInt32:ap,isUint32:lp,parseFileMode:cp,validateArray:Tn,validateStringArray:yp,validateBooleanArray:_p,validateAbortSignalArray:wp,validateBoolean:yl,validateBuffer:vp,validateDictionary:mp,validateEncoding:Sp,validateFunction:kp,validateInt32:hp,validateInteger:fp,validateNumber:pp,validateObject:gp,validateOneOf:bp,validatePlainFunction:Ap,validatePort:Ep,validateSignalName:xp,validateString:os,validateUint32:ml,validateUndefined:Tp,validateUnion:Ip,validateAbortSignal:_l,validateLinkHeaderValue:jp}});var Je=T((Jw,El)=>{var B=El.exports={},_e,we;function as(){throw new Error("setTimeout has not been defined")}function ls(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?_e=setTimeout:_e=as}catch{_e=as}try{typeof clearTimeout=="function"?we=clearTimeout:we=ls}catch{we=ls}})();function xl(t){if(_e===setTimeout)return setTimeout(t,0);if((_e===as||!_e)&&setTimeout)return _e=setTimeout,setTimeout(t,0);try{return _e(t,0)}catch{try{return _e.call(null,t,0)}catch{return _e.call(this,t,0)}}}function Np(t){if(we===clearTimeout)return clearTimeout(t);if((we===ls||!we)&&clearTimeout)return we=clearTimeout,clearTimeout(t);try{return we(t)}catch{try{return we.call(null,t)}catch{return we.call(this,t)}}}var Pe=[],Jt=!1,_t,In=-1;function Lp(){!Jt||!_t||(Jt=!1,_t.length?Pe=_t.concat(Pe):In=-1,Pe.length&&vl())}function vl(){if(!Jt){var t=xl(Lp);Jt=!0;for(var e=Pe.length;e;){for(_t=Pe,Pe=[];++In<e;)_t&&_t[In].run();In=-1,e=Pe.length}_t=null,Jt=!1,Np(t)}}B.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Pe.push(new Sl(t,e)),Pe.length===1&&!Jt&&xl(vl)};function Sl(t,e){this.fun=t,this.array=e}Sl.prototype.run=function(){this.fun.apply(null,this.array)};B.title="browser";B.browser=!0;B.env={};B.argv=[];B.version="";B.versions={};function Oe(){}B.on=Oe;B.addListener=Oe;B.once=Oe;B.off=Oe;B.removeListener=Oe;B.removeAllListeners=Oe;B.emit=Oe;B.prependListener=Oe;B.prependOnceListener=Oe;B.listeners=function(t){return[]};B.binding=function(t){throw new Error("process.binding is not supported")};B.cwd=function(){return"/"};B.chdir=function(t){throw new Error("process.chdir is not supported")};B.umask=function(){return 0}});var ve=T((Xw,Fl)=>{"use strict";var{SymbolAsyncIterator:kl,SymbolIterator:Al,SymbolFor:wt}=L(),Tl=wt("nodejs.stream.destroyed"),Il=wt("nodejs.stream.errored"),us=wt("nodejs.stream.readable"),ds=wt("nodejs.stream.writable"),Rl=wt("nodejs.stream.disturbed"),Pp=wt("nodejs.webstream.isClosedPromise"),Op=wt("nodejs.webstream.controllerErrorFunction");function Rn(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function jn(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Mp(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function xe(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function jl(t){return!!(t&&!xe(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function Nl(t){return!!(t&&!xe(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function Ll(t){return!!(t&&!xe(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Bp(t){return jl(t)||Nl(t)||Ll(t)}function Cp(t,e){return t==null?!1:e===!0?typeof t[kl]=="function":e===!1?typeof t[Al]=="function":typeof t[kl]=="function"||typeof t[Al]=="function"}function Nn(t){if(!xe(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[Tl]||n!=null&&n.destroyed)}function Pl(t){if(!jn(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Dp(t,e){if(!jn(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function Fp(t){if(!Rn(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Ol(t,e){if(!Rn(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function Ml(t){return t&&t[us]!=null?t[us]:typeof t?.readable!="boolean"?null:Nn(t)?!1:Rn(t)&&t.readable&&!Ol(t)}function Bl(t){return t&&t[ds]!=null?t[ds]:typeof t?.writable!="boolean"?null:Nn(t)?!1:jn(t)&&t.writable&&!Pl(t)}function Up(t,e){return xe(t)?Nn(t)?!0:!(e?.readable!==!1&&Ml(t)||e?.writable!==!1&&Bl(t)):null}function $p(t){var e,r;return xe(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function qp(t){var e,r;return xe(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function zp(t){if(!xe(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&Cl(t)?t._closed:null}function Cl(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function Dl(t){return typeof t._sent100=="boolean"&&Cl(t)}function Wp(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Hp(t){if(!xe(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&Dl(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Gp(t){var e;return!!(t&&((e=t[Rl])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Qp(t){var e,r,n,i,s,o,a,l,u,d;return!!(t&&((e=(r=(n=(i=(s=(o=t[Il])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(u=t._readableState)===null||u===void 0?void 0:u.errored)!==null&&e!==void 0?e:!((d=t._writableState)===null||d===void 0)&&d.errored))}Fl.exports={isDestroyed:Nn,kIsDestroyed:Tl,isDisturbed:Gp,kIsDisturbed:Rl,isErrored:Qp,kIsErrored:Il,isReadable:Ml,kIsReadable:us,kIsClosedPromise:Pp,kControllerErrorFunction:Op,kIsWritable:ds,isClosed:zp,isDuplexNodeStream:Mp,isFinished:Up,isIterable:Cp,isReadableNodeStream:Rn,isReadableStream:jl,isReadableEnded:Fp,isReadableFinished:Ol,isReadableErrored:qp,isNodeStream:xe,isWebStream:Bp,isWritable:Bl,isWritableNodeStream:jn,isWritableStream:Nl,isWritableEnded:Pl,isWritableFinished:Dp,isWritableErrored:$p,isServerRequest:Wp,isServerResponse:Dl,willEmitClose:Hp,isTransformStream:Ll}});var Me=T((Zw,bs)=>{"use strict";var Xe=Je(),{AbortError:Kl,codes:Kp}=G(),{ERR_INVALID_ARG_TYPE:Vp,ERR_STREAM_PREMATURE_CLOSE:Ul}=Kp,{kEmptyObject:fs,once:hs}=V(),{validateAbortSignal:Yp,validateFunction:Jp,validateObject:Xp,validateBoolean:Zp}=Yt(),{Promise:eb,PromisePrototypeThen:tb,SymbolDispose:Vl}=L(),{isClosed:rb,isReadable:$l,isReadableNodeStream:cs,isReadableStream:nb,isReadableFinished:ql,isReadableErrored:zl,isWritable:Wl,isWritableNodeStream:Hl,isWritableStream:ib,isWritableFinished:Gl,isWritableErrored:Ql,isNodeStream:sb,willEmitClose:ob,kIsClosedPromise:ab}=ve(),Xt;function lb(t){return t.setHeader&&typeof t.abort=="function"}var ps=()=>{};function Yl(t,e,r){var n,i;if(arguments.length===2?(r=e,e=fs):e==null?e=fs:Xp(e,"options"),Jp(r,"callback"),Yp(e.signal,"options.signal"),r=hs(r),nb(t)||ib(t))return ub(t,e,r);if(!sb(t))throw new Vp("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:cs(t),o=(i=e.writable)!==null&&i!==void 0?i:Hl(t),a=t._writableState,l=t._readableState,u=()=>{t.writable||h()},d=ob(t)&&cs(t)===s&&Hl(t)===o,c=Gl(t,!1),h=()=>{c=!0,t.destroyed&&(d=!1),!(d&&(!t.readable||s))&&(!s||f)&&r.call(t)},f=ql(t,!1),p=()=>{f=!0,t.destroyed&&(d=!1),!(d&&(!t.writable||o))&&(!o||c)&&r.call(t)},b=A=>{r.call(t,A)},_=rb(t),m=()=>{_=!0;let A=Ql(t)||zl(t);if(A&&typeof A!="boolean")return r.call(t,A);if(s&&!f&&cs(t,!0)&&!ql(t,!1))return r.call(t,new Ul);if(o&&!c&&!Gl(t,!1))return r.call(t,new Ul);r.call(t)},y=()=>{_=!0;let A=Ql(t)||zl(t);if(A&&typeof A!="boolean")return r.call(t,A);r.call(t)},v=()=>{t.req.on("finish",h)};lb(t)?(t.on("complete",h),d||t.on("abort",m),t.req?v():t.on("request",v)):o&&!a&&(t.on("end",u),t.on("close",u)),!d&&typeof t.aborted=="boolean"&&t.on("aborted",m),t.on("end",p),t.on("finish",h),e.error!==!1&&t.on("error",b),t.on("close",m),_?Xe.nextTick(m):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?d||Xe.nextTick(y):(!s&&(!d||$l(t))&&(c||Wl(t)===!1)||!o&&(!d||Wl(t))&&(f||$l(t)===!1)||l&&t.req&&t.aborted)&&Xe.nextTick(y);let w=()=>{r=ps,t.removeListener("aborted",m),t.removeListener("complete",h),t.removeListener("abort",m),t.removeListener("request",v),t.req&&t.req.removeListener("finish",h),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",h),t.removeListener("end",p),t.removeListener("error",b),t.removeListener("close",m)};if(e.signal&&!_){let A=()=>{let Re=r;w(),Re.call(t,new Kl(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Xe.nextTick(A);else{Xt=Xt||V().addAbortListener;let Re=Xt(e.signal,A),D=r;r=hs((...jt)=>{Re[Vl](),D.apply(t,jt)})}}return w}function ub(t,e,r){let n=!1,i=ps;if(e.signal)if(i=()=>{n=!0,r.call(t,new Kl(void 0,{cause:e.signal.reason}))},e.signal.aborted)Xe.nextTick(i);else{Xt=Xt||V().addAbortListener;let o=Xt(e.signal,i),a=r;r=hs((...l)=>{o[Vl](),a.apply(t,l)})}let s=(...o)=>{n||Xe.nextTick(()=>r.apply(t,o))};return tb(t[ab].promise,s,s),ps}function db(t,e){var r;let n=!1;return e===null&&(e=fs),(r=e)!==null&&r!==void 0&&r.cleanup&&(Zp(e.cleanup,"cleanup"),n=e.cleanup),new eb((i,s)=>{let o=Yl(t,e,a=>{n&&o(),a?s(a):i()})})}bs.exports=Yl;bs.exports.finished=db});var xt=T((e0,iu)=>{"use strict";var Se=Je(),{aggregateTwoErrors:cb,codes:{ERR_MULTIPLE_CALLBACK:fb},AbortError:hb}=G(),{Symbol:Zl}=L(),{kIsDestroyed:pb,isDestroyed:bb,isFinished:gb,isServerRequest:mb}=ve(),eu=Zl("kDestroy"),gs=Zl("kConstruct");function tu(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function yb(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(tu(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?Jl(this,t,e):this.once(eu,function(s){Jl(this,cb(s,t),e)}),this)}function Jl(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;tu(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?Se.nextTick(_b,t,s):Se.nextTick(ru,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function _b(t,e){ms(t,e),ru(t)}function ru(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function ms(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function wb(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function ys(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Se.nextTick(ms,t,e):ms(t,e))}function xb(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(gs,e),!(t.listenerCount(gs)>1)&&Se.nextTick(vb,t)}function vb(t){let e=!1;function r(n){if(e){ys(t,n??new fb);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(eu,n):n?ys(t,n,!0):Se.nextTick(Sb,t)}try{t._construct(n=>{Se.nextTick(r,n)})}catch(n){Se.nextTick(r,n)}}function Sb(t){t.emit(gs)}function Xl(t){return t?.setHeader&&typeof t.abort=="function"}function nu(t){t.emit("close")}function Eb(t,e){t.emit("error",e),Se.nextTick(nu,t)}function kb(t,e){!t||bb(t)||(!e&&!gb(t)&&(e=new hb),mb(t)?(t.socket=null,t.destroy(e)):Xl(t)?t.abort():Xl(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Se.nextTick(Eb,t,e):Se.nextTick(nu,t),t.destroyed||(t[pb]=!0))}iu.exports={construct:xb,destroyer:kb,destroy:yb,undestroy:wb,errorOrDestroy:ys}});var On=T((t0,ou)=>{"use strict";var{ArrayIsArray:Ab,ObjectSetPrototypeOf:su}=L(),{EventEmitter:Ln}=Ar();function Pn(t){Ln.call(this,t)}su(Pn.prototype,Ln.prototype);su(Pn,Ln);Pn.prototype.pipe=function(t,e){let r=this;function n(d){t.writable&&t.write(d)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(d){u(),Ln.listenerCount(this,"error")===0&&this.emit("error",d)}_s(r,"error",l),_s(t,"error",l);function u(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t};function _s(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Ab(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}ou.exports={Stream:Pn,prependListener:_s}});var Tr=T((r0,Mn)=>{"use strict";var{SymbolDispose:Tb}=L(),{AbortError:au,codes:Ib}=G(),{isNodeStream:lu,isWebStream:Rb,kControllerErrorFunction:jb}=ve(),Nb=Me(),{ERR_INVALID_ARG_TYPE:uu}=Ib,ws,Lb=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new uu(e,"AbortSignal",t)};Mn.exports.addAbortSignal=function(e,r){if(Lb(e,"signal"),!lu(r)&&!Rb(r))throw new uu("stream",["ReadableStream","WritableStream","Stream"],r);return Mn.exports.addAbortSignalNoValidate(e,r)};Mn.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=lu(e)?()=>{e.destroy(new au(void 0,{cause:t.reason}))}:()=>{e[jb](new au(void 0,{cause:t.reason}))};if(t.aborted)r();else{ws=ws||V().addAbortListener;let n=ws(t,r);Nb(e,n[Tb])}return e}});var fu=T((i0,cu)=>{"use strict";var{StringPrototypeSlice:du,SymbolIterator:Pb,TypedArrayPrototypeSet:Bn,Uint8Array:Ob}=L(),{Buffer:xs}=me(),{inspect:Mb}=V();cu.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return xs.alloc(0);let r=xs.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)Bn(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Pb](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=du(s,0,e),this.head=n,n.data=du(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=xs.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)Bn(r,o,n-e),e-=o.length;else{e===o.length?(Bn(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(Bn(r,new Ob(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return Mb(this,{...r,depth:0,customInspect:!1})}}});var Ir=T((s0,gu)=>{"use strict";var{MathFloor:Bb,NumberIsInteger:Cb}=L(),{validateInteger:Db}=Yt(),{ERR_INVALID_ARG_VALUE:Fb}=G().codes,hu=16*1024,pu=16;function Ub(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function bu(t){return t?pu:hu}function $b(t,e){Db(e,"value",0),t?pu=e:hu=e}function qb(t,e,r,n){let i=Ub(e,n,r);if(i!=null){if(!Cb(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new Fb(s,i)}return Bb(i)}return bu(t.objectMode)}gu.exports={getHighWaterMark:qb,getDefaultHighWaterMark:bu,setDefaultHighWaterMark:$b}});var _u=T((vs,yu)=>{var Cn=me(),Ee=Cn.Buffer;function mu(t,e){for(var r in t)e[r]=t[r]}Ee.from&&Ee.alloc&&Ee.allocUnsafe&&Ee.allocUnsafeSlow?yu.exports=Cn:(mu(Cn,vs),vs.Buffer=vt);function vt(t,e,r){return Ee(t,e,r)}vt.prototype=Object.create(Ee.prototype);mu(Ee,vt);vt.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ee(t,e,r)};vt.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Ee(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};vt.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ee(t)};vt.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Cn.SlowBuffer(t)}});var vu=T(xu=>{"use strict";var Es=_u().Buffer,wu=Es.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function zb(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Wb(t){var e=zb(t);if(typeof e!="string"&&(Es.isEncoding===wu||!wu(t)))throw new Error("Unknown encoding: "+t);return e||t}xu.StringDecoder=Rr;function Rr(t){this.encoding=Wb(t);var e;switch(this.encoding){case"utf16le":this.text=Yb,this.end=Jb,e=4;break;case"utf8":this.fillLast=Qb,e=4;break;case"base64":this.text=Xb,this.end=Zb,e=3;break;default:this.write=eg,this.end=tg;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Es.allocUnsafe(e)}Rr.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Rr.prototype.end=Vb;Rr.prototype.text=Kb;Rr.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Ss(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Hb(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Ss(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Ss(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Ss(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Gb(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Qb(t){var e=this.lastTotal-this.lastNeed,r=Gb(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Kb(t,e){var r=Hb(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Vb(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Yb(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Jb(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Xb(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Zb(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function eg(t){return t.toString(this.encoding)}function tg(t){return t&&t.length?this.write(t):""}});var ks=T((a0,Au)=>{"use strict";var Su=Je(),{PromisePrototypeThen:rg,SymbolAsyncIterator:Eu,SymbolIterator:ku}=L(),{Buffer:ng}=me(),{ERR_INVALID_ARG_TYPE:ig,ERR_STREAM_NULL_VALUES:sg}=G().codes;function og(t,e,r){let n;if(typeof e=="string"||e instanceof ng)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[Eu])i=!0,n=e[Eu]();else if(e&&e[ku])i=!1,n=e[ku]();else throw new ig("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(u,d){rg(a(u),()=>Su.nextTick(d,u),c=>Su.nextTick(d,c||u))};async function a(u){let d=u!=null,c=typeof n.throw=="function";if(d&&c){let{value:h,done:f}=await n.throw(u);if(await h,f)return}if(typeof n.return=="function"){let{value:h}=await n.return();await h}}async function l(){for(;;){try{let{value:u,done:d}=i?await n.next():n.next();if(d)s.push(null);else{let c=u&&typeof u.then=="function"?await u:u;if(c===null)throw o=!1,new sg;if(s.push(c))continue;o=!1}}catch(u){s.destroy(u)}break}}return s}Au.exports=og});var Nr=T((l0,Wu)=>{"use strict";var ue=Je(),{ArrayPrototypeIndexOf:ag,NumberIsInteger:lg,NumberIsNaN:ug,NumberParseInt:dg,ObjectDefineProperties:Ps,ObjectKeys:cg,ObjectSetPrototypeOf:Ru,Promise:ju,SafeSet:fg,SymbolAsyncDispose:hg,SymbolAsyncIterator:pg,Symbol:bg}=L();Wu.exports=S;S.ReadableState=$n;var{EventEmitter:gg}=Ar(),{Stream:Ze,prependListener:mg}=On(),{Buffer:As}=me(),{addAbortSignal:yg}=Tr(),Nu=Me(),E=V().debuglog("stream",t=>{E=t}),_g=fu(),tr=xt(),{getHighWaterMark:wg,getDefaultHighWaterMark:xg}=Ir(),{aggregateTwoErrors:Tu,codes:{ERR_INVALID_ARG_TYPE:vg,ERR_METHOD_NOT_IMPLEMENTED:Sg,ERR_OUT_OF_RANGE:Eg,ERR_STREAM_PUSH_AFTER_EOF:kg,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Ag},AbortError:Tg}=G(),{validateObject:Ig}=Yt(),St=bg("kPaused"),{StringDecoder:Lu}=vu(),Rg=ks();Ru(S.prototype,Ze.prototype);Ru(S,Ze);var Ts=()=>{},{errorOrDestroy:Zt}=tr,er=1,jg=2,Pu=4,jr=8,Ou=16,Dn=32,Fn=64,Mu=128,Ng=256,Lg=512,Pg=1024,Ns=2048,Ls=4096,Og=8192,Mg=16384,Bg=32768,Bu=65536,Cg=1<<17,Dg=1<<18;function F(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}Ps($n.prototype,{objectMode:F(er),ended:F(jg),endEmitted:F(Pu),reading:F(jr),constructed:F(Ou),sync:F(Dn),needReadable:F(Fn),emittedReadable:F(Mu),readableListening:F(Ng),resumeScheduled:F(Lg),errorEmitted:F(Pg),emitClose:F(Ns),autoDestroy:F(Ls),destroyed:F(Og),closed:F(Mg),closeEmitted:F(Bg),multiAwaitDrain:F(Bu),readingMore:F(Cg),dataEmitted:F(Dg)});function $n(t,e,r){typeof r!="boolean"&&(r=e instanceof ke()),this.state=Ns|Ls|Ou|Dn,t&&t.objectMode&&(this.state|=er),r&&t&&t.readableObjectMode&&(this.state|=er),this.highWaterMark=t?wg(this,t,"readableHighWaterMark",r):xg(!1),this.buffer=new _g,this.length=0,this.pipes=[],this.flowing=null,this[St]=null,t&&t.emitClose===!1&&(this.state&=~Ns),t&&t.autoDestroy===!1&&(this.state&=~Ls),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new Lu(t.encoding),this.encoding=t.encoding)}function S(t){if(!(this instanceof S))return new S(t);let e=this instanceof ke();this._readableState=new $n(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&yg(t.signal,this)),Ze.call(this,t),tr.construct(this,()=>{this._readableState.needReadable&&Un(this,this._readableState)})}S.prototype.destroy=tr.destroy;S.prototype._undestroy=tr.undestroy;S.prototype._destroy=function(t,e){e(t)};S.prototype[gg.captureRejectionSymbol]=function(t){this.destroy(t)};S.prototype[hg]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new Tg,this.destroy(t)),new ju((e,r)=>Nu(this,n=>n&&n!==t?r(n):e(null)))};S.prototype.push=function(t,e){return Cu(this,t,e,!1)};S.prototype.unshift=function(t,e){return Cu(this,t,e,!0)};function Cu(t,e,r,n){E("readableAddChunk",e);let i=t._readableState,s;if((i.state&er)===0&&(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=As.from(e,r).toString(i.encoding):(e=As.from(e,r),r=""))):e instanceof As?r="":Ze._isUint8Array(e)?(e=Ze._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new vg("chunk",["string","Buffer","Uint8Array"],e))),s)Zt(t,s);else if(e===null)i.state&=~jr,$g(t,i);else if((i.state&er)!==0||e&&e.length>0)if(n)if((i.state&Pu)!==0)Zt(t,new Ag);else{if(i.destroyed||i.errored)return!1;Is(t,i,e,!0)}else if(i.ended)Zt(t,new kg);else{if(i.destroyed||i.errored)return!1;i.state&=~jr,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?Is(t,i,e,!1):Un(t,i)):Is(t,i,e,!1)}else n||(i.state&=~jr,Un(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function Is(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&Bu)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&Fn)!==0&&qn(t)),Un(t,e)}S.prototype.isPaused=function(){let t=this._readableState;return t[St]===!0||t.flowing===!1};S.prototype.setEncoding=function(t){let e=new Lu(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var Fg=1073741824;function Ug(t){if(t>Fg)throw new Eg("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function Iu(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&er)!==0?1:ug(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}S.prototype.read=function(t){E("read",t),t===void 0?t=NaN:lg(t)||(t=dg(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=Ug(t)),t!==0&&(e.state&=~Mu),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return E("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Rs(this):qn(this),null;if(t=Iu(t,e),t===0&&e.ended)return e.length===0&&Rs(this),null;let n=(e.state&Fn)!==0;if(E("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,E("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,E("reading, ended or constructing",n);else if(n){E("do read"),e.state|=jr|Dn,e.length===0&&(e.state|=Fn);try{this._read(e.highWaterMark)}catch(s){Zt(this,s)}e.state&=~Dn,e.reading||(t=Iu(r,e))}let i;return t>0?i=qu(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Rs(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function $g(t,e){if(E("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?qn(t):(e.needReadable=!1,e.emittedReadable=!0,Du(t))}}function qn(t){let e=t._readableState;E("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(E("emitReadable",e.flowing),e.emittedReadable=!0,ue.nextTick(Du,t))}function Du(t){let e=t._readableState;E("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Uu(t)}function Un(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,ue.nextTick(qg,t,e))}function qg(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(E("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}S.prototype._read=function(t){throw new Sg("_read()")};S.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new fg(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),E("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==ue.stdout&&t!==ue.stderr?a:_;n.endEmitted?ue.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(m,y){E("onunpipe"),m===r&&y&&y.hasUnpiped===!1&&(y.hasUnpiped=!0,d())}function a(){E("onend"),t.end()}let l,u=!1;function d(){E("cleanup"),t.removeListener("close",p),t.removeListener("finish",b),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",_),r.removeListener("data",h),u=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function c(){u||(n.pipes.length===1&&n.pipes[0]===t?(E("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(E("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=zg(r,t),t.on("drain",l))}r.on("data",h);function h(m){E("ondata");let y=t.write(m);E("dest.write",y),y===!1&&c()}function f(m){if(E("onerror",m),_(),t.removeListener("error",f),t.listenerCount("error")===0){let y=t._writableState||t._readableState;y&&!y.errorEmitted?Zt(t,m):t.emit("error",m)}}mg(t,"error",f);function p(){t.removeListener("finish",b),_()}t.once("close",p);function b(){E("onfinish"),t.removeListener("close",p),_()}t.once("finish",b);function _(){E("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?c():n.flowing||(E("pipe resume"),r.resume()),t};function zg(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(E("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(E("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}S.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=ag(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};S.prototype.on=function(t,e){let r=Ze.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,E("on readable",n.length,n.reading),n.length?qn(this):n.reading||ue.nextTick(Wg,this)),r};S.prototype.addListener=S.prototype.on;S.prototype.removeListener=function(t,e){let r=Ze.prototype.removeListener.call(this,t,e);return t==="readable"&&ue.nextTick(Fu,this),r};S.prototype.off=S.prototype.removeListener;S.prototype.removeAllListeners=function(t){let e=Ze.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&ue.nextTick(Fu,this),e};function Fu(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[St]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function Wg(t){E("readable nexttick read 0"),t.read(0)}S.prototype.resume=function(){let t=this._readableState;return t.flowing||(E("resume"),t.flowing=!t.readableListening,Hg(this,t)),t[St]=!1,this};function Hg(t,e){e.resumeScheduled||(e.resumeScheduled=!0,ue.nextTick(Gg,t,e))}function Gg(t,e){E("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Uu(t),e.flowing&&!e.reading&&t.read(0)}S.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[St]=!0,this};function Uu(t){let e=t._readableState;for(E("flow",e.flowing);e.flowing&&t.read()!==null;);}S.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{Zt(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=cg(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};S.prototype[pg]=function(){return $u(this)};S.prototype.iterator=function(t){return t!==void 0&&Ig(t,"options"),$u(this,t)};function $u(t,e){typeof t.read!="function"&&(t=S.wrap(t,{objectMode:!0}));let r=Qg(t,e);return r.stream=t,r}async function*Qg(t,e){let r=Ts;function n(o){this===t?(r(),r=Ts):r=o}t.on("readable",n);let i,s=Nu(t,{writable:!1},o=>{i=o?Tu(i,o):null,r(),r=Ts});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new ju(n)}}}catch(o){throw i=Tu(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?tr.destroyer(t,null):(t.off("readable",n),s())}}Ps(S.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Ps($n.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[St]!==!1},set(t){this[St]=!!t}}});S._fromList=qu;function qu(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Rs(t){let e=t._readableState;E("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,ue.nextTick(Kg,e,t))}function Kg(t,e){if(E("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)ue.nextTick(Vg,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function Vg(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}S.from=function(t,e){return Rg(S,t,e)};var js;function zu(){return js===void 0&&(js={}),js}S.fromWeb=function(t,e){return zu().newStreamReadableFromReadableStream(t,e)};S.toWeb=function(t,e){return zu().newReadableStreamFromStreamReadable(t,e)};S.wrap=function(t,e){var r,n;return new S({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){tr.destroyer(t,i),s(i)}}).wrap(t)}});var Qn=T((u0,rd)=>{"use strict";var Et=Je(),{ArrayPrototypeSlice:Qu,Error:Yg,FunctionPrototypeSymbolHasInstance:Ku,ObjectDefineProperty:Vu,ObjectDefineProperties:Jg,ObjectSetPrototypeOf:Yu,StringPrototypeToLowerCase:Xg,Symbol:Zg,SymbolHasInstance:em}=L();rd.exports=O;O.WritableState=Or;var{EventEmitter:tm}=Ar(),Lr=On().Stream,{Buffer:zn}=me(),Gn=xt(),{addAbortSignal:rm}=Tr(),{getHighWaterMark:nm,getDefaultHighWaterMark:im}=Ir(),{ERR_INVALID_ARG_TYPE:sm,ERR_METHOD_NOT_IMPLEMENTED:om,ERR_MULTIPLE_CALLBACK:Ju,ERR_STREAM_CANNOT_PIPE:am,ERR_STREAM_DESTROYED:Pr,ERR_STREAM_ALREADY_FINISHED:lm,ERR_STREAM_NULL_VALUES:um,ERR_STREAM_WRITE_AFTER_END:dm,ERR_UNKNOWN_ENCODING:Xu}=G().codes,{errorOrDestroy:rr}=Gn;Yu(O.prototype,Lr.prototype);Yu(O,Lr);function Bs(){}var nr=Zg("kOnFinished");function Or(t,e,r){typeof r!="boolean"&&(r=e instanceof ke()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?nm(this,t,"writableHighWaterMark",r):im(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=fm.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Hn(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[nr]=[]}function Hn(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Or.prototype.getBuffer=function(){return Qu(this.buffered,this.bufferedIndex)};Vu(Or.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function O(t){let e=this instanceof ke();if(!e&&!Ku(O,this))return new O(t);this._writableState=new Or(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&rm(t.signal,this)),Lr.call(this,t),Gn.construct(this,()=>{let r=this._writableState;r.writing||Ds(this,r),Fs(this,r)})}Vu(O,em,{__proto__:null,value:function(t){return Ku(this,t)?!0:this!==O?!1:t&&t._writableState instanceof Or}});O.prototype.pipe=function(){rr(this,new am)};function Zu(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!zn.isEncoding(r))throw new Xu(r);typeof n!="function"&&(n=Bs)}if(e===null)throw new um;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=zn.from(e,r),r="buffer");else if(e instanceof zn)r="buffer";else if(Lr._isUint8Array(e))e=Lr._uint8ArrayToBuffer(e),r="buffer";else throw new sm("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new dm:i.destroyed&&(s=new Pr("write")),s?(Et.nextTick(n,s),rr(t,s,!0),s):(i.pendingcb++,cm(t,i,e,r,n))}O.prototype.write=function(t,e,r){return Zu(this,t,e,r)===!0};O.prototype.cork=function(){this._writableState.corked++};O.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Ds(this,t))};O.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=Xg(e)),!zn.isEncoding(e))throw new Xu(e);return this._writableState.defaultEncoding=e,this};function cm(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==Bs&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function Hu(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Pr("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Gu(t,e,r,n){--e.pendingcb,n(r),Cs(e),rr(t,r)}function fm(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){rr(t,new Ju);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?Et.nextTick(Gu,t,r,e,i):Gu(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&Ds(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},Et.nextTick(hm,r.afterWriteTickInfo)):ed(t,r,1,i))}function hm({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,ed(t,e,r,n)}function ed(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&Cs(e),Fs(t,e)}function Cs(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Pr("write"))}let r=t[nr].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new Pr("end"))}Hn(t)}function Ds(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?Bs:u=>{for(let d=o;d<r.length;++d)r[d].callback(u)},l=e.allNoop&&o===0?r:Qu(r,o);l.allBuffers=e.allBuffers,Hu(t,e,!0,e.length,l,"",a),Hn(e)}else{do{let{chunk:a,encoding:l,callback:u}=r[o];r[o++]=null;let d=i?1:a.length;Hu(t,e,!1,d,a,l,u)}while(o<r.length&&!e.writing);o===r.length?Hn(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}O.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new om("_write()")};O.prototype._writev=null;O.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=Zu(this,t,e);s instanceof Yg&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,Fs(this,n,!0),n.ended=!0):n.finished?i=new lm("end"):n.destroyed&&(i=new Pr("end"))),typeof r=="function"&&(i||n.finished?Et.nextTick(r,i):n[nr].push(r)),this};function Wn(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function pm(t,e){let r=!1;function n(i){if(r){rr(t,i??Ju());return}if(r=!0,e.pendingcb--,i){let s=e[nr].splice(0);for(let o=0;o<s.length;o++)s[o](i);rr(t,i,e.sync)}else Wn(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Et.nextTick(Ms,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function bm(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,pm(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Fs(t,e,r){Wn(e)&&(bm(t,e),e.pendingcb===0&&(r?(e.pendingcb++,Et.nextTick((n,i)=>{Wn(i)?Ms(n,i):i.pendingcb--},t,e)):Wn(e)&&(e.pendingcb++,Ms(t,e))))}function Ms(t,e){e.pendingcb--,e.finished=!0;let r=e[nr].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}Jg(O.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var gm=Gn.destroy;O.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[nr].length)&&Et.nextTick(Cs,r),gm.call(this,t,e),this};O.prototype._undestroy=Gn.undestroy;O.prototype._destroy=function(t,e){e(t)};O.prototype[tm.captureRejectionSymbol]=function(t){this.destroy(t)};var Os;function td(){return Os===void 0&&(Os={}),Os}O.fromWeb=function(t,e){return td().newStreamWritableFromWritableStream(t,e)};O.toWeb=function(t){return td().newWritableStreamFromStreamWritable(t)}});var md=T((d0,gd)=>{var Us=Je(),mm=me(),{isReadable:ym,isWritable:_m,isIterable:nd,isNodeStream:wm,isReadableNodeStream:id,isWritableNodeStream:sd,isDuplexNodeStream:xm,isReadableStream:od,isWritableStream:ad}=ve(),ld=Me(),{AbortError:pd,codes:{ERR_INVALID_ARG_TYPE:vm,ERR_INVALID_RETURN_VALUE:ud}}=G(),{destroyer:sr}=xt(),Sm=ke(),bd=Nr(),Em=Qn(),{createDeferredPromise:dd}=V(),cd=ks(),fd=globalThis.Blob||mm.Blob,km=typeof fd<"u"?function(e){return e instanceof fd}:function(e){return!1},Am=globalThis.AbortController||Qt().AbortController,{FunctionPrototypeCall:hd}=L(),et=class extends Sm{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};gd.exports=function t(e,r){if(xm(e))return e;if(id(e))return ir({readable:e});if(sd(e))return ir({writable:e});if(wm(e))return ir({writable:!1,readable:!1});if(od(e))return ir({readable:bd.fromWeb(e)});if(ad(e))return ir({writable:Em.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=Tm(e);if(nd(i))return cd(et,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let u,d=hd(l,i,c=>{if(c!=null)throw new ud("nully","body",c)},c=>{sr(u,c)});return u=new et({objectMode:!0,readable:!1,write:s,final(c){o(async()=>{try{await d,Us.nextTick(c,null)}catch(h){Us.nextTick(c,h)}})},destroy:a})}throw new ud("Iterable, AsyncIterable or AsyncFunction",r,i)}if(km(e))return t(e.arrayBuffer());if(nd(e))return cd(et,e,{objectMode:!0,writable:!1});if(od(e?.readable)&&ad(e?.writable))return et.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?id(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?sd(e?.writable)?e?.writable:t(e.writable):void 0;return ir({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return hd(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{sr(i,s)}),i=new et({objectMode:!0,writable:!1,read(){}})}throw new vm(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function Tm(t){let{promise:e,resolve:r}=dd(),n=new Am,i=n.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:u}=await o;if(Us.nextTick(u),l)return;if(i.aborted)throw new pd(void 0,{cause:i.reason});({promise:e,resolve:r}=dd()),yield a}})(),{signal:i}),write(o,a,l){let u=r;r=null,u({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function ir(t){let e=t.readable&&typeof t.readable.read!="function"?bd.wrap(t.readable):t.readable,r=t.writable,n=!!ym(e),i=!!_m(r),s,o,a,l,u;function d(c){let h=l;l=null,h?h(c):c&&u.destroy(c)}return u=new et({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(ld(r,c=>{i=!1,c&&sr(e,c),d(c)}),u._write=function(c,h,f){r.write(c,h)?f():s=f},u._final=function(c){r.end(),o=c},r.on("drain",function(){if(s){let c=s;s=null,c()}}),r.on("finish",function(){if(o){let c=o;o=null,c()}})),n&&(ld(e,c=>{n=!1,c&&sr(e,c),d(c)}),e.on("readable",function(){if(a){let c=a;a=null,c()}}),e.on("end",function(){u.push(null)}),u._read=function(){for(;;){let c=e.read();if(c===null){a=u._read;return}if(!u.push(c))return}}),u._destroy=function(c,h){!c&&l!==null&&(c=new pd),a=null,s=null,o=null,l===null?h(c):(l=h,sr(r,c),sr(e,c))},u}});var ke=T((c0,wd)=>{"use strict";var{ObjectDefineProperties:Im,ObjectGetOwnPropertyDescriptor:Be,ObjectKeys:Rm,ObjectSetPrototypeOf:yd}=L();wd.exports=de;var zs=Nr(),se=Qn();yd(de.prototype,zs.prototype);yd(de,zs);{let t=Rm(se.prototype);for(let e=0;e<t.length;e++){let r=t[e];de.prototype[r]||(de.prototype[r]=se.prototype[r])}}function de(t){if(!(this instanceof de))return new de(t);zs.call(this,t),se.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}Im(de.prototype,{writable:{__proto__:null,...Be(se.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Be(se.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Be(se.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Be(se.prototype,"writableBuffer")},writableLength:{__proto__:null,...Be(se.prototype,"writableLength")},writableFinished:{__proto__:null,...Be(se.prototype,"writableFinished")},writableCorked:{__proto__:null,...Be(se.prototype,"writableCorked")},writableEnded:{__proto__:null,...Be(se.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Be(se.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var $s;function _d(){return $s===void 0&&($s={}),$s}de.fromWeb=function(t,e){return _d().newStreamDuplexFromReadableWritablePair(t,e)};de.toWeb=function(t){return _d().newReadableWritablePairFromDuplex(t)};var qs;de.from=function(t){return qs||(qs=md()),qs(t,"body")}});var Gs=T((f0,vd)=>{"use strict";var{ObjectSetPrototypeOf:xd,Symbol:jm}=L();vd.exports=Ce;var{ERR_METHOD_NOT_IMPLEMENTED:Nm}=G().codes,Hs=ke(),{getHighWaterMark:Lm}=Ir();xd(Ce.prototype,Hs.prototype);xd(Ce,Hs);var Mr=jm("kCallback");function Ce(t){if(!(this instanceof Ce))return new Ce(t);let e=t?Lm(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Hs.call(this,t),this._readableState.sync=!1,this[Mr]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Pm)}function Ws(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function Pm(){this._final!==Ws&&Ws.call(this)}Ce.prototype._final=Ws;Ce.prototype._transform=function(t,e,r){throw new Nm("_transform()")};Ce.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[Mr]=r})};Ce.prototype._read=function(){if(this[Mr]){let t=this[Mr];this[Mr]=null,t()}}});var Ks=T((h0,Ed)=>{"use strict";var{ObjectSetPrototypeOf:Sd}=L();Ed.exports=or;var Qs=Gs();Sd(or.prototype,Qs.prototype);Sd(or,Qs);function or(t){if(!(this instanceof or))return new or(t);Qs.call(this,t)}or.prototype._transform=function(t,e,r){r(null,t)}});var Jn=T((p0,Rd)=>{var Br=Je(),{ArrayIsArray:Om,Promise:Mm,SymbolAsyncIterator:Bm,SymbolDispose:Cm}=L(),Yn=Me(),{once:Dm}=V(),Fm=xt(),kd=ke(),{aggregateTwoErrors:Um,codes:{ERR_INVALID_ARG_TYPE:no,ERR_INVALID_RETURN_VALUE:Vs,ERR_MISSING_ARGS:$m,ERR_STREAM_DESTROYED:qm,ERR_STREAM_PREMATURE_CLOSE:zm},AbortError:Wm}=G(),{validateFunction:Hm,validateAbortSignal:Gm}=Yt(),{isIterable:kt,isReadable:Ys,isReadableNodeStream:Vn,isNodeStream:Ad,isTransformStream:ar,isWebStream:Qm,isReadableStream:Js,isReadableFinished:Km}=ve(),Vm=globalThis.AbortController||Qt().AbortController,Xs,Zs,eo;function Td(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=Yn(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,Fm.destroyer(t,s||new qm("pipe")))},cleanup:i}}function Ym(t){return Hm(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function to(t){if(kt(t))return t;if(Vn(t))return Jm(t);throw new no("val",["Readable","Iterable","AsyncIterable"],t)}async function*Jm(t){Zs||(Zs=Nr()),yield*Zs.prototype[Bm].call(t)}async function Kn(t,e,r,{end:n}){let i,s=null,o=u=>{if(u&&(i=u),s){let d=s;s=null,d()}},a=()=>new Mm((u,d)=>{i?d(i):s=()=>{i?d(i):u()}});e.on("drain",o);let l=Yn(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let u of t)e.write(u)||await a();n&&(e.end(),await a()),r()}catch(u){r(i!==u?Um(i,u):u)}finally{l(),e.off("drain",o)}}async function ro(t,e,r,{end:n}){ar(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function Xm(...t){return Id(t,Dm(Ym(t)))}function Id(t,e,r){if(t.length===1&&Om(t[0])&&(t=t[0]),t.length<2)throw new $m("streams");let n=new Vm,i=n.signal,s=r?.signal,o=[];Gm(s,"options.signal");function a(){p(new Wm)}eo=eo||V().addAbortListener;let l;s&&(l=eo(s,a));let u,d,c=[],h=0;function f(v){p(v,--h===0)}function p(v,w){var A;if(v&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=v),!(!u&&!w)){for(;c.length;)c.shift()(u);(A=l)===null||A===void 0||A[Cm](),n.abort(),w&&(u||o.forEach(Re=>Re()),Br.nextTick(e,u,d))}}let b;for(let v=0;v<t.length;v++){let w=t[v],A=v<t.length-1,Re=v>0,D=A||r?.end!==!1,jt=v===t.length-1;if(Ad(w)){let J=function(je){je&&je.name!=="AbortError"&&je.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(je)};var y=J;if(D){let{destroy:je,cleanup:fi}=Td(w,A,Re);c.push(je),Ys(w)&&jt&&o.push(fi)}w.on("error",J),Ys(w)&&jt&&o.push(()=>{w.removeListener("error",J)})}if(v===0)if(typeof w=="function"){if(b=w({signal:i}),!kt(b))throw new Vs("Iterable, AsyncIterable or Stream","source",b)}else kt(w)||Vn(w)||ar(w)?b=w:b=kd.from(w);else if(typeof w=="function"){if(ar(b)){var _;b=to((_=b)===null||_===void 0?void 0:_.readable)}else b=to(b);if(b=w(b,{signal:i}),A){if(!kt(b,!0))throw new Vs("AsyncIterable",`transform[${v-1}]`,b)}else{var m;Xs||(Xs=Ks());let J=new Xs({objectMode:!0}),je=(m=b)===null||m===void 0?void 0:m.then;if(typeof je=="function")h++,je.call(b,Ue=>{d=Ue,Ue!=null&&J.write(Ue),D&&J.end(),Br.nextTick(f)},Ue=>{J.destroy(Ue),Br.nextTick(f,Ue)});else if(kt(b,!0))h++,Kn(b,J,f,{end:D});else if(Js(b)||ar(b)){let Ue=b.readable||b;h++,Kn(Ue,J,f,{end:D})}else throw new Vs("AsyncIterable or Promise","destination",b);b=J;let{destroy:fi,cleanup:Pc}=Td(b,!1,!0);c.push(fi),jt&&o.push(Pc)}}else if(Ad(w)){if(Vn(b)){h+=2;let J=Zm(b,w,f,{end:D});Ys(w)&&jt&&o.push(J)}else if(ar(b)||Js(b)){let J=b.readable||b;h++,Kn(J,w,f,{end:D})}else if(kt(b))h++,Kn(b,w,f,{end:D});else throw new no("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);b=w}else if(Qm(w)){if(Vn(b))h++,ro(to(b),w,f,{end:D});else if(Js(b)||kt(b))h++,ro(b,w,f,{end:D});else if(ar(b))h++,ro(b.readable,w,f,{end:D});else throw new no("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);b=w}else b=kd.from(w)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Br.nextTick(a),b}function Zm(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new zm)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;Km(t)?Br.nextTick(o):t.once("end",o)}else r();return Yn(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),Yn(e,{readable:!1,writable:!0},r)}Rd.exports={pipelineImpl:Id,pipeline:Xm}});var so=T((b0,Md)=>{"use strict";var{pipeline:ey}=Jn(),Xn=ke(),{destroyer:ty}=xt(),{isNodeStream:Zn,isReadable:jd,isWritable:Nd,isWebStream:io,isTransformStream:At,isWritableStream:Ld,isReadableStream:Pd}=ve(),{AbortError:ry,codes:{ERR_INVALID_ARG_VALUE:Od,ERR_MISSING_ARGS:ny}}=G(),iy=Me();Md.exports=function(...e){if(e.length===0)throw new ny("streams");if(e.length===1)return Xn.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=Xn.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=Xn.from(e[f])}for(let f=0;f<e.length;++f)if(!(!Zn(e[f])&&!io(e[f]))){if(f<e.length-1&&!(jd(e[f])||Pd(e[f])||At(e[f])))throw new Od(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(Nd(e[f])||Ld(e[f])||At(e[f])))throw new Od(`streams[${f}]`,r[f],"must be writable")}let n,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!h&&!c&&a.destroy()}let u=e[0],d=ey(e,l),c=!!(Nd(u)||Ld(u)||At(u)),h=!!(jd(d)||Pd(d)||At(d));if(a=new Xn({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(d!=null&&d.readableObjectMode),writable:c,readable:h}),c){if(Zn(u))a._write=function(p,b,_){u.write(p,b)?_():n=_},a._final=function(p){u.end(),i=p},u.on("drain",function(){if(n){let p=n;n=null,p()}});else if(io(u)){let b=(At(u)?u.writable:u).getWriter();a._write=async function(_,m,y){try{await b.ready,b.write(_).catch(()=>{}),y()}catch(v){y(v)}},a._final=async function(_){try{await b.ready,b.close().catch(()=>{}),i=_}catch(m){_(m)}}}let f=At(d)?d.readable:d;iy(f,()=>{if(i){let p=i;i=null,p()}})}if(h){if(Zn(d))d.on("readable",function(){if(s){let f=s;s=null,f()}}),d.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=d.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(io(d)){let p=(At(d)?d.readable:d).getReader();a._read=async function(){for(;;)try{let{value:b,done:_}=await p.read();if(!a.push(b))return;if(_){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new ry),s=null,n=null,i=null,o===null?p(f):(o=p,Zn(d)&&ty(d,f))},a}});var Hd=T((g0,lo)=>{"use strict";var sy=globalThis.AbortController||Qt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:oy,ERR_INVALID_ARG_TYPE:Cr,ERR_MISSING_ARGS:ay,ERR_OUT_OF_RANGE:ly},AbortError:Ae}=G(),{validateAbortSignal:Tt,validateInteger:Bd,validateObject:It}=Yt(),uy=L().Symbol("kWeak"),dy=L().Symbol("kResistStopPropagation"),{finished:cy}=Me(),fy=so(),{addAbortSignalNoValidate:hy}=Tr(),{isWritable:py,isNodeStream:by}=ve(),{deprecate:gy}=V(),{ArrayPrototypePush:my,Boolean:yy,MathFloor:Cd,Number:_y,NumberIsNaN:wy,Promise:Dd,PromiseReject:Fd,PromiseResolve:xy,PromisePrototypeThen:Ud,Symbol:qd}=L(),ei=qd("kEmpty"),$d=qd("kEof");function vy(t,e){if(e!=null&&It(e,"options"),e?.signal!=null&&Tt(e.signal,"options.signal"),by(t)&&!py(t))throw new oy("stream",t,"must be writable");let r=fy(this,t);return e!=null&&e.signal&&hy(e.signal,r),r}function ti(t,e){if(typeof t!="function")throw new Cr("fn",["Function","AsyncFunction"],t);e!=null&&It(e,"options"),e?.signal!=null&&Tt(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=Cd(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=Cd(e.highWaterMark)),Bd(r,"options.concurrency",1),Bd(n,"options.highWaterMark",0),n+=r,async function*(){let s=V().AbortSignalAny([e?.signal].filter(yy)),o=this,a=[],l={signal:s},u,d,c=!1,h=0;function f(){c=!0,p()}function p(){h-=1,b()}function b(){d&&!c&&h<r&&a.length<n&&(d(),d=null)}async function _(){try{for await(let m of o){if(c)return;if(s.aborted)throw new Ae;try{if(m=t(m,l),m===ei)continue;m=xy(m)}catch(y){m=Fd(y)}h+=1,Ud(m,p,f),a.push(m),u&&(u(),u=null),!c&&(a.length>=n||h>=r)&&await new Dd(y=>{d=y})}a.push($d)}catch(m){let y=Fd(m);Ud(y,p,f),a.push(y)}finally{c=!0,u&&(u(),u=null)}}_();try{for(;;){for(;a.length>0;){let m=await a[0];if(m===$d)return;if(s.aborted)throw new Ae;m!==ei&&(yield m),a.shift(),b()}await new Dd(m=>{u=m})}}finally{c=!0,d&&(d(),d=null)}}.call(this)}function Sy(t=void 0){return t!=null&&It(t,"options"),t?.signal!=null&&Tt(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Ae({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function zd(t,e=void 0){for await(let r of ao.call(this,t,e))return!0;return!1}async function Ey(t,e=void 0){if(typeof t!="function")throw new Cr("fn",["Function","AsyncFunction"],t);return!await zd.call(this,async(...r)=>!await t(...r),e)}async function ky(t,e){for await(let r of ao.call(this,t,e))return r}async function Ay(t,e){if(typeof t!="function")throw new Cr("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),ei}for await(let n of ti.call(this,r,e));}function ao(t,e){if(typeof t!="function")throw new Cr("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:ei}return ti.call(this,r,e)}var oo=class extends ay{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function Ty(t,e,r){var n;if(typeof t!="function")throw new Cr("reducer",["Function","AsyncFunction"],t);r!=null&&It(r,"options"),r?.signal!=null&&Tt(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let u=new Ae(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await cy(this.destroy(u)),u}let s=new sy,o=s.signal;if(r!=null&&r.signal){let u={once:!0,[uy]:this,[dy]:!0};r.signal.addEventListener("abort",()=>s.abort(),u)}let a=!1;try{for await(let u of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new Ae;i?e=await t(e,u,{signal:o}):(e=u,i=!0)}if(!a&&!i)throw new oo}finally{s.abort()}return e}async function Iy(t){t!=null&&It(t,"options"),t?.signal!=null&&Tt(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Ae(void 0,{cause:t.signal.reason});my(e,n)}return e}function Ry(t,e){let r=ti.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function Wd(t){if(t=_y(t),wy(t))return 0;if(t<0)throw new ly("number",">= 0",t);return t}function jy(t,e=void 0){return e!=null&&It(e,"options"),e?.signal!=null&&Tt(e.signal,"options.signal"),t=Wd(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Ae;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ae;t--<=0&&(yield s)}}.call(this)}function Ny(t,e=void 0){return e!=null&&It(e,"options"),e?.signal!=null&&Tt(e.signal,"options.signal"),t=Wd(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Ae;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ae;if(t-- >0&&(yield s),t<=0)return}}.call(this)}lo.exports.streamReturningOperators={asIndexedPairs:gy(Sy,"readable.asIndexedPairs will be removed in a future version."),drop:jy,filter:ao,flatMap:Ry,map:ti,take:Ny,compose:vy};lo.exports.promiseReturningOperators={every:Ey,forEach:Ay,reduce:Ty,toArray:Iy,some:zd,find:ky}});var uo=T((m0,Gd)=>{"use strict";var{ArrayPrototypePop:Ly,Promise:Py}=L(),{isIterable:Oy,isNodeStream:My,isWebStream:By}=ve(),{pipelineImpl:Cy}=Jn(),{finished:Dy}=Me();co();function Fy(...t){return new Py((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!My(s)&&!Oy(s)&&!By(s)){let o=Ly(t);n=o.signal,i=o.end}Cy(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}Gd.exports={finished:Dy,pipeline:Fy}});var co=T((y0,tc)=>{"use strict";var{Buffer:Uy}=me(),{ObjectDefineProperty:De,ObjectKeys:Vd,ReflectApply:Yd}=L(),{promisify:{custom:Jd}}=V(),{streamReturningOperators:Qd,promiseReturningOperators:Kd}=Hd(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:Xd}}=G(),$y=so(),{setDefaultHighWaterMark:qy,getDefaultHighWaterMark:zy}=Ir(),{pipeline:Zd}=Jn(),{destroyer:Wy}=xt(),ec=Me(),fo=uo(),Dr=ve(),N=tc.exports=On().Stream;N.isDestroyed=Dr.isDestroyed;N.isDisturbed=Dr.isDisturbed;N.isErrored=Dr.isErrored;N.isReadable=Dr.isReadable;N.isWritable=Dr.isWritable;N.Readable=Nr();for(let t of Vd(Qd)){let r=function(...n){if(new.target)throw Xd();return N.Readable.from(Yd(e,this,n))},e=Qd[t];De(r,"name",{__proto__:null,value:e.name}),De(r,"length",{__proto__:null,value:e.length}),De(N.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let t of Vd(Kd)){let r=function(...n){if(new.target)throw Xd();return Yd(e,this,n)},e=Kd[t];De(r,"name",{__proto__:null,value:e.name}),De(r,"length",{__proto__:null,value:e.length}),De(N.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}N.Writable=Qn();N.Duplex=ke();N.Transform=Gs();N.PassThrough=Ks();N.pipeline=Zd;var{addAbortSignal:Hy}=Tr();N.addAbortSignal=Hy;N.finished=ec;N.destroy=Wy;N.compose=$y;N.setDefaultHighWaterMark=qy;N.getDefaultHighWaterMark=zy;De(N,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return fo}});De(Zd,Jd,{__proto__:null,enumerable:!0,get(){return fo.pipeline}});De(ec,Jd,{__proto__:null,enumerable:!0,get(){return fo.finished}});N.Stream=N;N._isUint8Array=function(e){return e instanceof Uint8Array};N._uint8ArrayToBuffer=function(e){return Uy.from(e.buffer,e.byteOffset,e.byteLength)}});var ri=T((_0,C)=>{"use strict";var U=co(),Gy=uo(),Qy=U.Readable.destroy;C.exports=U.Readable;C.exports._uint8ArrayToBuffer=U._uint8ArrayToBuffer;C.exports._isUint8Array=U._isUint8Array;C.exports.isDisturbed=U.isDisturbed;C.exports.isErrored=U.isErrored;C.exports.isReadable=U.isReadable;C.exports.Readable=U.Readable;C.exports.Writable=U.Writable;C.exports.Duplex=U.Duplex;C.exports.Transform=U.Transform;C.exports.PassThrough=U.PassThrough;C.exports.addAbortSignal=U.addAbortSignal;C.exports.finished=U.finished;C.exports.destroy=U.destroy;C.exports.destroy=Qy;C.exports.pipeline=U.pipeline;C.exports.compose=U.compose;Object.defineProperty(U,"promises",{configurable:!0,enumerable:!0,get(){return Gy}});C.exports.Stream=U.Stream;C.exports.default=C.exports});Symbol.onDestroy||(Symbol.onDestroy=Symbol("onDestroy"));var $e=new Map,Ao={addListener:(t,e)=>{$e.has(t)||$e.set(t,[]),$e.get(t).push(e),Uc(t)},removeListener:(t,e)=>{if(!$e.has(t))return!1;$e.set(t,$e.get(t).filter(r=>r!=e))}};function Uc(t){let e=document.querySelectorAll('[data-simply-activate="'+t+'"]');if(e)for(let r of e)To(r)}function To(t){let e=t?.dataset?.simplyActivate;if(e&&$e.has(e))for(let r of $e.get(e)){let n=r.call(t);typeof n=="function"?t[Symbol.onDestroy]=n:typeof n<"u"&&console.warn("activate listener may only return a de-activate function, instead got",n)}}function $c(t){let e=[];for(let r of t)if(r.type=="childList"){for(let n of r.addedNodes)if(n.querySelectorAll){let i=Array.from(n.querySelectorAll("[data-simply-activate]"));n.matches("[data-simply-activate]")&&i.push(n),e=e.concat(i)}for(let n of r.removedNodes)if(n.querySelectorAll){let i=Array.from(n.querySelectorAll("[data-simply-activate]"));n.matches["[data-simply-activate"]&&i.push(n);for(let s of i)s[Symbol.onDestroy]&&s[Symbol.onDestroy].call(s)}}for(let r of e)To(r)}var qc=new MutationObserver($c);qc.observe(document,{subtree:!0,childList:!0});function rn(t,e){if(e){let r=t;t=e,t.app=r}if(t.app){let r={apply(s,o,a){try{let l=s(...a);return l instanceof Promise?(t.app.hooks.wait(!0),l.finally(()=>{t.app.hooks.wait(!1,s)})):l}catch{}}},n={apply(s,o,a){try{let l=s(...a);return l instanceof Promise?t.app.hooks.wait?(t.app.hooks.wait(!0,s),l.catch(u=>t.app.hooks.error(u,s)).finally(()=>{t.app.hooks.wait(!1,s)})):l.catch(u=>t.app.hooks.error(u,s)):l}catch(l){return t.app.hooks.error(l,s)}}},i={get(s,o){if(s[o])return t.app.hooks?.error?new Proxy(s[o].bind(t.app),n):t.app.hooks?.wait?new Proxy(s[o].bind(t.app),r):s[o].bind(t.app)}};return new Proxy(t.actions,i)}else return t}function nn(t,e){if(e){let r=t;t=e,t.app=t}return new pi(t)}var pi=class{constructor(e={}){this.baseURL=e.baseURL||"/",this.app=e.app||{},this.addMissingSlash=!!e.addMissingSlash,this.matchExact=!!e.matchExact,this.clear(),e.routes&&this.load(e.routes)}load(e){zc(e,this.routeInfo,this.matchExact)}clear(){this.routeInfo=[],this.listeners={match:{},call:{},goto:{},finish:{}}}match(e,r){let n={path:e,options:r};n=this.runListeners("match",n),e=n.path?n.path:e;let i;if(!e)return this.match(document.location.pathname+document.location.hash)?!0:this.match(document.location.pathname);e=Nt(e);for(let s of this.routeInfo)if(i=s.match.exec(e),this.addMissingSlash&&!i?.length&&e&&e[e.length-1]!="/"&&(i=s.match.exec(e+"/"),i&&(e+="/",history.replaceState({},"",Io(e,this.baseURL)))),i&&i.length){let o={};s.params.forEach((l,u)=>{l=="*"&&(l="remainder"),o[l]=i[u+1]}),Object.assign(o,r),n.route=s,n.params=o,n=this.runListeners("call",n),o=n.params?n.params:o;let a=new URLSearchParams(document.location.search);return n.result=s.action.call(this.app,o,a),this.runListeners("finish",n),n.result}return!1}runListeners(e,r){if(!(!this.listeners[e]||!Object.keys(this.listeners[e])))return Object.keys(this.listeners[e]).forEach(n=>{var i=Ro(n);if(i.exec(r.path)){var s;for(let o of this.listeners[e][n])s=o.call(this.app,r),s&&(r=s)}}),r}handleEvents(){globalThis.addEventListener("popstate",()=>{this.match(Nt(document.location.pathname+document.location.hash,this.baseURL))===!1&&this.match(Nt(document.location.pathname,this.baseURL))}),this.app.container.addEventListener("click",e=>{if(!e.ctrlKey&&e.which==1){for(var r=e.target;r&&r.tagName!="A";)r=r.parentElement;if(r&&r.pathname&&r.hostname==globalThis.location.hostname&&!r.link&&!r.dataset.simplyCommand){let n=[r.hash,r.pathname+r.hash,r.pathname],i;do i=Nt(n.shift(),this.baseURL);while(n.length&&!this.has(i));if(this.has(i)){let s=this.runListeners("goto",{path:i});if(s.path&&this.goto(s.path))return e.preventDefault(),!1}}}})}goto(e){return history.pushState({},"",Io(e,this.baseURL)),this.match(e)}has(e){e=Nt(e,this.baseURL);for(let n of this.routeInfo){var r=n.match.exec(e);if(r&&r.length)return!0}return!1}addListener(e,r,n){if(["goto","match","call","finish"].indexOf(e)==-1)throw new Error("Unknown action "+e);this.listeners[e][r]||(this.listeners[e][r]=[]),this.listeners[e][r].push(n)}removeListener(e,r,n){if(["match","call","finish"].indexOf(e)==-1)throw new Error("Unknown action "+e);this.listeners[e][r]&&(this.listeners[e][r]=this.listeners[e][r].filter(i=>i!=n))}init(e){e.baseURL&&(this.baseURL=e.baseURL)}};function Nt(t,e="/"){return(t.substring(0,e.length)==e||e[e.length-1]=="/"&&t.length==e.length-1&&t==e.substring(0,t.length))&&(t=t.substring(e.length)),t[0]!="/"&&t[0]!="#"&&(t="/"+t),t}function Io(t,e){return t=Nt(t,e),e[e.length-1]==="/"&&t[0]==="/"&&(t=t.substring(1)),t[0]=="#"?t:e+t}function Ro(t,e=!1){return e?new RegExp("^"+t.replace(/:\w+/g,"([^/]+)").replace(/:\*/,"(.*)")+"(\\?|$)"):new RegExp("^"+t.replace(/:\w+/g,"([^/]+)").replace(/:\*/,"(.*)"))}function zc(t,e,r=!1){let n=Object.keys(t),i=/:(\w+|\*)/g;for(let s of n){let o=[],a=[];do o=i.exec(s),o&&a.push(o[1]);while(o);e.push({match:Ro(s,r),params:a,action:t[s]})}return e}var bi=class{constructor(e={}){e.app||(e.app={}),e.app.container||(e.app.container=document.body),this.app=e.app,this.$handlers=e.handlers||Hc,e.commands&&Object.assign(this,e.commands);let r=n=>{let i=Wc(n,this.$handlers);if(!i)return;if(!this[i.name]){console.error("simply.command: undefined command "+i.name,i.source);return}if(this[i.name].call(e.app,i.source,i.value)!==!0)return n.preventDefault(),n.stopPropagation(),!1};e.app.container.addEventListener("click",r),e.app.container.addEventListener("submit",r),e.app.container.addEventListener("change",r),e.app.container.addEventListener("input",r)}call(e,r,n){if(!this[e]){console.error("simply.command: undefined command "+e);return}return this[e].call(this.app,r,n)}action(e){console.warn("deprecated call to `this.commands.action`");let r=Array.from(arguments).slice();return r.shift(),this.app.actions[e](...r)}appendHandler(e){this.$handlers.push(e)}prependHandler(e){this.$handlers.unshift(e)}};function sn(t={},e){if(e){let r=t;t=e,t.app=t}return new bi(t)}function Wc(t,e){var r=t.target.closest("[data-simply-command]");if(r){for(let n of e)if(r.matches(n.match))return n.check(r,t)?{name:r.dataset.simplyCommand,source:r,value:n.get(r)}:null}return null}var Hc=[{match:"input,select,textarea",get:function(t){if(t.tagName==="SELECT"&&t.multiple){let e=[];for(let r of t.options)r.selected&&e.push(r.value);return e}return t.dataset.simplyValue||t.value},check:function(t,e){return e.type=="change"||t.dataset.simplyImmediate&&e.type=="input"}},{match:"a,button",get:function(t){return t.dataset.simplyValue||t.href||t.value},check:function(t,e){return e.type=="click"&&e.ctrlKey==!1&&e.button==0}},{match:"form",get:function(t){let e={};for(let r of Array.from(t.elements)){if(r.tagName=="INPUT"&&(r.type=="checkbox"||r.type=="radio")&&!r.checked)return;e[r.name]&&!Array.isArray(e[r.name])&&(e[r.name]=[e[r.name]]),Array.isArray(e[r.name])?e[r.name].push(r.value):e[r.name]=r.value}return e},check:function(t,e){return e.type=="submit"}},{match:"*",get:function(t){return t.dataset.simplyValue},check:function(t,e){return e.type=="click"&&e.ctrlKey==!1&&e.button==0}}];var fr=Object.freeze({Compose:229,Control:17,Meta:224,Alt:18,Shift:16}),gi=class{constructor(e={}){e.app||(e.app={}),e.app.container||(e.app.container=document.body),Object.assign(this,e.keys);let r=n=>{if(n.isComposing||n.keyCode===fr.Compose||n.defaultPrevented||!n.target)return;let i="default";n.target.closest("[data-simply-keyboard]")&&(i=n.target.closest("[data-simply-keyboard]").dataset.simplyKeyboard);let s=[];n.ctrlKey&&n.keyCode!=fr.Control&&s.push("Control"),n.metaKey&&n.keyCode!=fr.Meta&&s.push("Meta"),n.altKey&&n.keyCode!=fr.Alt&&s.push("Alt"),n.shiftKey&&n.keyCode!=fr.Shift&&s.push("Shift"),s.push(n.key.toLowerCase());let o=[],a=event.target.closest("[data-simply-keyboard]");for(;a;)o.push(a.dataset.simplyKeyboard),a=a.parentNode.closest("[data-simply-keyboard]");o.push("");let l,u,d=["+","-"];for(let c in o){l=o[c],l==""?u="default":(u=l,l+=".");for(let h of d){let f=s.join(h);if(this[u]&&typeof this[u][f]=="function"&&!this[u][f].call(e.app,n)){n.preventDefault();return}if(typeof this[u+f]=="function"&&!this[u+f].call(e.app,n)){n.preventDefault();return}if(this[i]&&this[i][f]){let p=e.app.container.querySelectorAll('[data-simply-accesskey="'+l+f+'"]');p.length&&(p.forEach(b=>b.click()),n.preventDefault())}}}};e.app.container.addEventListener("keydown",r)}};function on(t={},e){if(e){let r=t;t=e,t.app=t}return new gi(t)}function an(t,e){if(e){let r=t;t=e,t.app=t}if(t.app){t.app.view=t.view||{};let r=()=>{let n=t.app.view,i=globalThis.editor.data.getDataPath(t.app.container||document.body);t.app.view=globalThis.editor.currentData[i],Object.assign(t.app.view,n)};return globalThis.editor&&globalThis.editor.currentData?r():document.addEventListener("simply-content-loaded",r),t.app.view}else return t.view}function mi(t,...e){return e.map((n,i)=>`${t[i]}${n}`).join("")+t[t.length-1]}function jo(t,...e){return mi(t,...e)}var yi=class{constructor(e={}){if(this.container=e.container||document.body,e.components){let r={};Lo(r,e.components),_i(r,e),e=r}for(let r in e)switch(r){case"html":for(let s in e.html){let o=document.createElement("div");o.innerHTML=e.html[s];let a=this.container.querySelector("template#"+s);a?a.content.replaceChildren(...o.children):(a=document.createElement("template"),a.id=s,a.content.append(...o.children),this.container.appendChild(a))}break;case"css":for(let s in e.css){let o=this.container.querySelector("style#"+s);o||(o=document.createElement("style"),o.id=s,this.container.appendChild(o)),o.innerHTML=e.css[s]}break;case"commands":this.commands=sn({app:this,container:this.container,commands:e.commands});break;case"keys":case"keyboard":this.keys=on({app:this,keys:e.keys});break;case"root":case"baseURL":this.baseURL=e[r];break;case"routes":this.routes=nn({app:this,routes:e.routes});break;case"actions":this.actions=rn({app:this,actions:e.actions}),this.action=function(s){console.warn("deprecated call to `this.action`");let o=Array.from(arguments).slice();return o.shift(),this.actions[s](...o)};break;case"view":this.view=an({app:this,view:e.view});break;case"hooks":let n={get:(s,o)=>{if(s[o])return typeof s[o]=="function"?new Proxy(s[o],i):s[o]&&typeof s[o]=="object"?new Proxy(s[o],n):s[o]}},i={apply:(s,o,a)=>s.apply(this,a)};this[r]=new Proxy(e[r],n);break;default:console.log('simply.app: unknown initialization option "'+r+'", added as-is'),this[r]=e[r];break}}get app(){return this}async start(){if(this.components)for(let e in this.components)this.components[e].hooks?.start&&await this.components[e].hooks.start.call(this,this.components[e]);this.hooks?.start&&await this.hooks.start(),this.routes&&(this.baseURL&&this.routes.init({baseURL:this.baseURL}),this.routes.handleEvents(),globalThis.setTimeout(()=>{this.routes.has(globalThis.location?.hash)?this.routes.match(globalThis.location.hash):this.routes.match(globalThis.location?.pathname+globalThis.location?.hash)}))}};function No(t={}){return new yi(t)}globalThis.html||(globalThis.html=mi);globalThis.css||(globalThis.css=jo);function _i(t,e){for(let r in e)switch(typeof e[r]){case"object":if(!e[r])continue;t[r]?_i(t[r],e[r]):t[r]=e[r];break;default:t[r]=e[r]}}function Lo(t,e){for(let r in e){let n=e[r];n.components&&Lo(t,n.components),t.components||(t.components={}),t.components[r]=n;for(let i in n)switch(i){case"hooks":case"components":break;default:t[i]||(t[i]=Object.create(null)),_i(t[i],n[i]);break}}}function Gc(t,e){let r=0;return()=>{let n=arguments;r||(r=globalThis.setTimeout(()=>{t.apply(this,n),r=0},e))}}var Qc=globalThis.requestIdleCallback?t=>{globalThis.requestIdleCallback(t,{timeout:500})}:globalThis.requestAnimationFrame;function Po(t,e){let r=new URL(t,e);return Lt.cacheBuster&&r.searchParams.set("cb",Lt.cacheBuster),r.href}var Oo,Kc={},wi=globalThis.document.querySelector("head"),Mo=globalThis.document.currentScript,Bo,Co;Mo?Co=Mo.src:(Bo=(()=>{var t=document.getElementsByTagName("script"),e=t.length-1,r=t[e];return()=>r?.src})(),Co=Bo());var Vc=async()=>new Promise(function(t){var e=globalThis.document.createElement("script");e.src="https://cdn.jsdelivr.net/gh/simplyedit/simplyview/dist/simply.include.next.js",e.async=!1,globalThis.document.addEventListener("simply-include-next",()=>{wi.removeChild(e),t()},{once:!0,passive:!0}),wi.appendChild(e)}),ln=[],Lt={cacheBuster:null,scripts:(t,e)=>{let r=t.slice(),n=()=>{let i=r.shift();if(!i)return;let s=[].map.call(i.attributes,a=>a.name),o=globalThis.document.createElement("script");for(let a of s)o.setAttribute(a,i.getAttribute(a));if(o.removeAttribute("data-simply-location"),!o.src)o.innerHTML=i.innerHTML,Vc().then(()=>{let a=ln[i.dataset.simplyLocation];a.parentNode.insertBefore(o,a),a.parentNode.removeChild(a),n()});else{o.src=Po(o.src,e),!o.hasAttribute("async")&&!o.hasAttribute("defer")&&(o.async=!1);let a=ln[i.dataset.simplyLocation];a.parentNode.insertBefore(o,a),a.parentNode.removeChild(a),Kc[o.src]=!0,n()}};r.length&&n()},html:(t,e)=>{let r=globalThis.document.createRange().createContextualFragment(t),n=r.querySelectorAll('link[rel="stylesheet"],style');for(let o of n)o.href&&(o.href=Po(o.href,e.href)),wi.appendChild(o);let i=globalThis.document.createDocumentFragment(),s=r.querySelectorAll("script");if(s.length){for(let o of s){let a=globalThis.document.createComment(o.src||"inline script");o.parentNode.insertBefore(a,o),o.dataset.simplyLocation=ln.length,ln.push(a),i.appendChild(o)}globalThis.setTimeout(function(){Lt.scripts(Array.from(i.children),e?e.href:globalThis.location.href)},10)}e.parentNode.insertBefore(r,e||null)}},Do={},Yc=async t=>{let e=[].reduce.call(t,(r,n)=>(n.rel=="simply-include-once"&&Do[n.href]?n.parentNode.removeChild(n):(Do[n.href]=!0,n.rel="simply-include-loading",r.push(n)),r),[]);for(let r of e){if(!r.href)return;let n=await fetch(r.href);if(!n.ok){console.log("simply-include: failed to load "+r.href);continue}console.log("simply-include: loaded "+r.href);let i=await n.text();Lt.html(i,r),r.parentNode.removeChild(r)}},Fo=Gc(()=>{Qc(()=>{var t=globalThis.document.querySelectorAll('link[rel="simply-include"],link[rel="simply-include-once"]');t.length&&Yc(t)})}),Jc=()=>{Oo=new MutationObserver(Fo),Oo.observe(globalThis.document,{subtree:!0,childList:!0})};Jc();Fo();var hr={get(t,e){return typeof e!="string"?e:(e&&e.split(".").reduce(function(r,n){return r&&r[n]?r[n]:null},t),t)},set:function(t,e,r){let n=hr.get(t,hr.parent(e));n[hr.pop(e)]=r},pop:function(t){return t.split(".").pop()},push:function(t,e){return(t?t+".":"")+e},parent:function(t,e){let r=e.split(".");return r.pop(),r.join(".")},parents:function(t,e){let r=[];for(;e;)e=hr.parent(e),r.unshift(e)}},Uo=hr;var xi=class extends HTMLElement{constructor(){super();let e=this.getAttribute("rel"),r=document.getElementById(e);if(r){let n=r.content.cloneNode(!0);for(let i of n.childNodes){let s=i.cloneNode(!0);s.nodeType==document.ELEMENT_NODE&&s.querySelectorAll("template").forEach(function(o){o.setAttribute("simply-render","")}),this.parentNode.insertBefore(s,this)}this.parentNode.removeChild(this)}}};customElements.get("simply-render")||customElements.define("simply-render",xi);var Xc={activate:Ao,action:rn,app:No,command:sn,include:Lt,key:on,path:Uo,route:nn,view:an};globalThis.simply=Xc;var Ai={};cr(Ai,{batch:()=>ki,clockEffect:()=>Ho,destroy:()=>hn,effect:()=>Wo,signal:()=>We,throttledEffect:()=>ae,trace:()=>ef,untracked:()=>nf});var vi=Symbol("iterate");Symbol.xRay||(Symbol.xRay=Symbol("xRay"));Symbol.Signal||(Symbol.Signal=Symbol("Signal"));var Zc={get:(t,e,r)=>{if(e===Symbol.xRay)return t;if(e===Symbol.Signal)return!0;let n=t?.[e];return Si(r,e),typeof n=="function"?Array.isArray(t)?(...i)=>{let s=t.length,o=n.apply(r,i);return s!=t.length&&st(r,qe("length",{was:s,now:t.length})),o}:t instanceof Set||t instanceof Map?(...i)=>{let s=t.size,o=n.apply(t,i);return s!=t.size&&st(r,qe("size",{was:s,now:t.size})),["set","add","clear","delete"].includes(e)&&st(r,qe({entries:{},forEach:{},has:{},keys:{},values:{},[Symbol.iterator]:{}})),o}:t instanceof HTMLElement||t instanceof Number||t instanceof String||t instanceof Boolean?n.bind(t):n.bind(r):n&&typeof n=="object"?We(n):n},set:(t,e,r,n)=>{r=r?.[Symbol.xRay]||r;let i=t[e];return i!==r&&(t[e]=r,st(n,qe(e,{was:i,now:r}))),typeof i>"u"&&st(n,qe(vi,{})),!0},has:(t,e)=>{let r=z.get(t);return r&&Si(r,e),Object.hasOwn(t,e)},deleteProperty:(t,e)=>{if(typeof t[e]<"u"){let r=t[e];delete t[e];let n=z.get(t);st(n,qe(e,{delete:!0,was:r}))}return!0},defineProperty:(t,e,r)=>{if(typeof t[e]>"u"){let n=z.get(t);st(n,qe(vi,{}))}return Object.defineProperty(t,e,r)},ownKeys:t=>{let e=z.get(t);return Si(e,vi),Reflect.ownKeys(t)}},z=new WeakMap;function We(t){if(t[Symbol.Signal]){let e=t[Symbol.xRay];z.has(e)||z.set(e,t),t=e}else z.has(t)||z.set(t,new Proxy(t,Zc));return z.get(t)}function ef(t,e){return zo(t,e).map(n=>({effect:n.effectType,fn:n.effectFunction,signal:z.get(n.effectFunction)}))}var dn=new Set,Pt=0;function st(t,e={}){let r=[];if(e.forEach((n,i)=>{let s=zo(t,i);if(s?.length){for(let o of s)tf(o,qe(i,n));r=r.concat(s)}}),r=new Set(r.filter(Boolean)),r)if(Pt)dn=dn.union(r);else{let n=$[$.length-1];for(let i of Array.from(r))i!=n&&i?.needsUpdate&&i(),qo(i)}}function qe(t,e){let r=new Map;if(typeof t=="object")for(let n in t)r.set(n,t[n]);else r.set(t,e);return r}function tf(t,e){t.context?e.forEach((r,n)=>{t.context.set(n,r)}):t.context=e,t.needsUpdate=!0}function qo(t){delete t.context,delete t.needsUpdate}function Si(t,e){let r=$[$.length-1];r&&rf(t,e,r)}var pr=new WeakMap,un=new WeakMap;function zo(t,e){let r=pr.get(t);return r?Array.from(r.get(e)||[]):[]}function rf(t,e,r){pr.has(t)||pr.set(t,new Map);let n=pr.get(t);n.has(e)||n.set(e,new Set),n.get(e).add(r),un.has(r)||un.set(r,new Map);let i=un.get(r);i.has(e)||i.set(e,new Set),i.get(e).add(t)}function fn(t){let e=un.get(t);e&&e.forEach(r=>{r.forEach(n=>{let i=pr.get(n);i.has(r)&&i.get(r).delete(t)})})}var $=[],cn=[],Ei=new WeakMap,ze=[];function Wo(t){if(cn.findIndex(n=>t==n)!==-1)throw new Error("Recursive update() call",{cause:t});cn.push(t);let e=z.get(t);e||(e=We({current:null}),z.set(t,e));let r=function n(){if(ze.findIndex(s=>s==e)!==-1)throw new Error("Cyclical dependency in update() call",{cause:t});fn(n),n.effectFunction=t,n.effectType=Wo,$.push(n),ze.push(e);let i;try{i=t(n,$,ze)}finally{$.pop(),ze.pop(),i instanceof Promise?i.then(s=>{e.current=s}):e.current=i}};return r.fn=t,Ei.set(e,r),r(),e}function hn(t){let e=Ei.get(t)?.deref();if(!e)return;fn(e);let r=e.fn;z.remove(r),Ei.delete(t)}function ki(t){Pt++;let e;try{e=t()}finally{e instanceof Promise?e.then(()=>{Pt--,Pt||$o()}):(Pt--,Pt||$o())}return e}function $o(){let t=Array.from(dn);dn=new Set;let e=$[$.length-1];for(let r of t)r!=e&&r?.needsUpdate&&r(),qo(r)}function ae(t,e){if(cn.findIndex(o=>t==o)!==-1)throw new Error("Recursive update() call",{cause:t});cn.push(t);let r=z.get(t);r||(r=We({current:null}),z.set(t,r));let n=!1,i=!0;return function o(){if(ze.findIndex(l=>l==r)!==-1)throw new Error("Cyclical dependency in update() call",{cause:t});if(n&&n>Date.now()){i=!0;return}fn(o),o.effectFunction=t,o.effectType=ae,$.push(o),ze.push(r);let a;try{a=t(o,$,ze)}finally{i=!1,$.pop(),ze.pop(),a instanceof Promise?a.then(l=>{r.current=l}):r.current=a}n=Date.now()+e,globalThis.setTimeout(()=>{i&&o()},e)}(),r}function Ho(t,e){let r=z.get(t);r||(r=We({current:null}),z.set(t,r));let n=-1,i=!0;return function o(){if(n<e.time)if(i){fn(o),o.effectFunction=t,o.effectType=Ho,$.push(o),n=e.time;let a;try{a=t(o,$)}finally{$.pop(),a instanceof Promise?a.then(l=>{r.current=l}):r.current=a,i=!1}}else n=e.time;else i=!0}(),r}function nf(t){let e=$.slice();$=[];try{return t()}finally{$=e}}function Go(t,e){let r=t.value.innerHTML;typeof t.value=="string"&&(r=t.value,t.value={innerHTML:r}),r&&(r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),t.value.innerHTML=r),e(t)}function Qo(t,e){typeof t.value=="string"?t.value={}:delete t.value.innerHTML,e(t)}function Vo(t){if(t.templates?.length)af.call(this,t);else if(Object.hasOwnProperty.call(this.options.renderers,t.element.tagName)){let e=this.options.renderers[t.element.tagName];e&&e.call(this,t)}else this.options.renderers["*"]&&this.options.renderers["*"].call(this,t);return t}function Yo(t){return Array.isArray(t.value)?t.templates?.length?sf.call(this,t):console.error("No templates found in",t.element):console.error("Value is not an array.",t.element,t.path,t.value),t}function Jo(t){return typeof t.value!="object"||!t.value?console.error("Value is not an object.",t.element,t.path,t.value):t.templates?.length?of.call(this,t):console.error("No templates found in",t.element),t}function sf(t){let e=this.options.attribute,r=t.element.querySelectorAll(":scope > ["+e+"-key]"),n=0,i=0;t.list=t.value;for(let o of r){let a=parseInt(o.getAttribute(e+"-key"));if(a>n)t.index=n,t.element.insertBefore(this.applyTemplate(t),o);else if(a<n)o.remove();else{let l=Array.from(o.querySelectorAll(`[${e}]`));o.matches(`[${e}]`)&&l.unshift(o);let u=l.find(d=>{let c=d.getAttribute(e);return c.substr(0,5)!==":root"&&c.substr(0,t.path.length)!==t.path});if(!u&&o[Symbol.bindTemplate]){let d=this.findTemplate(t.templates,t.list[n]);d!=o[Symbol.bindTemplate]&&(u=!0,d||i++)}u&&(t.index=n,t.element.replaceChild(this.applyTemplate(t),o))}if(n++,n>=t.value.length)break}r=t.element.querySelectorAll(":scope > ["+e+"-key]");let s=r.length+i;if(s>t.value.length)for(;s>t.value.length;)t.element.querySelectorAll(":scope > :not(template)")?.[s-1]?.remove(),s--;else if(s<t.value.length)for(;s<t.value.length;)t.index=s,t.element.appendChild(this.applyTemplate(t)),s++}function of(t){let e=this.options.attribute;t.list=t.value;let r=Array.from(t.element.querySelectorAll(":scope > ["+e+"-key]"));for(let n in t.list){t.index=n;let i=r.shift();if(!i){let o=this.applyTemplate(t);t.element.appendChild(o);continue}if(i.getAttribute[e+"-key"]!=n){r.unshift(i);let o=t.element.querySelector(":scope > ["+e+'-key="'+n+'"]');if(o)t.element.insertBefore(o,i),i=o,r=r.filter(a=>a!=o);else{let a=this.applyTemplate(t);t.element.insertBefore(a,i);continue}}if(this.findTemplate(t.templates,t.list[t.index])!=i[Symbol.bindTemplate]){let o=this.applyTemplate(t);t.element.replaceChild(o,i)}}for(;r.length;)r.shift().remove()}function af(t){let e=t.element.querySelector(":scope > :not(template)"),r=this.findTemplate(t.templates,t.value);if(t.parent=lf(t.element),e)if(r){if(e?.[Symbol.bindTemplate]!=r){let n=this.applyTemplate(t);t.element.replaceChild(n,e)}}else t.element.removeChild(e);else if(r){let n=this.applyTemplate(t);t.element.appendChild(n)}}function lf(t,e){let r=t.parentElement?.closest(`[${e}-list],[${e}-map]`);return r?r.hasAttribute(`${e}-list`)?r.getAttribute(`${e}-list`)+".":r.getAttribute(`${e}-map`)+".":""}function Xo(t){let e=t.element,r=t.value;br(t),typeof r>"u"&&(r=""),e.type=="checkbox"||e.type=="radio"?pn(e.value,r)?e.checked=!0:e.checked=!1:pn(e.value,r)||(e.value=""+r)}function Zo(t){br(t),ot(t.element,t.value,"value")}function Ti(t){let e=t.element,r=t.value;if(r===null&&(r=""),typeof r!="object")if(e.multiple){if(Array.isArray(r))for(let n of e.options)r.indexOf(n.value)===!1?n.selected=!1:n.selected=!0}else{let n=e.options.find(i=>pn(i.value,r));n&&(n.selected=!0,n.setAttribute("selected",!0))}else r.options&&uf(e,r.options),r.selected&&Ti(Object.asssign({},t,{value:r.selected})),ot(e,r,"name","id","selectedIndex","className")}function Ko(t,e){e&&(typeof e!="object"?t.options.add(new Option(""+e)):e.text?t.options.add(new Option(e.text,e.value,e.defaultSelected,e.selected)):typeof e.value<"u"&&t.options.add(new Option(""+e.value,e.value,e.defaultSelected,e.selected)))}function uf(t,e){if(t.innerHTML="",Array.isArray(e))for(let r of e)Ko(t,r);else if(e&&typeof e=="object")for(let r in e)Ko(t,{text:e[r],value:r})}function ea(t){br(t),ot(t.element,t.value,"target","href","name","newwindow","nofollow")}function ta(t){ot(t.element,t.value,"title","alt","src","id")}function ra(t){ot(t.element,t.value,"title","src","id")}function na(t){ot(t.element,t.value,"content","id")}function br(t){let e=t.element,r=t.value;(typeof r>"u"||r==null)&&(r="");let n=""+r;if(typeof r!="object"||n.substring(0,8)!="[object "){e.innerHTML=n;return}ot(e,r,"innerHTML","title","id","className")}function ot(t,e,...r){if(!(!e||typeof e!="object"))for(let n of r)typeof e[n]>"u"||pn(t[n],e[n])||(e[n]===null?t[n]="":t[n]=""+e[n])}function pn(t,e){return t==":empty"&&!e||e==":empty"&&!t||""+t==""+e}Symbol.bindTemplate||(Symbol.bindTemplate=Symbol("bindTemplate"));var Ri=class{constructor(e){this.bindings=new Map;let r={escape_html:Go,fixed_content:Qo},n={container:document.body,attribute:"data-flow",transformers:r,render:{field:[Vo],list:[Yo],map:[Jo]},renderers:{INPUT:Xo,BUTTON:Zo,SELECT:Ti,A:ea,IMG:ta,IFRAME:ra,META:na,TEMPLATE:null,"*":br}};if(!e?.root)throw new Error("bind needs at least options.root set");this.options=Object.assign({},n,e),e.transformers&&(this.options.transformers=Object.assign({},r,e?.transformers));let i=this.options.attribute,s=[i+"-field",i+"-list",i+"-map"],o=i+"-transform",a=f=>{let p=s.find(b=>f.hasAttribute(b));return p||console.error("No matching attribute found",f,s),p},l=f=>{this.bindings.set(f,ae(()=>{if(!f.isConnected){ff(f,this.getBindingPath(f)),hn(this.bindings.get(f));return}let p={templates:f.querySelectorAll(":scope > template"),attribute:a(f)};p.path=this.getBindingPath(f),p.value=Ii(this.options.root,p.path),p.element=f,cf(f,p),u(p)},50))},u=f=>{let p;switch(f.attribute){case this.options.attribute+"-field":p=Array.from(this.options.render.field);break;case this.options.attribute+"-list":p=Array.from(this.options.render.list);break;case this.options.attribute+"-map":p=Array.from(this.options.render.map);break;default:throw new Error("no valid context attribute specified",f)}f.element.hasAttribute(o)&&f.element.getAttribute(o).split(" ").filter(Boolean).forEach(_=>{this.options.transformers[_]?p.push(this.options.transformers[_]):console.warn("No transformer with name "+_+" configured",{cause:f.element})});let b;for(let _ of p)b=((m,y)=>v=>y.call(this,v,m))(b,_);b(f)},d=f=>{for(let p of f)this.bindings.get(p)||l(p)},c=f=>{let p=`[${i}-field],[${i}-list],[${i}-map]`;for(let b of f)if(b.type=="childList"&&b.addedNodes){for(let _ of b.addedNodes)if(_ instanceof HTMLElement){let m=Array.from(_.querySelectorAll(p));_.matches(p)&&m.unshift(_),m.length&&d(m)}}};this.observer=new MutationObserver(f=>{c(f)}),this.observer.observe(this.options.container,{subtree:!0,childList:!0});let h=this.options.container.querySelectorAll(":is(["+this.options.attribute+"-field],["+this.options.attribute+"-list],["+this.options.attribute+"-map]):not(template)");h.length&&d(h)}applyTemplate(e){let r=e.path,n=e.parent,i=e.templates,s=e.list,o=e.index,a=s?s[o]:e.value,l=this.findTemplate(i,a);if(!l){let f=new DocumentFragment;return f.innerHTML="<!-- no matching template -->",f}let u=l.content.cloneNode(!0);if(!u.children?.length)return u;if(u.children.length>1)throw new Error("template must contain a single root node",{cause:l});let d=this.options.attribute,c=[d+"-field",d+"-list",d+"-map"],h=u.querySelectorAll(`[${d}-field],[${d}-list],[${d}-map]`);for(let f of h){if(f.tagName=="TEMPLATE")continue;let p=c.find(_=>f.hasAttribute(_)),b=f.getAttribute(p);b=this.applyLinks(l.links,b),b.substring(0,6)==":root."?f.setAttribute(p,b.substring(6)):b==":value"&&o!=null?f.setAttribute(p,r+"."+o):o!=null?f.setAttribute(p,r+"."+o+"."+b):f.setAttribute(p,n+b)}return typeof o<"u"&&u.children[0].setAttribute(d+"-key",o),u.children[0][Symbol.bindTemplate]=l,u}parseLinks(e){let r={};e=e.split(";").map(n=>n.trim());for(let n of e)n=n.split("="),r[n[0].trim()]=n[1].trim();return r}applyLinks(e,r){for(let n in e){if(r.startsWith(n+"."))return e[n]+r.substr(n.length);if(r==n)return e[n]}return r}getBindingPath(e){let r=[this.options.attribute+"-field",this.options.attribute+"-list",this.options.attribute+"-map"];for(let n of r)if(e.hasAttribute(n))return e.getAttribute(n)}findTemplate(e,r){let n=a=>{let l=this.getBindingPath(a),u;l?l.substr(0,6)==":root."?u=Ii(this.options.root,l):u=Ii(r,l):u=r;let d=""+u,c=a.getAttribute(this.options.attribute+"-match");if(c){if(c===":empty"&&!u)return a;if(c===":notempty"&&u||d.match(c))return a}if(!c&&u!==null&&u!==void 0)return a},i=Array.from(e).find(n),s=null;i?.hasAttribute(this.options.attribute+"-link")&&(s=this.parseLinks(i.getAttribute(this.options.attribute+"-link")));let o=i?.getAttribute("rel");if(o){let a=document.querySelector("template#"+o);if(!a)throw new Error("Could not find template with id "+o);i=a}return i&&(i.links=s),i}destroy(){this.bindings.forEach(e=>{hn(e)}),this.bindings=new Map,this.observer.disconnect()}};function ia(t){return new Ri(t)}var gr=new Map;function cf(t,e){gr.has(e.path)?gr.get(e.path).push(e):gr.set(e.path,[e])}function ff(t,e){let r=gr.get(e);r&&(r=r.filter(n=>n.element==t),gr.set(e,r))}function Ii(t,e){let r=e.split("."),n=t,i;for(i=r.shift();i&&n;)i=decodeURIComponent(i),n=n[i],i=r.shift();return n}var Ni={};cr(Ni,{columns:()=>mf,filter:()=>gf,model:()=>hf,paging:()=>bf,scroll:()=>yf,sort:()=>pf});var ji=class{constructor(e){this.state=We(e),this.state.options||(this.state.options={}),this.effects=[{current:e.data}],this.view=We(e.data)}addEffect(e){let r=this.effects[this.effects.length-1];this.view=e.call(this,r),this.effects.push(this.view)}};function hf(t){return new ji(t)}function pf(t={}){return function(e){return this.state.options.sort=Object.assign({direction:"asc",sortBy:null,sortFn:((r,n)=>{let i=this.state.options.sort,s=i.sortBy;if(!i.sortBy)return 0;let o=i.direction=="asc"?1:-1,a=i.direction=="asc"?-1:1;return typeof r?.[s]>"u"?typeof n?.[s]>"u"?0:o:typeof n?.[s]>"u"||r[s]<n[s]?a:r[s]>n[s]?o:0})},t),ae(()=>{let r=this.state.options.sort;return r?.sortBy&&r?.direction?e.current.toSorted(r?.sortFn):e.current},50)}}function bf(t={}){return function(e){return this.state.options.paging=Object.assign({page:1,pageSize:20,max:1},t),ae(()=>ki(()=>{let r=this.state.options.paging;r.pageSize||(r.pageSize=20),r.max=Math.ceil(this.state.data.length/r.pageSize),r.page=Math.max(1,Math.min(r.max,r.page));let n=(r.page-1)*r.pageSize,i=n+r.pageSize;return e.current.slice(n,i)}),50)}}function gf(t){if(!t?.name||typeof t.name!="string")throw new Error("filter requires options.name to be a string");if(!t.matches||typeof t.matches!="function")throw new Error("filter requires options.matches to be a function");return function(e){if(this.state.options[t.name])throw new Error("a filter with this name already exists on this model");return this.state.options[t.name]=t,ae(()=>this.state.options[t.name].enabled?e.current.filter(this.state.options[t.name].matches.bind(this)):e.current,50)}}function mf(t={}){if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error("columns requires options to be an object with at least one property");return function(e){return this.state.options.columns=t,ae(()=>e.current.map(r=>{let n={};for(let i of Object.keys(this.state.options.columns))this.state.options.columns[i]?.hidden||(n[i]=r[i]);return n}),50)}}function yf(t){return function(e){this.state.options.scroll=Object.assign({offset:0,rowHeight:26,rowCount:20,itemsPerRow:1,size:e.current.length},t);let r=this.state.options.scroll,n=r.scrollbar||r.container?.querySelector("[data-flow-scrollbar]");return n&&(r.container&&r.container.addEventListener("scroll",i=>{r.offset=Math.floor(r.container.scrollTop/(r.rowHeight*r.itemsPerRow))}),ae(()=>{r.size=e.current.length*r.rowHeight,n.style.height=r.size+"px"},50)),ae(()=>{r.container&&(r.rowCount=Math.ceil(r.container.getBoundingClientRect().height/r.rowHeight)),r.data=e.current;let i=Math.min(r.offset,e.current.length-1),s=i+r.rowCount;return s>e.current.length&&(s=e.current.length,i=s-r.rowCount),e.current.slice(i,s)},50)}}globalThis.simply||(globalThis.simply={});Object.assign(globalThis.simply,{bind:ia,flow:Ni,state:Ai});var ow=globalThis.simply;var Mt={};cr(Mt,{Client:()=>le,client:()=>fe,deepClone:()=>He,formdata:()=>aa,metroError:()=>W,request:()=>lt,response:()=>Ot,trace:()=>wf,url:()=>K});var at="https://metro.muze.nl/details/";Symbol.metroProxy||(Symbol.metroProxy=Symbol("isProxy"));Symbol.metroSource||(Symbol.metroSource=Symbol("source"));var le=class t{clientOptions={url:K(typeof window<"u"?window.location:"https://localhost"),verbs:["get","post","put","delete","patch","head","options","query"]};static tracers={};constructor(...e){for(let r of e)if(typeof r=="string"||r instanceof String)this.clientOptions.url=K(this.clientOptions.url.href,r);else if(r instanceof Function)this.#e([r]);else if(r&&typeof r=="object")for(let n in r)n=="middlewares"?this.#e(r[n]):n=="url"?this.clientOptions.url=K(this.clientOptions.url.href,r[n]):typeof r[n]=="function"?this.clientOptions[n]=r[n](this.clientOptions[n],this.clientOptions):this.clientOptions[n]=r[n];for(let r of this.clientOptions.verbs)this[r]=async function(...n){return this.fetch(lt(this.clientOptions,...n,{method:r.toUpperCase()}))}}#e(e){typeof e=="function"&&(e=[e]);let r=e.findIndex(n=>typeof n!="function");if(r>=0)throw W("metro.client: middlewares must be a function or an array of functions "+at+"client/invalid-middlewares/",e[r]);Array.isArray(this.clientOptions.middlewares)||(this.clientOptions.middlewares=[]),this.clientOptions.middlewares=this.clientOptions.middlewares.concat(e)}fetch(e,r){if(e=lt(e,r),!e.url)throw W("metro.client."+e.method.toLowerCase()+": Missing url parameter "+at+"client/fetch-missing-url/",e);if(r||(r={}),typeof r!="object"||r instanceof String)throw W("metro.client.fetch: Invalid options parameter "+at+"client/fetch-invalid-options/",r);let i=[async function(a){a[Symbol.metroProxy]&&(a=a[Symbol.metroSource]);let l=await fetch(a);return Ot(l)}].concat(this.clientOptions?.middlewares?.slice()||[]);r=Object.assign({},this.clientOptions,r);let s;for(let o of i)s=(function(a,l){return async function(u){let d,c=Object.values(t.tracers);for(let h of c)h.request&&h.request.call(h,u,l);d=await l(u,a);for(let h of c)h.response&&h.response.call(h,d,l);return d}})(s,o);return s(e)}with(...e){return new t(He(this.clientOptions),...e)}get location(){return this.clientOptions.url}};function fe(...t){return new le(...He(t))}function _f(t,e){let r=e||{};!r.url&&e.url&&(r.url=e.url);for(let n of["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"]){let i=t[n];if(!(typeof i>"u"||i==null))if(i?.[Symbol.metroProxy]&&(i=i[Symbol.metroSource]),typeof i=="function")r[n]=i(r[n],r);else if(n=="url")r.url=K(r.url,i);else if(n=="headers"){r.headers=new Headers(e.headers),i instanceof Headers||(i=new Headers(t.headers));for(let[s,o]of i.entries())r.headers.set(s,o)}else r[n]=i}return t instanceof Request&&t.data&&(r.body=t.data),r}function lt(...t){let e={url:K(typeof window<"u"?window.location:"https://localhost/"),duplex:"half"};for(let i of t)typeof i=="string"||i instanceof URL||i instanceof URLSearchParams?e.url=K(e.url,i):i&&(i instanceof FormData||i instanceof ReadableStream||i instanceof Blob||i instanceof ArrayBuffer||i instanceof DataView)?e.body=i:i&&typeof i=="object"&&Object.assign(e,_f(i,e));let r=new Request(e.url,e),n=e.body;return n&&typeof n=="object"&&!(n instanceof String)&&!(n instanceof ReadableStream)&&!(n instanceof Blob)&&!(n instanceof ArrayBuffer)&&!(n instanceof DataView)&&!(n instanceof FormData)&&!(n instanceof URLSearchParams)&&(typeof globalThis.TypedArray>"u"||!(n instanceof globalThis.TypedArray))&&typeof n.toString=="function"&&(e.body=n.toString({headers:r.headers}),r=new Request(e.url,e)),Object.freeze(r),new Proxy(r,{get(i,s){let o;switch(s){case Symbol.metroSource:o=i;break;case Symbol.metroProxy:o=!0;break;case"with":o=function(...a){return n&&a.unshift({body:n}),lt(i,...a)};break;case"data":o=n;break;default:i[s]instanceof Function?o=i[s].bind(i):o=i[s];break}return o}})}function sa(t,e){let r=e||{};!r.url&&e.url&&(r.url=e.url);for(let n of["status","statusText","headers","body","url","type","redirected"]){let i=t[n];typeof i>"u"||i==null||(i?.[Symbol.metroProxy]&&(i=i[Symbol.metroSource]),typeof i=="function"?r[n]=i(r[n],r):n=="url"?r.url=new URL(i,r.url||"https://localhost/"):r[n]=i)}return t instanceof Response&&t.data&&(r.body=t.data),r}function Ot(...t){let e={};for(let i of t)typeof i=="string"?e.body=i:i instanceof Response?Object.assign(e,sa(i,e)):i&&typeof i=="object"&&(i instanceof FormData||i instanceof Blob||i instanceof ArrayBuffer||i instanceof DataView||i instanceof ReadableStream||i instanceof URLSearchParams||i instanceof String||typeof globalThis.TypedArray<"u"&&i instanceof globalThis.TypedArray?e.body=i:Object.assign(e,sa(i,e)));let r;e.body&&(r=e.body),[101,204,205,304].includes(e.status)&&(e.body=null);let n=new Response(e.body,e);return Object.freeze(n),new Proxy(n,{get(i,s){let o;switch(s){case Symbol.metroProxy:o=!0;break;case Symbol.metroSource:o=i;break;case"with":o=function(...a){return Ot(i,...a)};break;case"data":o=r;break;case"ok":o=i.status>=200&&i.status<400;break;default:typeof i[s]=="function"?o=i[s].bind(i):o=i[s];break}return o}})}function oa(t,e){typeof e=="function"?e(t.searchParams,t):(e=new URLSearchParams(e),e.forEach((r,n)=>{t.searchParams.append(n,r)}))}function K(...t){let e=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],r=new URL("https://localhost/");for(let n of t)if(typeof n=="string"||n instanceof String)r=new URL(n,r);else if(n instanceof URL||typeof Location<"u"&&n instanceof Location)r=new URL(n);else if(n instanceof URLSearchParams)oa(r,n);else if(n&&typeof n=="object")for(let i in n)switch(i){case"search":typeof n.search=="function"?n.search(r.search,r):r.search=new URLSearchParams(n.search);break;case"searchParams":oa(r,n.searchParams);break;default:if(!e.includes(i))throw W("metro.url: unknown url parameter "+at+"url/unknown-param-name/",i);if(typeof n[i]=="function")n[i](r[i],r);else if(typeof n[i]=="string"||n[i]instanceof String||typeof n[i]=="number"||n[i]instanceof Number||typeof n[i]=="boolean"||n[i]instanceof Boolean)r[i]=""+n[i];else if(typeof n[i]=="object"&&n[i].toString)r[i]=n[i].toString();else throw W("metro.url: unsupported value for "+i+" "+at+"url/unsupported-param-value/",t[i]);break}else throw W("metro.url: unsupported option value "+at+"url/unsupported-option-value/",n);return Object.freeze(r),new Proxy(r,{get(n,i){let s;switch(i){case Symbol.metroProxy:s=!0;break;case Symbol.metroSource:s=n;break;case"with":s=function(...o){return K(n,...o)};break;case"filename":s=n.pathname.split("/").pop();break;case"folderpath":s=n.pathname.substring(0,n.pathname.lastIndexOf("\\")+1);break;case"authority":s=n.username??"",s+=n.password?":"+n.password:"",s+=s?"@":"",s+=n.hostname,s+=n.port?":"+n.port:"",s+="/",s=n.protocol+"//"+s;break;case"origin":s=n.protocol+"//"+n.hostname,s+=n.port?":"+n.port:"",s+="/";break;case"fragment":s=n.hash.substring(1);break;case"scheme":n.protocol?s=n.protocol.substring(0,n.protocol.length-1):s="";break;default:n[i]instanceof Function?s=n[i].bind(n):s=n[i];break}return s}})}function aa(...t){var e=new FormData;for(let r of t)if(r instanceof HTMLFormElement&&(r=new FormData(r)),r instanceof FormData)for(let n of r.entries())e.append(n[0],n[1]);else if(r&&typeof r=="object")for(let n of Object.entries(r))if(Array.isArray(n[1]))for(let i of n[1])e.append(n[0],i);else e.append(n[0],n[1]);else throw new W("metro.formdata: unknown option type "+at+"formdata/unknown-option-value/",r);return Object.freeze(e),new Proxy(e,{get(r,n){let i;switch(n){case Symbol.metroProxy:i=!0;break;case Symbol.metroSource:i=r;break;case"with":i=function(...s){return aa(r,...s)};break;default:r[n]instanceof Function?i=r[n].bind(r):i=r[n];break}return i}})}var mr={error:(t,...e)=>{console.error("\u24C2\uFE0F  ",t,...e)},info:(t,...e)=>{console.info("\u24C2\uFE0F  ",t,...e)},group:t=>{console.group("\u24C2\uFE0F  "+t)},groupEnd:t=>{console.groupEnd("\u24C2\uFE0F  "+t)}};function W(t,...e){return mr.error(t,...e),new Error(t,...e)}var wf={add(t,e){le.tracers[t]=e},delete(t){delete le.tracers[t]},clear(){le.tracers={}},group(){let t=0;return{request:(e,r)=>{t++,mr.group(t),mr.info(e?.url,e,r)},response:(e,r)=>{mr.info(e?.body?e.body[Symbol.metroSource]:null,e,r),mr.groupEnd(t),t--}}}};function He(t){if(Array.isArray(t))return t.slice().map(He);if(t&&typeof t=="object")if(t.__proto__.constructor==Object||!t.__proto__){let e=Object.assign({},t);return Object.keys(e).forEach(r=>{e[r]=He(t[r])}),e}else return t;return t}function he(t){return t=Object.assign({contentType:"application/json",reviver:null,replacer:null,space:""},t),async function(r,n){if(r.headers.get("Accept")||(r=r.with({headers:{Accept:t.accept??t.contentType}})),r.method!=="GET"&&r.method!=="HEAD"&&r.data&&typeof r.data=="object"&&!(r.data instanceof ReadableStream)){let s=r.headers.get("Content-Type");(!s||vf(s))&&(r=r.with({headers:{"Content-Type":t.contentType}})),la(r.headers.get("Content-Type"))&&(r=r.with({body:JSON.stringify(r.data,t.replacer,t.space)}))}let i=await n(r);if(la(i.headers.get("Content-Type"))){let o=await i.clone().text();try{let a=JSON.parse(o,t.reviver);return i.with({body:a})}catch{}}return i}}var xf=/^application\/([a-zA-Z0-9\-_]+\+)?json\b/;function la(t){return xf.exec(t)}function vf(t){return/^text\/plain\b/.exec(t)}function pe(t){return async function(r,n){let i=await n(r);if(!i.ok)if(t&&typeof t[i.status]=="function")i=t[i.status].apply(i,r);else throw new Error(i.status+": "+i.statusText,{cause:i});return i}}function Bt(){return async function(e,r){let n=await r(e);return n.ok&&n.data?n.data:n}}var bn=class extends le{constructor(e,r,n=null){e instanceof le?super(e.clientOptions,pe(),Bt()):super(e,pe(),Bt()),n||(n=this);for(let i in r)typeof r[i]=="function"?this[i]=r[i].bind(n):r[i]&&typeof r[i]=="object"?this[i]=new this.constructor(e,r[i],n):this[i]=r[i]}},Li=class extends bn{constructor(e,r,n=null){e instanceof le?super(e.with(he()),r,n):super(fe(e,he()),r,n)}};function ua(...t){return new bn(...He(t))}function da(...t){return new Li(...He(t))}var ca=Object.assign({},Mt,{mw:{json:he,thrower:pe,getdata:Bt},api:ua,jsonApi:da});globalThis.metro||(globalThis.metro=ca);var X=ca;function Mi(t){return new Pi(t)}var Bi="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",Sf={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",solid:"http://www.w3.org/ns/solid/terms#",schema:"http://schema.org/",vcard:"http://www.w3.org/2006/vcard/ns#"},Pi=class{constructor(e){this.prefixes={...Sf,...e?.prefixes},this.prefixes.xsd||(this.prefixes.xsd="http://www.w3.org/2001/XMLSchema#"),this.parser=e?.parser,this.writer=e?.writer,this.sources=Object.create(null),this.separator=e?.separator??"$"}parse(e,r,n){let{quads:i,prefixes:s}=this.parser(e,r,n);if(s)for(let o in s){let a=s[o];if(a.match(/^http(s?):\/\/$/i))a+=r.substring(a.length);else try{a=new URL(s[o],r).href}catch(l){console.error("Could not parse prefix",s[o],l.message)}this.prefixes[o]||(this.prefixes[o]=a)}return this.sources[r]=new Oi(i,r,n,s,this),this.sources[r]}setType(e,r){if(!r)return e;if(typeof e=="string"?e=new String(e):typeof result=="number"&&(e=new Number(e)),typeof e!="object")throw new Error("cannot set type on ",e,r);return e.type=r,e}getType(e){return e&&typeof e=="object"?e.type:null}},Oi=class{#e=Object.create(null);constructor(e,r,n,i,s){this.mimetype=n,this.url=r,this.prefixes=i,this.context=s,this.subjects=Object.create(null);for(let o of e){let a;if(o.subject.termType=="BlankNode"){let l=this.shortURI(o.predicate.id,":"),u;switch(l){case"rdf:first":if(a=this.addCollection(o.subject.id),u=this.shortURI(o.object.id,":"),u!="rdf:nil"){let d=this.getValue(o.object);d&&a.push(d)}continue;case"rdf:rest":this.#e[o.object.id]=this.#e[o.subject.id];continue;default:a=this.addBlankNode(o.subject.id);break}}else a=this.addNamedNode(o.subject.id);a.addPredicate(o.predicate.id,o.object)}this.subjects[r]?this.primary=this.subjects[r]:this.primary=null,Object.defineProperty(this,"data",{get(){return Object.values(this.subjects)}})}addNamedNode(e){let r=new URL(e,this.url).href;return this.subjects[r]||(this.subjects[r]=new Ct(r,this)),this.subjects[r]}addBlankNode(e){return this.#e[e]||(this.#e[e]=new ut(this)),this.#e[e]}addCollection(e){return this.#e[e]||(this.#e[e]=new Dt(this)),this.#e[e]}write(){return this.context.writer(this)}get(e){return this.subjects[this.fullURI(e)]}fullURI(e,r=null){r||(r=this.context.separator);let[n,i]=e.split(r);return i?this.prefixes[n]+i:e}shortURI(e,r=null){r||(r=this.context.separator);for(let n in this.context.prefixes)if(e.startsWith(this.context.prefixes[n]))return n+r+e.substring(this.context.prefixes[n].length);return this.url&&e.startsWith(this.url)?e.substring(this.url.length):e}setType(e,r){let n=this.shortURI(r);return this.context.setType(e,n)}getType(e){return this.context.getType(e)}setLanguage(e,r){if(typeof e=="string"?e=new String(e):typeof result=="number"&&(e=new Number(e)),typeof e!="object")throw new Error("cannot set language on ",e);return e.language=r,e}getValue(e){let r;if(e.termType=="Literal"){r=e.value;let n=e.datatype?.id;n&&(r=this.setType(r,n));let i=e.language;i&&(r=this.setLanguage(r,i))}else e.termType=="BlankNode"?r=this.addBlankNode(e.id):r=this.addNamedNode(e.id);return r}},ut=class{constructor(e){Object.defineProperty(this,"graph",{value:e,writable:!1,enumerable:!1})}addPredicate(e,r){if(e.id&&(e=e.id),e==Bi){let n=this.graph.shortURI(r.id);this.addType(n)}else{let n=this.graph.getValue(r);e=this.graph.shortURI(e),this[e]?Array.isArray(this[e])?this[e].push(n):this[e]=[this[e],n]:this[e]=n}}addType(e){this.a?(Array.isArray(this.a)||(this.a=[this.a]),this.a.push(e)):this.a=e}},Ct=class extends ut{constructor(e,r){super(r),Object.defineProperty(this,"id",{value:e,writable:!1,enumerable:!0})}},Dt=class extends Array{constructor(e,r){super(),Object.defineProperty(this,"graph",{value:r,writable:!1,enumerable:!1})}};var go={};cr(go,{n3Parser:()=>Ky,n3Writer:()=>Vy});var Pa=tn(me());var _r="http://www.w3.org/1999/02/22-rdf-syntax-ns#",wr="http://www.w3.org/2001/XMLSchema#",_n="http://www.w3.org/2000/10/swap/",M={xsd:{decimal:`${wr}decimal`,boolean:`${wr}boolean`,double:`${wr}double`,integer:`${wr}integer`,string:`${wr}string`},rdf:{type:`${_r}type`,nil:`${_r}nil`,first:`${_r}first`,rest:`${_r}rest`,langString:`${_r}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${_n}reify#forSome`,forAll:`${_n}reify#forAll`},log:{implies:`${_n}log#implies`,isImpliedBy:`${_n}log#isImpliedBy`}};var{xsd:wn}=M,rh=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,La={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},nh=/[\x00-\x20<>\\"\{\}\|\^\`]/,ih={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},sh=/$0^/,ft=class{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(let r in this)!(r in ih)&&this[r]instanceof RegExp&&(this[r]=sh)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,r){let n=this._input,i=n.length;for(;;){let a,l;for(;a=this._newline.exec(n);)this.comments&&(l=this._comment.exec(a[0]))&&s("comment",l[1],"",this._line,a[0].length),n=n.substr(a[0].length,n.length),i=n.length,this._line++;if(!a&&(a=this._whitespace.exec(n))&&(n=n.substr(a[0].length,n.length)),this._endOfFile.test(n))return r&&(this.comments&&(l=this._comment.exec(n))&&s("comment",l[1],"",this._line,n.length),n=null,s("eof","","",this._line,0)),this._input=n;let u=this._line,d=n[0],c="",h="",f="",p=null,b=0,_=!1;switch(d){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){_=!0;break}}else{this._n3Mode&&(b=1,c="^");break}case"<":if(p=this._unescapedIri.exec(n))c="IRI",h=p[1];else if(p=this._iri.exec(n)){if(h=this._unescape(p[1]),h===null||nh.test(h))return o(this);c="IRI"}else n.length>1&&n[1]==="<"?(c="<<",b=2):this._n3Mode&&n.length>1&&n[1]==="="&&(b=2,this._isImpliedBy?(c="abbreviation",h="<"):(c="inverse",h=">"));break;case">":n.length>1&&n[1]===">"&&(c=">>",b=2);break;case"_":((p=this._blank.exec(n))||r&&(p=this._blank.exec(`${n} `)))&&(c="blank",f="_",h=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(n))h=p[1];else if({value:h,matchLength:b}=this._parseLiteral(n),h===null)return o(this);(p!==null||b!==0)&&(c="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(n))h=p[1];else if({value:h,matchLength:b}=this._parseLiteral(n),h===null)return o(this);(p!==null||b!==0)&&(c="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(n))&&(c="var",h=p[0]);break;case"@":this._previousMarker==="literal"&&(p=this._langcode.exec(n))?(c="langcode",h=p[1]):(p=this._keyword.exec(n))&&(c=p[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){c=".",b=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(p=this._number.exec(n)||r&&(p=this._number.exec(`${n} `)))&&(c="literal",h=p[0],f=typeof p[1]=="string"?wn.double:typeof p[2]=="string"?wn.decimal:wn.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(p=this._sparqlKeyword.exec(n))?c=p[0].toUpperCase():_=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(c="literal",h=p[0],f=wn.boolean):_=!0;break;case"a":(p=this._shortPredicates.exec(n))?(c="abbreviation",h="a"):_=!0;break;case"=":this._n3Mode&&n.length>1&&(c="abbreviation",n[1]!==">"?(b=1,h="="):(b=2,h=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(b=1,c=d);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(c="{|",b=2):(c=d,b=1));break;case"|":n.length>=2&&n[1]==="}"&&(c="|}",b=2);break;default:_=!0}if(_&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(p=this._prefix.exec(n))?(c="prefix",h=p[1]||""):((p=this._prefixed.exec(n))||r&&(p=this._prefixed.exec(`${n} `)))&&(c="prefixed",f=p[1]||"",h=this._unescape(p[2]))),this._previousMarker==="^^")switch(c){case"prefixed":c="type";break;case"IRI":c="typeIRI";break;default:c=""}if(!c)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?o(this):this._input=n;let m=b||p[0].length,y=s(c,h,f,u,m);this.previousToken=y,this._previousMarker=c,n=n.substr(m,n.length)}function s(a,l,u,d,c){let h=n?i-n.length:i,f=h+c,p={type:a,value:l,prefix:u,line:d,start:h,end:f};return e(null,p),p}function o(a){e(a._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let r=!1,n=e.replace(rh,(i,s,o,a)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof o=="string"){let l=Number.parseInt(o,16);return l<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(l&1023))}return a in La?La[a]:(r=!0,"")});return r?null:n}_parseLiteral(e){if(e.length>=3){let r=e.match(/^(?:"""|"|'''|'|)/)[0],n=r.length,i=Math.max(this._literalClosingPos,n);for(;(i=e.indexOf(r,i))>0;){let s=0;for(;e[i-s-1]==="\\";)s++;if(s%2===0){let o=e.substring(n,i),a=o.split(/\r\n|\r|\n/).length-1,l=i+n;if(n===1&&a!==0||n===3&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:l}}i++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;let r=new Error(`Unexpected "${e}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,r){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof r=="function")queueMicrotask(()=>this._tokenizeToEnd(r,!0));else{let n=[],i;if(this._tokenizeToEnd((s,o)=>s?i=s:n.push(o),!0),i)throw i;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Pa.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),e.on("error",r)}};var{rdf:oh,xsd:ht}=M,Wt,ah=0;var Qi={namedNode:Oa,blankNode:Ma,variable:Ca,literal:Ba,defaultGraph:lh,quad:Ki,triple:Ki,fromTerm:xr,fromQuad:Da},te=Qi,ee=class t{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof t?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}},zt=class extends ee{get termType(){return"NamedNode"}},Ke=class t extends ee{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){let e=this.id,r=e.lastIndexOf('"')+1;return r<e.length&&e[r++]==="@"?e.substr(r).toLowerCase():""}get datatype(){return new zt(this.datatypeString)}get datatypeString(){let e=this.id,r=e.lastIndexOf('"')+1,n=r<e.length?e[r]:"";return n==="^"?e.substr(r+2):n!=="@"?ht.string:oh.langString}equals(e){return e instanceof t?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},vr=class extends ee{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},Sr=class extends ee{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},Er=class extends ee{constructor(){return super(""),Wt||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};Wt=new Er;function Qe(t,e,r){if(e=e||Qi,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===Qi)return new Ke(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));let n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),t[n+1]==="@"?t.substr(n+2):e.namedNode(t.substr(n+3)));case"[":t=JSON.parse(t);break;default:if(!r||!Array.isArray(t))return e.namedNode(t)}return e.quad(Qe(t[0],e,!0),Qe(t[1],e,!0),Qe(t[2],e,!0),t[3]&&Qe(t[3],e,!0))}function Le(t,e){if(typeof t=="string")return t;if(t instanceof ee&&t.termType!=="Quad")return t.id;if(!t)return Wt.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==ht.string?`^^${t.datatype.value}`:""}`;case"Quad":let r=[Le(t.subject,!0),Le(t.predicate,!0),Le(t.object,!0)];return t.graph&&t.graph.termType!=="DefaultGraph"&&r.push(Le(t.graph,!0)),e?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${t.termType}`)}}var Ve=class extends ee{constructor(e,r,n,i){super(""),this._subject=e,this._predicate=r,this._object=n,this._graph=i||Wt}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}};function Oa(t){return new zt(t)}function Ma(t){return new vr(t||`n3-${ah++}`)}function Ba(t,e){if(typeof e=="string")return new Ke(`"${t}"@${e.toLowerCase()}`);let r=e?e.value:"";return r===""&&(typeof t=="boolean"?r=ht.boolean:typeof t=="number"&&(Number.isFinite(t)?r=Number.isInteger(t)?ht.integer:ht.double:(r=ht.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),r===""||r===ht.string?new Ke(`"${t}"`):new Ke(`"${t}"^^${r}`)}function Ca(t){return new Sr(t)}function lh(){return Wt}function Ki(t,e,r,n){return new Ve(t,e,r,n)}function xr(t){if(t instanceof ee)return t;switch(t.termType){case"NamedNode":return Oa(t.value);case"BlankNode":return Ma(t.value);case"Variable":return Ca(t.value);case"DefaultGraph":return Wt;case"Literal":return Ba(t.value,t.language||t.datatype);case"Quad":return Da(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function Da(t){if(t instanceof Ve)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return Ki(xr(t.subject),xr(t.predicate),xr(t.object),xr(t.graph))}var Fa=0,Ye=class{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&Ua(this,e.factory);let r=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),i=/trig/.test(r),s=/triple/.test(r),o=/quad/.test(r),a=this._n3Mode=/n3/.test(r),l=s||o;(this._supportsNamedGraphs=!(n||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||s||a),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=r===""||/star|\*$/.test(r),l&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new ft({lineMode:l,n3:a,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Fa=0}_setBase(e){if(!e)this._base="",this._basePath="";else{let r=e.indexOf("#");r>=0&&(e=e.substr(0,r)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,r,n,i,s){let o=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:i,object:s,graph:r,inverse:o?this._inversePredicate:!1,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,r){let n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,r){let n;switch(e.type){case"IRI":case"typeIRI":let i=this._resolveIRI(e.value);if(i===null)return this._error("Invalid IRI",e);n=this._factory.namedNode(i);break;case"type":case"prefixed":let s=this._prefixes[e.prefix];if(s===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(s+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){let r=e.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${r}`,e):(this._subject=null,r==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);let r=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let r=null,n=null,i=this._readListItem,s=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=r=this._factory.blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),o.length!==0&&o[o.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(r=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((r=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._factory.blankNode()),s===null?a.predicate===null?a.subject=n:a.object=n:this._emit(s,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let r=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":let n=this._readEntity(e);if(n===void 0)return;r=this._factory.literal(this._literalValue,n),e=null;break;case"langcode":r=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:r}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,r){let n=this._completeLiteral(e);if(n)return this._object=n.literal,r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let r,n=this._graph,i=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);let o=this._predicate,a=this._object;this._subject=this._factory.quad(i,o,a,this.DEFAULTGRAPH),r=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,r=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(i!==null){let o=this._predicate,a=this._object;s?this._emit(a,o,i,n):this._emit(i,o,a,n)}return r}_readBlankNodePunctuation(e){let r;switch(e.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);let r=this._readEntity(e);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(e){let r=e.type==="IRI"&&this._resolveIRI(e.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let r;switch(e.type){case"IRI":case"prefixed":if((r=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:let r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){let i=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let r,n,i=this._factory.blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=i):(r=this._object,this._object=i),this._emit(r,n,i,this._graph),this._readPath}_readBackwardPath(e){let r=this._factory.blankNode(),n,i;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(i=this._subject,this._subject=r):(i=this._object,this._object=r),this._emit(r,n,i,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);let r=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_getContextEndReader(){let e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,r,n,i){this._callback(null,this._factory.quad(e,r,n,i||this.DEFAULTGRAPH))}_error(e,r){let n=new Error(`${e} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=xn}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;let r=e.length,n="",i=-1,s=-1,o=0,a="/";for(;i<r;){switch(a){case":":if(s<0&&e[++i]==="/"&&e[++i]==="/")for(;(s=i+1)<r&&e[s]!=="/";)i=s;break;case"?":case"#":i=r;break;case"/":if(e[i+1]===".")switch(a=e[++i+1],a){case"/":n+=e.substring(o,i-1),o=i+1;break;case void 0:case"?":case"#":return n+e.substring(o,i)+e.substr(i+1);case".":if(a=e[++i+1],a===void 0||a==="/"||a==="?"||a==="#"){if(n+=e.substring(o,i-2),(o=n.lastIndexOf("/"))>=s&&(n=n.substr(0,o)),a!=="/")return`${n}/${e.substr(i+1)}`;o=i+1}}}a=e[++i]}return n+e.substring(o)}parse(e,r,n){let i,s,o;if(r&&(r.onQuad||r.onPrefix||r.onComment)?(i=r.onQuad,s=r.onPrefix,o=r.onComment):(i=r,s=n),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Fa++}_`,this._prefixCallback=s||xn,this._inversePredicate=!1,this._quantified=Object.create(null),!i){let l=[],u;if(this._callback=(d,c)=>{d?u=d:c&&l.push(c)},this._lexer.tokenize(e).every(d=>this._readCallback=this._readCallback(d)),u)throw u;return l}let a=(l,u)=>{l!==null?(this._callback(l),this._callback=xn):this._readCallback&&(this._readCallback=this._readCallback(u))};o&&(this._lexer.comments=!0,a=(l,u)=>{l!==null?(this._callback(l),this._callback=xn):this._readCallback&&(u.type==="comment"?o(u.value):this._readCallback=this._readCallback(u))}),this._callback=i,this._lexer.tokenize(e,a)}};function xn(){}function Ua(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(M.rdf.first),t.RDF_REST=e.namedNode(M.rdf.rest),t.RDF_NIL=e.namedNode(M.rdf.nil),t.N3_FORALL=e.namedNode(M.r.forAll),t.N3_FORSOME=e.namedNode(M.r.forSome),t.ABBREVIATIONS={a:e.namedNode(M.rdf.type),"=":e.namedNode(M.owl.sameAs),">":e.namedNode(M.log.implies),"<":e.namedNode(M.log.isImpliedBy)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}Ua(Ye.prototype,te);var Vi={};cr(Vi,{inDefaultGraph:()=>ph,isBlankNode:()=>dh,isDefaultGraph:()=>pt,isLiteral:()=>ch,isNamedNode:()=>uh,isQuad:()=>hh,isVariable:()=>fh,prefix:()=>bh,prefixes:()=>$a});function uh(t){return!!t&&t.termType==="NamedNode"}function dh(t){return!!t&&t.termType==="BlankNode"}function ch(t){return!!t&&t.termType==="Literal"}function fh(t){return!!t&&t.termType==="Variable"}function hh(t){return!!t&&t.termType==="Quad"}function pt(t){return!!t&&t.termType==="DefaultGraph"}function ph(t){return pt(t.graph)}function bh(t,e){return $a({"":t.value||t},e)("")}function $a(t,e){let r=Object.create(null);for(let i in t)n(i,t[i]);e=e||te;function n(i,s){if(typeof s=="string"){let o=Object.create(null);r[i]=a=>o[a]||(o[a]=e.namedNode(s+a))}else if(!(i in r))throw new Error(`Unknown prefix: ${i}`);return r[i]}return n}function Ht(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var gh=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,mh=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,qa="./",yh="../",Yi="?",za="#",bt=class t{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!gh.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!t.supports(this.base))return this._baseMatcher=/.^/;let e=/^[^:]*:\/*/.exec(this.base)[0],r=["^",Ht(e)],n=[],i=[],s=/[^/?#]*([/?#])/y,o,a=0,l=0,u=s.lastIndex=e.length;for(;!a&&!l&&(o=s.exec(this.base));)o[1]===za?l=s.lastIndex-1:(r.push(Ht(o[0]),"(?:"),n.push(")?"),o[1]!==Yi?i.push(u=s.lastIndex):(a=u=s.lastIndex,l=this.base.indexOf(za,a),this._pathReplacements[a]=Yi));for(let d=0;d<i.length;d++)this._pathReplacements[i[d]]=yh.repeat(i.length-d-1);return this._pathReplacements[i[i.length-1]]=qa,this._baseLength=l>0?l:this.base.length,r.push(Ht(this.base.substring(u,this._baseLength)),a?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...r,...n].join(""))}toRelative(e){let r=this._getBaseMatcher().exec(e);if(!r)return e;let n=r[0].length;if(n===this._baseLength&&n===e.length)return"";let i=this._pathReplacements[n];if(i){let s=e.substring(n);return i!==Yi&&!mh.test(s)?e:i===qa&&/^[^?#]/.test(s)?s:i+s}return e.substring(n-1)}};var kr=te.defaultGraph(),{rdf:_h,xsd:Gt}=M,Wa=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Ha=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,wh={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"},gt=class extends ee{equals(e){return e===this}},ye=class{constructor(e,r){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(r=e,e=null),r=r||{},this._lists=r.lists,e)this._outputStream=e,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(i,s,o){n+=i,o&&o()},end:i=>{i&&i(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=kr,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseIri=new bt(r.baseIRI)))}get _inDefaultGraph(){return kr.equals(this._graph)}_write(e,r){this._outputStream.write(e,"utf8",r)}_writeQuad(e,r,n,i,s){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(kr.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),e.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,s):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,s):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,s)}catch(o){s&&s(o)}}_writeQuadLine(e,r,n,i,s){delete this._prefixMatch,this._write(this.quadToString(e,r,n,i),s)}quadToString(e,r,n,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(e){let r="";for(let n of e)r+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return r}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let r=e.value;this._baseIri&&(r=this._baseIri.toRelative(r)),Wa.test(r)&&(r=r.replace(Ha,Ga));let n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(e){let r=e.value;if(Wa.test(r)&&(r=r.replace(Ha,Ga)),e.language)return`"${r}"@${e.language}`;if(this._lineMode){if(e.datatype.value===Gt.string)return`"${r}"`}else switch(e.datatype.value){case Gt.string:return`"${r}"`;case Gt.boolean:if(r==="true"||r==="false")return r;break;case Gt.integer:if(/^[+-]?\d+$/.test(r))return r;break;case Gt.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case Gt.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===_h.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:r,object:n,graph:i}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${pt(i)?"":` ${this._encodeIriOrBlank(i)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,r,n,i,s){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,r):typeof i=="function"?this._writeQuad(e,r,n,kr,i):this._writeQuad(e,r,n,i||kr,s)}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}addPrefix(e,r,n){let i={};i[e]=r,this.addPrefixes(i,n)}addPrefixes(e,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let i in e){let s=e[i];typeof s!="string"&&(s=s.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[s]=i+=":",this._write(`@prefix ${i} <${s}>.
`)}if(n){let i="",s="";for(let o in this._prefixIRIs)i+=i?`|${o}`:o,s+=(s?"|":"")+this._prefixIRIs[o];i=Ht(i,/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp(`^(?:${s})[^/]*$|^(${i})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(e,r){let n=e,i,s;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:r}]:"length"in e||(n=[e]),s=n.length){case 0:return new gt("[]");case 1:if(i=n[0],!(i.object instanceof gt))return new gt(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let o="[";for(let a=0;a<s;a++)i=n[a],i.predicate.equals(e)?o+=`, ${this._encodeObject(i.object)}`:(o+=`${(a?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new gt(`${o}
]`)}}list(e){let r=e&&e.length||0,n=new Array(r);for(let i=0;i<r;i++)n[i]=this._encodeObject(e[i]);return new gt(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=e&&((n,i)=>{r=null,e(n,i)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}};function Ga(t){let e=wh[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}var po=tn(ri());var ho=Symbol("iter");function Fr(t,e,r=4){if(r===0)return Object.assign(t,e);for(let n in e)t[n]=Fr(t[n]||Object.create(null),e[n],r-1);return t}function rc(t,e,r=4){let n=!1;for(let i in t)if(i in e){let s=r===0?null:rc(t[i],e[i],r-1);if(s!==!1)n=n||Object.create(null),n[i]=s;else if(r===3)return!1}return n}function nc(t,e,r=4){let n=!1;for(let i in t)if(!(i in e))n=n||Object.create(null),n[i]=r===0?null:Fr({},t[i],r-1);else if(r!==0){let s=nc(t[i],e[i],r-1);if(s!==!1)n=n||Object.create(null),n[i]=s;else if(r===3)return!1}return n}var Ur=class{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||te}_termFromId(e){if(e[0]==="."){let r=this._entities,n=e.split(".");return this._factory.quad(this._termFromId(r[n[1]]),this._termFromId(r[n[2]]),this._termFromId(r[n[3]]),n[4]&&this._termFromId(r[n[4]]))}return Qe(e,this._factory)}_termToNumericId(e){if(e.termType==="Quad"){let r=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),i=this._termToNumericId(e.object),s;return r&&n&&i&&(pt(e.graph)||(s=this._termToNumericId(e.graph)))&&this._ids[s?`.${r}.${n}.${i}.${s}`:`.${r}.${n}.${i}`]}return this._ids[Le(e)]}_termToNewNumericId(e){let r=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${pt(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:Le(e);return this._ids[r]||(this._ids[this._entities[++this._id]=r]=this._id)}createBlankNode(e){let r,n;if(e)for(r=e=`_:${e}`,n=1;this._ids[r];)r=e+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}},rt=class t{constructor(e,r){this._size=0,this._graphs=Object.create(null),!r&&e&&!e[0]&&typeof e.match!="function"&&(r=e,e=null),r=r||{},this._factory=r.factory||te,this._entityIndex=r.entityIndex||new Ur({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addAll(e)}get size(){let e=this._size;if(e!==null)return e;e=0;let r=this._graphs,n,i;for(let s in r)for(let o in n=r[s].subjects)for(let a in i=n[o])e+=Object.keys(i[a]).length;return this._size=e}_addToIndex(e,r,n,i){let s=e[r]||(e[r]={}),o=s[n]||(s[n]={}),a=i in o;return a||(o[i]=null),!a}_removeFromIndex(e,r,n,i){let s=e[r],o=s[n];delete o[i];for(let a in o)return;delete s[n];for(let a in s)return;delete e[r]}*_findInIndex(e,r,n,i,s,o,a,l){let u,d,c,h=this._entities,f=this._termFromId(h[l]),p={subject:null,predicate:null,object:null};r&&((u=e,e={})[r]=u[r]);for(let b in e)if(d=e[b]){p[s]=this._termFromId(h[b]),n&&((u=d,d={})[n]=u[n]);for(let _ in d)if(c=d[_]){p[o]=this._termFromId(h[_]);let m=i?i in c?[i]:[]:Object.keys(c);for(let y=0;y<m.length;y++)p[a]=this._termFromId(h[m[y]]),yield this._factory.quad(p.subject,p.predicate,p.object,f)}}}_loop(e,r){for(let n in e)r(n)}_loopByKey0(e,r,n){let i,s;if(i=e[r])for(s in i)n(s)}_loopByKey1(e,r,n){let i,s;for(i in e)s=e[i],s[r]&&n(i)}_loopBy2Keys(e,r,n,i){let s,o,a;if((s=e[r])&&(o=s[n]))for(a in o)i(a)}_countInIndex(e,r,n,i){let s=0,o,a,l;r&&((o=e,e={})[r]=o[r]);for(let u in e)if(a=e[u]){n&&((o=a,a={})[n]=o[n]);for(let d in a)(l=a[d])&&(i?i in l&&s++:s+=Object.keys(l).length)}return s}_getGraphs(e){return e=e===""?1:e&&(this._termToNumericId(e)||-1),typeof e!="number"?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){let r=Object.create(null);return n=>{n in r||(r[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,r,n,i){r||(i=e.graph,n=e.object,r=e.predicate,e=e.subject),i=i?this._termToNewNumericId(i):1;let s=this._graphs[i];return s||(s=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(s)),e=this._termToNewNumericId(e),r=this._termToNewNumericId(r),n=this._termToNewNumericId(n),this._addToIndex(s.subjects,e,r,n)?(this._addToIndex(s.predicates,r,n,e),this._addToIndex(s.objects,n,e,r),this._size=null,!0):!1}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}delete(e){return this.removeQuad(e),this}has(e,r,n,i){return e&&e.subject&&({subject:e,predicate:r,object:n,graph:i}=e),!this.readQuads(e,r,n,i).next().done}import(e){return e.on("data",r=>{this.addQuad(r)}),e}removeQuad(e,r,n,i){r||({subject:e,predicate:r,object:n,graph:i}=e),i=i?this._termToNumericId(i):1;let s=this._graphs,o,a,l;if(!(e=e&&this._termToNumericId(e))||!(r=r&&this._termToNumericId(r))||!(n=n&&this._termToNumericId(n))||!(o=s[i])||!(a=o.subjects[e])||!(l=a[r])||!(n in l))return!1;this._removeFromIndex(o.subjects,e,r,n),this._removeFromIndex(o.predicates,r,n,e),this._removeFromIndex(o.objects,n,e,r),this._size!==null&&this._size--;for(e in o.subjects)return!0;return delete s[i],!0}removeQuads(e){for(let r=0;r<e.length;r++)this.removeQuad(e[r])}remove(e){return e.on("data",r=>{this.removeQuad(r)}),e}removeMatches(e,r,n,i){let s=new po.Readable({objectMode:!0}),o=this.readQuads(e,r,n,i);return s._read=a=>{for(;--a>=0;){let{done:l,value:u}=o.next();if(l){s.push(null);return}s.push(u)}},this.remove(s)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,r,n,i){return[...this.readQuads(e,r,n,i)]}*readQuads(e,r,n,i){let s=this._getGraphs(i),o,a,l,u;if(!(e&&!(a=this._termToNumericId(e))||r&&!(l=this._termToNumericId(r))||n&&!(u=this._termToNumericId(n))))for(let d in s)(o=s[d])&&(a?u?yield*this._findInIndex(o.objects,u,a,l,"object","subject","predicate",d):yield*this._findInIndex(o.subjects,a,l,null,"subject","predicate","object",d):l?yield*this._findInIndex(o.predicates,l,u,null,"predicate","object","subject",d):u?yield*this._findInIndex(o.objects,u,null,null,"object","subject","predicate",d):yield*this._findInIndex(o.subjects,null,null,null,"subject","predicate","object",d))}match(e,r,n,i){return new tt(this,e,r,n,i,{entityIndex:this._entityIndex})}countQuads(e,r,n,i){let s=this._getGraphs(i),o=0,a,l,u,d;if(e&&!(l=this._termToNumericId(e))||r&&!(u=this._termToNumericId(r))||n&&!(d=this._termToNumericId(n)))return 0;for(let c in s)(a=s[c])&&(e?n?o+=this._countInIndex(a.objects,d,l,u):o+=this._countInIndex(a.subjects,l,u,d):r?o+=this._countInIndex(a.predicates,u,d,l):o+=this._countInIndex(a.objects,d,l,u));return o}forEach(e,r,n,i,s){this.some(o=>(e(o,this),!1),r,n,i,s)}every(e,r,n,i,s){return!this.some(o=>!e(o,this),r,n,i,s)}some(e,r,n,i,s){for(let o of this.readQuads(r,n,i,s))if(e(o,this))return!0;return!1}getSubjects(e,r,n){let i=[];return this.forSubjects(s=>{i.push(s)},e,r,n),i}forSubjects(e,r,n,i){let s=this._getGraphs(i),o,a,l;if(e=this._uniqueEntities(e),!(r&&!(a=this._termToNumericId(r))||n&&!(l=this._termToNumericId(n))))for(i in s)(o=s[i])&&(a?l?this._loopBy2Keys(o.predicates,a,l,e):this._loopByKey1(o.subjects,a,e):l?this._loopByKey0(o.objects,l,e):this._loop(o.subjects,e))}getPredicates(e,r,n){let i=[];return this.forPredicates(s=>{i.push(s)},e,r,n),i}forPredicates(e,r,n,i){let s=this._getGraphs(i),o,a,l;if(e=this._uniqueEntities(e),!(r&&!(a=this._termToNumericId(r))||n&&!(l=this._termToNumericId(n))))for(i in s)(o=s[i])&&(a?l?this._loopBy2Keys(o.objects,l,a,e):this._loopByKey0(o.subjects,a,e):l?this._loopByKey1(o.predicates,l,e):this._loop(o.predicates,e))}getObjects(e,r,n){let i=[];return this.forObjects(s=>{i.push(s)},e,r,n),i}forObjects(e,r,n,i){let s=this._getGraphs(i),o,a,l;if(e=this._uniqueEntities(e),!(r&&!(a=this._termToNumericId(r))||n&&!(l=this._termToNumericId(n))))for(i in s)(o=s[i])&&(a?l?this._loopBy2Keys(o.subjects,a,l,e):this._loopByKey1(o.objects,a,e):l?this._loopByKey0(o.predicates,l,e):this._loop(o.objects,e))}getGraphs(e,r,n){let i=[];return this.forGraphs(s=>{i.push(s)},e,r,n),i}forGraphs(e,r,n,i){for(let s in this._graphs)this.some(o=>(e(o.graph),!0),r,n,i,this._termFromId(this._entities[s]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:r=!1}={}){let n={},i=r?(()=>!0):((a,l)=>{throw new Error(`${a.value} ${l}`)}),s=this.getQuads(null,M.rdf.rest,M.rdf.nil,null),o=e?[...s]:[];return s.forEach(a=>{let l=[],u=!1,d,c,h=a.graph,f=a.subject;for(;f&&!u;){let p=this.getQuads(null,null,f,null),b=this.getQuads(f,null,null,null),_,m=null,y=null,v=null;for(let w=0;w<b.length&&!u;w++)_=b[w],_.graph.equals(h)?d?u=i(f,"has non-list arcs out"):_.predicate.value===M.rdf.first?m?u=i(f,"has multiple rdf:first arcs"):o.push(m=_):_.predicate.value===M.rdf.rest?y?u=i(f,"has multiple rdf:rest arcs"):o.push(y=_):p.length?u=i(f,"can't be subject and object"):(d=_,c="subject"):u=i(f,"not confined to single graph");for(let w=0;w<p.length&&!u;++w)_=p[w],d?u=i(f,"can't have coreferences"):_.predicate.value===M.rdf.rest?v?u=i(f,"has incoming rdf:rest arcs"):v=_:(d=_,c="object");m?l.unshift(m.object):u=i(f,"has no list head"),f=v&&v.subject}u?e=!1:d&&(n[d[c].value]=l)}),e&&this.removeQuads(o),n}addAll(e){if(e instanceof tt&&(e=e.filtered),Array.isArray(e))this.addQuads(e);else if(e instanceof t&&e._entityIndex===this._entityIndex)e._size!==0&&(this._graphs=Fr(this._graphs,e._graphs),this._size=null);else for(let r of e)this.add(r);return this}contains(e){if(e instanceof tt&&(e=e.filtered),e===this)return!0;if(!(e instanceof t)||this._entityIndex!==e._entityIndex)return e.every(u=>this.has(u));let r=this._graphs,n=e._graphs,i,s,o,a,l;for(let u in n){if(!(i=r[u]))return!1;i=i.subjects;for(let d in s=n[u].subjects){if(!(o=i[d]))return!1;for(let c in a=s[d]){if(!(l=o[c]))return!1;for(let h in a[c])if(!(h in l))return!1}}}return!0}deleteMatches(e,r,n,i){for(let s of this.match(e,r,n,i))this.removeQuad(s);return this}difference(e){if(e&&e instanceof tt&&(e=e.filtered),e===this)return new t({entityIndex:this._entityIndex});if(e instanceof t&&e._entityIndex===this._entityIndex){let r=new t({entityIndex:this._entityIndex}),n=nc(this._graphs,e._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>!e.has(r))}equals(e){return e instanceof tt&&(e=e.filtered),e===this||this.size===e.size&&this.contains(e)}filter(e){let r=new t({entityIndex:this._entityIndex});for(let n of this)e(n,this)&&r.add(n);return r}intersection(e){if(e instanceof tt&&(e=e.filtered),e===this){let r=new t({entityIndex:this._entityIndex});return r._graphs=Fr(Object.create(null),this._graphs),r._size=this._size,r}else if(e instanceof t&&this._entityIndex===e._entityIndex){let r=new t({entityIndex:this._entityIndex}),n=rc(e._graphs,this._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>e.has(r))}map(e){let r=new t({entityIndex:this._entityIndex});for(let n of this)r.add(e(n,this));return r}reduce(e,r){let n=this.readQuads(),i=r===void 0?n.next().value:r;for(let s of n)i=e(i,s,this);return i}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new ye().quadsToString(this)}union(e){let r=new t({entityIndex:this._entityIndex});return r._graphs=Fr(Object.create(null),this._graphs),r._size=this._size,r.addAll(e),r}*[Symbol.iterator](){yield*this.readQuads()}};function Te(t,e,r=0){let n=e[r];if(n&&!(n in t))return!1;let i=!1;for(let s in n?{[n]:t[n]}:t){let o=r===2?null:Te(t[s],e,r+1);o!==!1&&(i=i||Object.create(null),i[s]=o)}return i}var tt=class t extends po.Readable{constructor(e,r,n,i,s,o){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:r,predicate:n,object:i,graph:s,options:o})}get filtered(){if(!this._filtered){let{n3Store:e,graph:r,object:n,predicate:i,subject:s}=this,o=this._filtered=new rt({factory:e._factory,entityIndex:this.options.entityIndex}),a,l,u;if(s&&!(a=o._termToNumericId(s))||i&&!(l=o._termToNumericId(i))||n&&!(u=o._termToNumericId(n)))return o;let d=e._getGraphs(r);for(let c in d){let h,f,p,b;(b=d[c])&&(!a&&l?(f=Te(b.predicates,[l,u,a]))&&(h=Te(b.subjects,[a,l,u]),p=Te(b.objects,[u,a,l])):u?(p=Te(b.objects,[u,a,l]))&&(h=Te(b.subjects,[a,l,u]),f=Te(b.predicates,[l,u,a])):(h=Te(b.subjects,[a,l,u]))&&(f=Te(b.predicates,[l,u,a]),p=Te(b.objects,[u,a,l])),h&&(o._graphs[c]={subjects:h,predicates:f,objects:p}))}o._size=null}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[ho]&&(this[ho]=this[Symbol.iterator]());let r=this[ho];for(;--e>=0;){let{done:n,value:i}=r.next();if(n){this.push(null);return}this.push(i)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,r,n,i){return this.filtered.deleteMatches(e,r,n,i)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,r,n,i,s){return this.filtered.every(e,r,n,i,s)}filter(e){return this.filtered.filter(e)}forEach(e,r,n,i,s){return this.filtered.forEach(e,r,n,i,s)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,r,n,i,s){return this.filtered.some(e,r,n,i,s)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,r){return this.filtered.reduce(e,r)}toString(){return new ye().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,r,n,i){return new t(this.filtered,e,r,n,i,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}};var $r=class{dataset(e){return new rt(e)}};function sc(t){let e=[];for(let{subject:r,object:n}of t.match(null,te.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,te.defaultGraph())){let i=[...t.match(null,null,null,r)],s=[...t.match(null,null,null,n)];e.push({premise:i,conclusion:s})}return e}var qr=class{constructor(e){this._store=e}_add(e,r,n,i,s){this._store._addToIndex(i.subjects,e,r,n)&&(this._store._addToIndex(i.predicates,r,n,e),this._store._addToIndex(i.objects,n,e,r),s())}_evaluatePremise(e,r,n,i=0){let s,o,a,l,u,[d,c,h]=e.premise[i].value,f=r[e.premise[i].content],p=!(a=d.value);for(a in p?f:{[a]:f[a]})if(l=f[a]){p&&(d.value=Number(a)),s=!(a=c.value);for(a in s?l:{[a]:l[a]})if(u=l[a]){s&&(c.value=Number(a)),o=!(a=h.value);for(a in o?u:{[a]:u[a]})o&&(h.value=Number(a)),i===e.premise.length-1?e.conclusion.forEach(b=>{this._add(b.subject.value,b.predicate.value,b.object.value,r,()=>{n(b)})}):this._evaluatePremise(e,r,n,i+1);o&&(h.value=null)}s&&(c.value=null)}p&&(d.value=null)}_evaluateRules(e,r,n){for(let i=0;i<e.length;i++)this._evaluatePremise(e[i],r,n)}_reasonGraphNaive(e,r){let n=[];function i(a){a.next&&a.next.forEach(l=>{n.push([a.subject.value,a.predicate.value,a.object.value,l])})}let s=a=>{a.forEach(l=>{this._add(l.subject.value,l.predicate.value,l.object.value,r,()=>{i(l)})})};this._evaluateRules(e,r,i);let o;for(;(o=n.pop())!==void 0;){let[a,l,u,d]=o,c=d.basePremise.subject.value;c||(d.basePremise.subject.value=a);let h=d.basePremise.predicate.value;h||(d.basePremise.predicate.value=l);let f=d.basePremise.object.value;f||(d.basePremise.object.value=u),d.premise.length===0?s(d.conclusion):this._evaluatePremise(d,r,i),c||(d.basePremise.subject.value=null),h||(d.basePremise.predicate.value=null),f||(d.basePremise.object.value=null)}}_createRule({premise:e,conclusion:r}){let n={},i=o=>o.termType==="Variable"?n[o.value]=n[o.value]||{}:{value:this._store._termToNewNumericId(o)},s=o=>({subject:i(o.subject),predicate:i(o.predicate),object:i(o.object)});return{premise:e.map(o=>s(o)),conclusion:r.map(o=>s(o)),variables:Object.values(n)}}reason(e){Array.isArray(e)||(e=sc(e)),e=e.map(n=>this._createRule(n));for(let n of e)for(let i of e)for(let s=0;s<i.premise.length;s++){let o=i.premise[s];for(let a of n.conclusion){if(bo(o.subject,a.subject)&&bo(o.predicate,a.predicate)&&bo(o.object,a.object)){let l=new Set,u=[];o.subject.value=o.subject.value||1,o.object.value=o.object.value||1,o.predicate.value=o.predicate.value||1;for(let d=0;d<i.premise.length;d++)d!==s&&u.push(ic(i.premise[d],l));(a.next=a.next||[]).push({premise:u,conclusion:i.conclusion,basePremise:o})}i.variables.forEach(l=>{l.value=null})}}for(let n of e){let i=new Set;n.premise=n.premise.map(s=>ic(s,i))}let r=this._store._getGraphs();for(let n in r)this._reasonGraphNaive(e,r[n]);this._store._size=null}};function ic({subject:t,predicate:e,object:r},n){let i=t.value||n.has(t)||(n.add(t),!1),s=e.value||n.has(e)||(n.add(e),!1),o=r.value||n.has(r)||(n.add(r),!1);return!i&&s?{content:"predicates",value:[e,r,t]}:o?{content:"objects",value:[r,t,e]}:{content:"subjects",value:[t,e,r]}}function bo(t,e){return t.value===null&&(t.value=e.value),t.value===e.value}var oc=tn(ri());var zr=class extends oc.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;let r=new Ye(e),n,i,s={onQuad:(o,a)=>{o&&this.emit("error",o)||a&&this.push(a)},onPrefix:(o,a)=>{this.emit("prefix",o,a)}};e&&e.comments&&(s.onComment=o=>{this.emit("comment",o)}),r.parse({on:(o,a)=>{switch(o){case"data":n=a;break;case"end":i=a;break}}},s),this._transform=(o,a,l)=>{n(o),l()},this._flush=o=>{i(),o()}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),this}};var ac=tn(ri());var Wr=class extends ac.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});let r=this._writer=new ye({write:(n,i,s)=>{this.push(n),s&&s()},end:n=>{this.push(null),n&&n()}},e);this._transform=(n,i,s)=>{r.addQuad(n,s)},this._flush=n=>{r.end(n)}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),e.on("prefix",(r,n)=>{this._writer.addPrefix(r,n)}),this}};var ni={Lexer:ft,Parser:Ye,Writer:ye,Store:rt,StoreFactory:$r,EntityIndex:Ur,StreamParser:zr,StreamWriter:Wr,Util:Vi,Reasoner:qr,BaseIRI:bt,DataFactory:te,Term:ee,NamedNode:zt,Literal:Ke,BlankNode:vr,Variable:Sr,DefaultGraph:Er,Quad:Ve,Triple:Ve,termFromId:Qe,termToId:Le};var Ky=(t,e,r)=>{let n=new ni.Parser({blankNodePrefix:"",format:r}),i=Object.create(null);return{quads:n.parse(t,null,(o,a)=>{i[o]=a.id}),prefixes:i}},Vy=t=>new Promise((e,r)=>{let n=new ni.Writer({format:t.type,prefixes:{...t.prefixes}}),i=t.prefixes.xsd,{quad:s,namedNode:o,literal:a,blankNode:l}=ni.DataFactory,u=(m,y)=>{let v=y.a;if(Array.isArray(v)||(v=[v]),v?.length)for(let w of v)w=t.fullURI(w),n.addQuad(s(o(m),o(Bi),o(w)))},d=(m,y)=>{if(!y)return;let v=c(y);for(let w of v){Array.isArray(w.object)||(w.object=[w.object]);for(let A of w.object)n.addQuad(s(o(m),w.predicate,A))}},c=m=>{let y=[];return Object.entries(m).forEach(v=>{let w=v[0],A=v[1],Re=t.fullURI(w),D={predicate:o(Re)};A instanceof Dt?D.object=p(A):Array.isArray(A)?D.object=_(A):A instanceof Ct?D.object=o(A.id):A instanceof ut?D.object=b(A):f(A)?D.object=h(A):console.log("weird object",A,w),y.push(D)}),y},h=m=>{let y=t.getType(m)||null;if(y)y==i+t.context.separator+"string"||y==i+t.context.separator+"number"?y=null:y=t.fullURI(y),y=o(y);else{let v=m?.language;v&&(y=v)}return m instanceof String?m=""+m:m instanceof Number&&(m=+m),a(m,y)},f=m=>m instanceof String||m instanceof Number||typeof m=="boolean"||typeof m=="string"||typeof m=="number",p=m=>{let y=[];for(let v of m)f(v)?y.push(h(v)):v.id?y.push(o(v.id)):y.push(b(v));return n.list(y)},b=m=>n.blank(c(m)),_=(m,y)=>{let v=[];for(let w of y)f(w)?v.push(h(w)):w instanceof Ct?v.push(o(w.id)):w instanceof ut?v.push(b(w)):w instanceof Dt&&v.push(p(w));return v};Object.entries(t.subjects).forEach(([m,y])=>{m=t.shortURI(m,":"),u(m,y),d(m,y)}),n.end((m,y)=>{y?e(y):r(m)})});var lc={context:Mi,...go};globalThis.oldm=lc;var ii=lc;function si(t){t=Object.assign({contentType:"text/turtle",prefixes:{ldp:"http://www.w3.org/ns/ldp#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",dct:"http://purl.org/dc/terms/",stat:"http://www.w3.org/ns/posix/stat#",turtle:"http://www.w3.org/ns/iana/media-types/text/turtle#",schem:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",acl:"http://www.w3.org/ns/auth/acl#",pims:"http://www.w3.org/ns/pim/space#",vcard:"http://www.w3.org/2006/vcard/ns#",foaf:"http://xmlns.com/foaf/0.1/"},parser:ii.n3Parser,writer:ii.n3Writer},t),t.prefixes.ldp||(t.prefixes.ldp="http://www.w3.org/ns/ldp#");let e=ii.context(t);return async function(n,i){if(n.headers.get("Accept")||(n=n.with({headers:{Accept:t.accept??t.contentType}})),n.method!=="GET"&&n.method!=="HEAD"&&n.data&&typeof n.data=="object"&&!(n.data instanceof ReadableStream)){let o=n.headers.get("Content-Type");(!o||isPlainText(o))&&(n=n.with({headers:{"Content-Type":t.contentType}})),uc(n.headers.get("Content-Type"))&&(n=n.with({body:await e.writer(n.data)}))}let s=await i(n);if(s&&uc(s.headers?.get("Content-Type"))){let a=await s.clone().text();try{let l=e.parse(a,n.url,s.headers.get("Content-Type"));return s.with({body:l})}catch{}}return s}}var Yy=[/^text\/turtle\b/,/^application\/n-quads\b/,/^text\/x-nquads\b/,/^appliction\/n-triples\b/,/^application\/trig\b/];function uc(t){for(let e of Yy)if(e.exec(t))return!0;return!1}globalThis.oldmmw=si;var oi=si;var mo={html:{webid:html`
<dialog id="webidDialog" class="webid-dialog">
	<button class="ds-button ds-button-close" data-simply-command="webidClose">
		<svg class="ds-icon ds-icon-feather">
            <use xlink:href="assets/icons/feather-sprite.svg#x"></use>
        </svg>		
	</button>
<form data-simply-command="webidSave">
	<div class="ds-alert ds-alert-error" data-flow-field="webid.error"></div>
	<label>
		Solid WebID
		<input type="url" name="webidURL" placeholder="Enter your WebID">
	</label>
	<p>Don't have a Solid WebID? Request a personal WebID at one of these providers: ....</p>
	<div class="ds-form-buttons">
		<button class="ds-button ds-button-primary">Save</button>
	</div>
</form>
</dialog>
		`},css:{webid:css`
@layer theme {
	:root {
		--ds-dialog-shadow: var(--ds-shadow-large);
		--ds-dialog-radius: var(--ds-box-radius);
		--ds-dialog-backdrop: rgba(0,0,0,0.5);
	}
}
@layer components {
	:root {
		--webid-space: var(--ds-space);
		--webid-dialog-shadow: var(--ds-dialog-shadow);
		--webid-dialog-radius: var(--ds-dialog-radius);
		--webid-dialog-width: 400px;
		--webid-dialog-height: 300px;
		--webid-dialog-backdrop: var(--ds-dialog-backdrop);
	}
	.webid-dialog {
		width: var(--webid-dialog-width);
		height: var(--webid-dialog-height);
		border: 0;
		border-radius: var(--webid-dialog-radius);
		box-shadow: var(--webid-dialog-shadow);
	}
	.webid-dialog::backdrop {
		background: var(--webid-dialog-backdrop);
	}
}
@media screen and (max-width:719px) {
	width: 100vw;
	height: 100vh;
}
		`},commands:{webidDialog:async function(t,e){this.actions.webidErrors(""),document.getElementById("webidDialog").showModal()},webidSave:async function(t,e){if(!e.webidURL){this.actions.webidErrors("Please enter a WebID URL");return}this.state.webid.id=e.webidURL,await this.actions.webidSave(e.webidURL)&&document.getElementById("webidDialog").close()},webidClose:async function(t,e){document.getElementById("webidDialog").close()}},actions:{webidInit:async function(t={}){this.state.webid||(this.state.webid={config:{prefixes:{acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",schema:"http://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#"},parser:oldm.n3Parser}}),Object.assign(this.state.webid.config,t)},webidSave:async function(t){let e;try{if(e=await X.client(X.mw.thrower(),oi(this.state.webid.config),X.mw.getdata()).get(t),e instanceof Response)throw new Error("Error: unexpected response: "+await profile.text());if(!e.primary)throw new Error("Error: no webID found in resource");return this.state.webid.profile=e.primary,!0}catch(r){this.actions.webidErrors(r.message)}return!1},webidErrors:async function(t){this.state.webid.error=t}},hooks:{start:function(t){this.actions.webidInit(),this.container.insertAdjacentHTML("beforeend",t.html.webid)}}};var k=class t{#e;constructor(e){this.#e=t.collapse(e)}get value(){return this.#e}toString(){return this.#e}get length(){return this.#e.length}static collapse(e,r=""){if(e instanceof t)return e.value;if(typeof e!="string")throw new TypeError("path argument must be a string or an instance of Path");if(r&&!(r instanceof t)&&(r=new t(r)),e=e.trim(),e.length===0)return r.value;t.isRelative(e)&&(e=r+e);let n=t.reduce(e,(s,o)=>(o==".."?s.pop():o!=="."&&s.push(o),s),[]),i="/";return n.length&&(i+=n.join("/"),t.isFolder(e)&&(i+="/")),i}static isAbsolute(e){return e instanceof t?!0:e.length&&e[0]==="/"}static isRelative(e){return!t.isAbsolute(e)}static isFolder(e){return e instanceof t&&(e=e.value),e.length&&e[e.length-1]=="/"}static isPath(e){return e instanceof t?!0:typeof e!="string"?!1:(e=e.trim(),new URL(e,document.location).pathname==e)}static reduce(e,r,n){return e instanceof t&&(e=e.value),e.split("/").filter(Boolean).reduce(r,n)}static map(e,r){return e instanceof t&&(e=e.value),e.split("/").filter(Boolean).map(r)}static parent(e){e instanceof t&&(e=e.value),e=e.split("/").filter(Boolean),e.pop();let r="/";return e.length&&(r+=e.join("/")+"/"),r}static filename(e){return e instanceof t&&(e=e.value),e.split("/").filter(Boolean).pop()}static head(e){return e instanceof t&&(e=e.value),e.split("/").filter(Boolean).shift()}static tail(e){e instanceof t&&(e=e.value),e=e.split("/").filter(Boolean),e.shift();let r="/";return e.length&&(r+=e.join("/")+"/"),r}};var Hr=class t{#e;#t="/";constructor(e){this.#e=e,this.#t=this.#e.path}get path(){return this.#t}cd(e){return e instanceof k||(e=new k(k.collapse(e,this.#t))),new t(this.#e.cd(e))}async read(e,r=null){if(e instanceof k||(e=new k(k.collapse(e,this.#t))),typeof r=="function"){if(!this.#e.supportsStreamingRead())throw new Error("Adapter "+this.#e.name+" does not support streaming reading.");return this.#e.readStream(e,r)}else return this.#e.read(e)}async write(e,r,n=null){if(e instanceof k||(e=new k(k.collapse(e,this.#t))),!this.#e.supportsWrite())throw new Error("Adapter "+this.#e.name+" is read only.");if(typeof r=="function"){if(!this.#e.supportsStreamingWrite())throw new Error("Adapter "+this.#e.name+" does not support streaming writing.");return this.#e.writeStream(e,r,n)}else{if(typeof r=="string")return this.#e.write(e,r,n);throw new TypeError("Cannot write contents of type "+typeof r)}}async delete(e){return e instanceof k||(e=new k(k.collapse(e,this.#t))),this.#e.delete(e)}async exists(e){return e instanceof k||(e=new k(k.collapse(e,this.#t))),this.#e.exists(e)}async list(e=""){return e instanceof k||(e=new k(k.collapse(e,this.#t))),this.#e.list(e)}};var Rt=class t{#e;#t;#i;#r;constructor(e,r="/",n=null,i={}){this.#e=new URL(e,window.location.href),this.#t=new k(r),this.#i=n,this.#r=i}get name(){return"HttpAdapter"}get path(){return this.#t}supportsWrite(){return!0}supportsStreamingWrite(){return Jy}supportsStreamingRead(){return!0}cd(e){if(!k.isPath(e))throw new TypeError(e+" is not a valid path");return new t(this.#e.href,e)}async write(e,r,n=null){let i=Object.assign({},this.#r,{method:"PUT",body:r});return this.#n(e,i)}writeStream(e,r,n=null){throw new Error("Not yet implemented")}async read(e){let r=Object.assign({},this.#r,{method:"GET"}),n=await this.#n(e,r),i={type:this.#o(n),name:k.filename(e),http:{headers:n.headers,status:n.status,url:n.url}};return i.type.match(/text\/.*/)?i.contents=await n.text():i.type.match(/application\/json.*/)?i.contents=await n.json():i.contents=await n.blob(),i}readStream(e,r){throw new Error("Not yet implemented")}async exists(e){let r=Object.assign({},this.#r,{method:"HEAD"});return this.#n(e,r)}async delete(e){let r=Object.assign({},this.#r,{method:"DELETE"});return this.#n(e,r)}async list(e){let r=["text/html","text/xhtml","text/xhtml+xml","text/xml"],n=await this.read(e);if(r.includes(n.type.split(";")[0]))var i=n.contents;else{let u=this.#s(e);throw new TypeError("URL "+u+" is not of a supported content type",{cause:n})}let s=k.collapse(this.#e.pathname),o=this.#s(e),a=document.createElement("template");a.innerHTML=i;let l=a.content.querySelectorAll("a[href]");return Array.from(l).map(u=>{let d=new URL(u.getAttribute("href"),o.href);return u.href=d.href,{filename:k.filename(u.pathname),path:u.pathname,name:u.innerText,href:u.href}}).filter(u=>{let d=new URL(u.href);return d.pathname=k.parent(d.pathname),d.href===o.href}).map(u=>({filename:u.filename,path:u.path.substring(s.length-1),name:u.name}))}#s(e){return e=k.collapse(this.#e.pathname+k.collapse(e)),new URL(e,this.#e)}async#n(e,r){return fetch(this.#s(e),r).catch(n=>{if(!this.#i||!this.#i(url,r,n))throw n})}#o(e){return e.headers.has("Content-Type")?e.headers.get("Content-Type"):null}},Jy=(async()=>new Request("",{body:new ReadableStream,method:"POST",duplex:"half"}).headers.has("Content-Type")?!1:fetch("data:a/a;charset=utf-8,",{method:"POST",body:new ReadableStream,duplex:"half"}).then(()=>!0,()=>!1))();var dc={fs:Hr,adapters:{https:Rt},path:k};window.jsfs=dc;var cc=dc;globalThis.assertEnabled=!1;function Y(t,e){if(globalThis.assertEnabled){let r=oe(t,e);if(r)throw console.error("\u{1F170}\uFE0F  Assertions failed because of:",r,"in this source:",t),new Error("Assertions failed",{cause:{problems:r,source:t}})}}function x(t){return function(r,n,i){if(typeof r<"u"&&r!=null&&typeof t<"u")return oe(r,t,n,i)}}function j(t){return function(r,n,i){return r==null||typeof r>"u"?P("data is required",r,t||"any value",i):typeof t<"u"?oe(r,t,n,i):!1}}function Gr(t){return function(r,n,i){return r==null||typeof r>"u"?(Xy("data does not contain recommended value",r,t,i),!1):oe(r,t,n,i)}}function re(...t){return function(r,n,i){for(let s of t)if(!oe(r,s,n,i))return!1;return P("data does not match oneOf patterns",r,t,i)}}function lr(...t){return function(r,n,i){if(!Array.isArray(r))return P("data is not an array",r,"anyOf",i);for(let s of r)if(re(...t)(s))return P("data does not match anyOf patterns",s,t,i);return!1}}function fc(...t){return function(r,n,i){let s=[];for(let o of t)s=s.concat(oe(r,o,n,i));if(s=s.filter(Boolean),s.length)return P("data does not match all given patterns",r,t,i,s)}}function I(t,e,r){try{t instanceof URL&&(t=t.href);let n=new URL(t);if(n.href!=t&&!(n.href+"/"==t||n.href==t+"/"))return P("data is not a valid url",t,"validURL",r)}catch{return P("data is not a valid url",t,"validURL",r)}}function hc(t,e,r){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return P("data is not a valid email",t,"validEmail",r)}function ur(t){return function(r,n,i){if(!(r instanceof t))return P("data is not an instanceof pattern",r,t,i)}}function Qr(t){return function(r,n,i){if(!oe(r,t,n,i))return P("data matches pattern, when required not to",r,t,i)}}function oe(t,e,r,n=""){r||(r=t);let i=[];if(e===Boolean)typeof t!="boolean"&&!(t instanceof Boolean)&&i.push(P("data is not a boolean",t,e,n));else if(e===Number)typeof t!="number"&&!(t instanceof Number)&&i.push(P("data is not a number",t,e,n));else if(e===String)typeof t!="string"&&!(t instanceof String)&&i.push(P("data is not a string",t,e,n)),t==""&&i.push(P("data is an empty string, which is not allowed",t,e,n));else if(e instanceof RegExp)if(Array.isArray(t)){let s=t.findIndex((o,a)=>oe(o,e,r,n+"["+a+"]"));s>-1&&i.push(P("data["+s+"] does not match pattern",t[s],e,n+"["+s+"]"))}else typeof t>"u"?i.push(P("data is undefined, should match pattern",t,e,n)):e.test(t)||i.push(P("data does not match pattern",t,e,n));else if(e instanceof Function){let s=e(t,r,n);s&&(Array.isArray(s)?i=i.concat(s):i.push(s))}else if(Array.isArray(e)){Array.isArray(t)||i.push(P("data is not an array",t,[],n));for(let s of e)for(let o of t.keys()){let a=oe(t[o],s,r,n+"["+o+"]");Array.isArray(a)?i=i.concat(a):a&&i.push(a)}}else if(e&&typeof e=="object")if(Array.isArray(t)){let s=t.findIndex((o,a)=>oe(o,e,r,n+"["+a+"]"));s>-1&&i.push(P("data["+s+"] does not match pattern",t[s],e,n+"["+s+"]"))}else if(!t||typeof t!="object")i.push(P("data is not an object, pattern is",t,e,n));else if(t instanceof URLSearchParams&&(t=Object.fromEntries(t)),e instanceof Function){let s=oe(t,e,r,n);s&&(i=i.concat(s))}else for(let[s,o]of Object.entries(e)){let a=oe(t[s],o,r,n+"."+s);a&&(i=i.concat(a))}else e!=t&&i.push(P("data and pattern are not equal",t,e,n));return i.length?i:!1}function P(t,e,r,n,i){let s={path:n,message:t,found:e,expected:r};return i&&(s.problems=i),s}function Xy(t,e,r,n){console.warn("\u{1F170}\uFE0F  Assert: "+n,t,r,e)}function pc(t){let e,r;if(typeof localStorage<"u")e={get:()=>localStorage.getItem("metro/state:"+t),set:n=>localStorage.setItem("metro/state:"+t,n),has:()=>localStorage.getItem("metro/state:"+t)!==null,delete:()=>localStorage.remoteItem("metro/state:"+t)},r={get:n=>JSON.parse(localStorage.getItem(t+":"+n)),set:(n,i)=>localStorage.setItem(t+":"+n,JSON.stringify(i)),has:n=>localStorage.getItem(t+":"+n)!==null,delete:n=>localStorage.removeItem(t+":"+n)};else{let n=new Map;e={get:()=>n.get("metro/state:"+t),set:i=>n.set("metro/state:"+t,i),has:()=>n.has("metro/state:"+t),delete:()=>n.delete("metro/state:"+t)},r=new Map}return{state:e,tokens:r}}function yo(t){let e={client:fe(),force_authorization:!1,site:"default",oauth2_configuration:{authorization_endpoint:"/authorize",token_endpoint:"/token",redirect_uri:globalThis.document?.location.href,grant_type:"authorization_code",code_verifier:e_(64)},authorize_callback:async d=>(window.location.href!=d.href&&window.location.replace(d.href),!1)};Y(t,{});let r=Object.assign({},e.oauth2_configuration,t?.oauth2_configuration);t=Object.assign({},e,t),t.oauth2_configuration=r;let n=pc(t.site);t.tokens||(t.tokens=n.tokens),t.state||(t.state=n.state),Y(t,{oauth2_configuration:{client_id:j(/.+/),grant_type:"authorization_code",authorization_endpoint:j(I),token_endpoint:j(I),redirect_uri:j(I)}});for(let d in r)switch(d){case"access_token":case"authorization_code":case"refresh_token":t.tokens.set(d,r[d]);break}return async function(d,c){if(t.force_authorization)return i(d,c);let h;try{if(h=await c(d),h.ok)return h}catch(f){switch(h?.status){case 400:case 401:return i(d,c)}throw f}if(!h.ok)switch(h.status){case 400:case 401:return i(d,c)}return h};async function i(d,c){s();let h=t.tokens.get("access_token"),f=t.tokens.get("refresh_token"),p=Zy(h);if(!h||p&&!f){try{if(!await o())return Ot("false")}catch(b){throw b}return i(d,c)}else if(p&&f){try{if(!await a())return Ot("false")}catch(b){throw b}return i(d,c)}else return d=lt(d,{headers:{Authorization:h.type+" "+h.value}}),c(d)}function s(){if(typeof window<"u"&&window?.location){let d=K(window.location),c,h,f;if(d.searchParams.has("code"))f=d.searchParams,d=d.with({search:""}),history.pushState({},"",d.href);else if(d.hash){let p=d.hash.substr(1);f=new URLSearchParams("?"+p),d=d.with({hash:""}),history.pushState({},"",d.href)}if(f){c=f.get("code"),h=f.get("state");let p=t.state.get("metro/state");if(!h||h!==p)return;c&&t.tokens.set("authorization_code",c)}}}async function o(){if(r.grant_type==="authorization_code"&&!t.tokens.has("authorization_code")){let f=await l();if(!t.authorize_callback||typeof t.authorize_callback!="function")throw W("oauth2mw: oauth2 with grant_type:authorization_code requires a callback function in client options.authorize_callback");let p=await t.authorize_callback(f);if(p)t.tokens.set("authorization_code",p);else return!1}let d=u(),c=await t.client.post(d);if(!c.ok){let f=await c.text();throw W("OAuth2mw: fetch access_token: "+c.status+": "+c.statusText,{cause:d})}let h=await c.json();if(t.tokens.set("access_token",{value:h.access_token,expires:bc(h.expires_in),type:h.token_type,scope:h.scope}),h.refresh_token){let f={value:h.refresh_token};t.tokens.set("refresh_token",f)}return t.tokens.delete("authorization_code"),h}async function a(){let d=u("refresh_token"),c=await t.client.post(d);if(!c.ok)throw W("OAuth2mw: refresh access_token: "+c.status+": "+c.statusText,{cause:d});let h=await c.json();if(t.tokens.set("access_token",{value:h.access_token,expires:bc(h.expires_in),type:h.token_type,scope:h.scope}),h.refresh_token){let f={value:h.refresh_token};t.tokens.set("refresh_token",f)}else return!1;return h}async function l(){if(!r.authorization_endpoint)throw W("oauth2mw: Missing options.oauth2_configuration.authorization_endpoint");let d=K(r.authorization_endpoint,{hash:""});Y(r,{client_id:/.+/,redirect_uri:/.+/,scope:/.*/});let c={response_type:"code",client_id:r.client_id,redirect_uri:r.redirect_uri,state:r.state||r_(40)};return r.response_type&&(c.response_type=r.response_type),r.response_mode&&(c.response_mode=r.response_mode),t.state.set(c.state),r.client_secret&&(c.client_secret=r.client_secret),r.code_verifier&&(t.tokens.set("code_verifier",r.code_verifier),c.code_challenge=await t_(r.code_verifier),c.code_challenge_method="S256"),r.scope&&(c.scope=r.scope),r.prompt&&(c.prompt=r.prompt),K(d,{search:c})}function u(d=null){if(Y(r,{client_id:/.+/,redirect_uri:/.+/}),!r.token_endpoint)throw W("oauth2mw: Missing options.endpoints.token url");let c=K(r.token_endpoint,{hash:""}),h={grant_type:d||r.grant_type,client_id:r.client_id};switch(r.client_secret&&(h.client_secret=r.client_secret),r.scope&&(h.scope=r.scope),h.grant_type){case"authorization_code":h.redirect_uri=r.redirect_uri,h.code=t.tokens.get("authorization_code");let f=t.tokens.get("code_verifier");f&&(h.code_verifier=f);break;case"client_credentials":break;case"refresh_token":let p=t.tokens.get("refresh_token");h.refresh_token=p.value;break;default:throw new Error("Unknown grant_type: ".oauth2.grant_type)}return lt(c,{method:"POST",body:new URLSearchParams(h)})}}function Zy(t){if(!t)return!0;let e=new Date(t.expires);return new Date().getTime()>e.getTime()}function bc(t){if(t instanceof Date)return new Date(t.getTime());if(typeof t=="number"){let e=new Date;return e.setSeconds(e.getSeconds()+t),e}throw new TypeError("Unknown expires type "+t)}function e_(t=64){let e=new Uint8Array(t);return globalThis.crypto.getRandomValues(e),gc(e)}async function t_(t){let r=new TextEncoder().encode(t),n=await globalThis.crypto.subtle.digest("SHA-256",r);return gc(n)}function gc(t){let e=Array.from(new Uint8Array(t),r=>String.fromCharCode(r)).join("");return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function r_(t){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r="",n=0;for(;n<t;)r+=e.charAt(Math.floor(Math.random()*e.length)),n++;return r}function mc(){let t=new URL(document.location.href);if(!t.searchParams.has("code")){if(t.hash){let e=t.hash.substr(1);if(params=new URLSearchParams("?"+e),params.has("code"))return!0}return!1}return!0}function _o(){return new Promise((t,e)=>{let r=globalThis.indexedDB.open("metro",1);r.onupgradeneeded=()=>r.result.createObjectStore("keyPairs",{keyPath:"domain"}),r.onerror=n=>{e(n)},r.onsuccess=n=>{let i=n.target.result;t({set:function(s,o){return new Promise((a,l)=>{let u=i.transaction("keyPairs","readwrite",{durability:"strict"}),d=u.objectStore("keyPairs");u.oncomplete=()=>{a()},u.onerror=l,d.put(s,o)})},get:function(s){return new Promise((o,a)=>{let l=i.transaction("keyPairs","readonly"),d=l.objectStore("keyPairs").get(s);d.onsuccess=()=>{o(d.result)},d.onerror=a,l.onerror=a})},clear:function(){return new Promise((s,o)=>{let a=i.transaction("keyPairs","readwrite"),u=a.objectStore("keyPairs").clear();u.onsuccess=()=>{s()},u.onerror=o,a.onerror=o})}})}})}var i_=new TextEncoder,s_=new TextDecoder;function ai(t){return typeof t=="string"?i_.encode(t):s_.decode(t)}function yc(t){if(typeof t.modulusLength!="number"||t.modulusLength<2048)throw new wo(`${t.name} modulusLength must be at least 2048 bits`)}function o_(t){switch(t.algorithm.name){case"ECDSA":return{name:t.algorithm.name,hash:"SHA-256"};case"RSA-PSS":return yc(t.algorithm),{name:t.algorithm.name,saltLength:32};case"RSASSA-PKCS1-v1_5":return yc(t.algorithm),{name:t.algorithm.name};case"Ed25519":return{name:t.algorithm.name}}throw new nt}async function a_(t,e,r){if(r.usages.includes("sign")===!1)throw new TypeError('private CryptoKey instances used for signing assertions must include "sign" in their "usages"');let n=`${Kr(ai(JSON.stringify(t)))}.${Kr(ai(JSON.stringify(e)))}`,i=Kr(await crypto.subtle.sign(o_(r),r,ai(n)));return`${n}.${i}`}var _c=32768;function l_(t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));let e=[];for(let r=0;r<t.byteLength;r+=_c)e.push(String.fromCharCode.apply(null,t.subarray(r,r+_c)));return btoa(e.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Kr(t){return l_(t)}function u_(){return Kr(crypto.getRandomValues(new Uint8Array(32)))}var nt=class extends Error{constructor(e){super(e??"operation not supported"),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}},wo=class extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}};function d_(t){switch(t.algorithm.hash.name){case"SHA-256":return"PS256";default:throw new nt("unsupported RsaHashedKeyAlgorithm hash name")}}function c_(t){switch(t.algorithm.hash.name){case"SHA-256":return"RS256";default:throw new nt("unsupported RsaHashedKeyAlgorithm hash name")}}function f_(t){switch(t.algorithm.namedCurve){case"P-256":return"ES256";default:throw new nt("unsupported EcKeyAlgorithm namedCurve")}}function h_(t){switch(t.algorithm.name){case"RSA-PSS":return d_(t);case"RSASSA-PKCS1-v1_5":return c_(t);case"ECDSA":return f_(t);case"Ed25519":return"EdDSA";default:throw new nt("unsupported CryptoKey algorithm name")}}function wc(t){return t instanceof CryptoKey}function p_(t){return wc(t)&&t.type==="private"}function b_(t){return wc(t)&&t.type==="public"}function g_(){return Math.floor(Date.now()/1e3)}async function li(t,e,r,n,i,s){let o=t?.privateKey,a=t?.publicKey;if(!p_(o))throw new TypeError('"keypair.privateKey" must be a private CryptoKey');if(!b_(a))throw new TypeError('"keypair.publicKey" must be a public CryptoKey');if(a.extractable!==!0)throw new TypeError('"keypair.publicKey.extractable" must be true');if(typeof e!="string")throw new TypeError('"htu" must be a string');if(typeof r!="string")throw new TypeError('"htm" must be a string');if(n!==void 0&&typeof n!="string")throw new TypeError('"nonce" must be a string or undefined');if(i!==void 0&&typeof i!="string")throw new TypeError('"accessToken" must be a string or undefined');if(s!==void 0&&(typeof s!="object"||s===null||Array.isArray(s)))throw new TypeError('"additional" must be an object');return a_({alg:h_(o),typ:"dpop+jwt",jwk:await m_(a)},{...s,iat:g_(),jti:u_(),htm:r,nonce:n,htu:e,ath:i?Kr(await crypto.subtle.digest("SHA-256",ai(i))):void 0},o)}async function m_(t){let{kty:e,e:r,n,x:i,y:s,crv:o}=await crypto.subtle.exportKey("jwk",t);return{kty:e,crv:o,e:r,n,x:i,y:s}}async function xc(t,e){let r;if(typeof t!="string"||t.length===0)throw new TypeError('"alg" must be a non-empty string');switch(t){case"PS256":r={name:"RSA-PSS",hash:"SHA-256",modulusLength:e?.modulusLength??2048,publicExponent:new Uint8Array([1,0,1])};break;case"RS256":r={name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:e?.modulusLength??2048,publicExponent:new Uint8Array([1,0,1])};break;case"ES256":r={name:"ECDSA",namedCurve:"P-256"};break;case"EdDSA":r={name:"Ed25519"};break;default:throw new nt}return crypto.subtle.generateKey(r,e?.extractable??!1,["sign","verify"])}function xo(t){return Y(t,{site:j(I),authorization_endpoint:j(I),token_endpoint:j(I),dpop_signing_alg_values_supported:x([])}),async(e,r)=>{let n=await _o(),i=await n.get(t.site);if(!i){let a=await xc("ES256");i={domain:t.site,keyPair:a},await n.set(i)}let s=X.url(e.url);if(e.url.startsWith(t.authorization_endpoint)){let a=e.body;a instanceof URLSearchParams||a instanceof FormData?a.set("dpop_jkt",i.keyPair.publicKey):a.dpop_jkt=i.keyPair.publicKey}else if(e.url.startsWith(t.token_endpoint)){let a=await li(i.keyPair,e.url,e.method);e=e.with({headers:{DPoP:a}})}else if(e.headers.has("Authorization")){let a=localStorage.getItem(s.host+":nonce")||void 0,l=e.headers.get("Authorization").split(" ")[1],u=await li(i.keyPair,e.url,e.method,a,l);e=e.with({headers:{Authorization:"DPoP "+l,DPoP:u}})}let o=await r(e);return o.headers.get("DPoP-Nonce")&&localStorage.setItem(s.host+":nonce",o.headers.get("DPoP-Nonce")),o}}var Vr=(...t)=>(e,r)=>t.filter(n=>r.hasOwnKey(n)).length>0?!1:P("root data must have all of",r,t),it=(...t)=>e=>Array.isArray(e)&&t.filter(r=>!e.includes(r)).length==0?!1:P("data must be an array which includes",e,t);var ce=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512"],ui=["client_secret_post","client_secret_basic","client_secret_jwt","private_key_jwt"];async function Yr(t={}){Y(t,{client:x(ur(X.client().constructor)),issuer:j(I)});let e={client:X.client().with(pe()).with(he()),requireDynamicRegistration:!1};t=Object.assign({},e,t);let r=!1;function n(l){return r}let i={issuer:j(fc(t.issuer,n)),authorization_endpoint:j(I),token_endpoint:j(I),userinfo_endpoint:Gr(I),jwks_uri:j(I),registration_endpoint:t.requireDynamicRegistration?j(I):Gr(I),scopes_supported:Gr(it("openid")),response_types_supported:t.requireDynamicRegistration?j(it("code","id_token","id_token token")):j([]),response_modes_supported:x([]),grant_types_supported:t.requireDynamicRegistration?x(it("authorization_code")):x([]),acr_values_supported:x([]),subject_types_supported:j([]),id_token_signing_alg_values_supported:j(it("RS256")),id_token_encryption_alg_values_supported:x([]),id_token_encryption_enc_values_supported:x([]),userinfo_signing_alg_values_supported:x([]),userinfo_encryption_alg_values_supported:x([]),userinfo_encryption_enc_values_supported:x([]),request_object_signing_alg_values_supported:x(it("RS256")),request_object_encryption_alg_values_supported:x([]),request_object_encryption_enc_values_supported:x([]),token_endpoint_auth_methods_supported:x(lr(...ui)),token_endpoint_auth_signing_alg_values_supported:x(it("RS256"),Qr(it("none"))),display_values_supported:x(lr("page","popup","touch","wap")),claim_types_supported:x(lr("normal","aggregated","distributed")),claims_supported:Gr([]),service_documentation:x(I),claims_locales_supported:x([]),ui_locales_supported:x([]),claims_parameter_supported:x(Boolean),request_parameter_supported:x(Boolean),request_uri_parameter_supported:x(Boolean),op_policy_uri:x(I),op_tos_uri:x(I)},s=X.url(t.issuer,".well-known/openid-configuration"),a=(await t.client.get(s)).data;return Y(a,i),Y(a.issuer,t.issuer),a}async function Jr(t){let e={redirect_uris:j([I]),response_types:x([]),grant_types:x(lr("authorization_code","refresh_token")),application_type:x(re("native","web")),contacts:x([hc]),client_name:x(String),logo_uri:x(I),client_uri:x(I),policy_uri:x(I),tos_uri:x(I),jwks_uri:x(I,Qr(Vr("jwks"))),jwks:x(I,Qr(Vr("jwks_uri"))),sector_identifier_uri:x(I),subject_type:x(String),id_token_signed_response_alg:x(re(...ce)),id_token_encrypted_response_alg:x(re(...ce)),id_token_encrypted_response_enc:x(re(...ce),Vr("id_token_encrypted_response_alg")),userinfo_signed_response_alg:x(re(...ce)),userinfo_encrypted_response_alg:x(re(...ce)),userinfo_encrypted_response_enc:x(re(...ce),Vr("userinfo_encrypted_response_alg")),request_object_signing_alg:x(re(...ce)),request_object_encryption_alg:x(re(...ce)),request_object_encryption_enc:x(re(...ce)),token_endpoint_auth_method:x(re(...ui)),token_endpoint_auth_signing_alg:x(re(...ce)),default_max_age:x(Number),require_auth_time:x(Boolean),default_acr_values:x([String]),initiate_login_uri:x([I]),request_uris:x([I])};Y(t,{client:x(ur(X.client().constructor)),registration_endpoint:I,client_info:e});let r={client:X.client().with(pe()).with(he()),client_info:{redirect_uris:[globalThis.document?.location.href]}};t=Object.assign({},r,t),t.client_info||(t.client_info={}),t.client_info.redirect_uris||(t.client_info.redirect_uris=[globalThis.document?.location.href]);let n=await t.client.post(t.registration_endpoint,{body:t.client_info}),i=n.data;if(!i.client_id||!i.client_secret)throw X.metroError("metro.oidc: Error: dynamic registration of client failed, no client_id or client_secret returned",n);return t.client_info=Object.assign(t.client_info,i),t.client_info}function di(t){let e;if(typeof localStorage<"u")e={get:r=>JSON.parse(localStorage.getItem("metro/oidc:"+t+":"+r)),set:(r,n)=>localStorage.setItem("metro/oidc:"+t+":"+r,JSON.stringify(n)),has:r=>localStorage.getItem("metro/oidc:"+t+":"+r)!==null};else{let r=new Map;e={get:n=>JSON.parse(r.get("metro/oidc:"+t+":"+n)||null),set:(n,i)=>r.set("metro/oidc:"+t+":"+n,JSON.stringify(i)),has:n=>r.has("metro/oidc:"+t+":"+n)}}return e}function vo(t={}){let e={client:fe(),force_authorization:!1,use_dpop:!0,authorize_callback:async r=>(window.location.href!=r.href&&window.location.replace(r.href),!1)};return t=Object.assign({},e,t),Y(t,{client:j(ur(fe().constructor)),client_info:j(),issuer:j(I),oauth2:x({}),openid_configuration:x()}),t.store||(t.store=di(t.issuer)),!t.openid_configuration&&t.store.has("openid_configuration")&&(t.openid_configuration=t.store.get("openid_configuration")),!t.client_info?.client_id&&t.store.has("client_info")&&(t.client_info=t.store.get("client_info")),async(r,n)=>{let i;if(!t.force_authorization){try{i=await n(r)}catch(u){if(i.status!=401&&i.status!=403)throw u}if(i.ok||i.status!=401&&i.status!=403)return i}if(t.openid_configuration||(t.openid_configuration=await Yr({issuer:t.issuer}),t.store.set("openid_configuration",t.openid_configuration)),!t.client_info?.client_id){if(!t.openid_configuration.registration_endpoint)throw W("metro.oidcmw: Error: issuer "+t.issuer+" does not support dynamic client registration, but you haven't specified a client_id");t.client_info=await Jr({registration_endpoint:t.openid_configuration.registration_endpoint,client_info:t.client_info}),t.store.set("client_info",t.client_info)}let s=t.scope||"openid",o=Object.assign({site:t.issuer,client:t.client,force_authorization:!0,authorize_callback:t.authorize_callback,oauth2_configuration:{client_id:t.client_info?.client_id,client_secret:t.client_info?.client_secret,grant_type:"authorization_code",response_type:"code",response_mode:"query",authorization_endpoint:t.openid_configuration.authorization_endpoint,token_endpoint:t.openid_configuration.token_endpoint,scope:s,redirect_uri:t.client_info.redirect_uris[0]}}),a=async(u,d)=>{let c=await d(u);if(c.headers.get("content-type")?.startsWith("application/json")){let f=c.data?.id_token;if(!f){let p=c.clone();try{let b=await p.json();b&&b.id_token&&(f=b.id_token)}catch{}}f&&t.store.set("id_token",f)}return c},l=t.client.with(t.issuer).with(a);if(t.use_dpop){let u={site:t.issuer,authorization_endpoint:t.openid_configuration.authorization_endpoint,token_endpoint:t.openid_configuration.token_endpoint,dpop_signing_alg_values_supported:t.openid_configuration.dpop_signing_alg_values_supported};l=l.with(xo(u)),o.client=l}return l=l.with(yo(o)),i=await l.fetch(r),i}}function vc(){return mc()}function Sc(t){if(!t.store){if(!t.issuer)throw W("Must supply options.issuer or options.store to get the id_token");t.store=di(t.issuer)}return t.store.get("id_token")}var Ec={oidcmw:vo,discover:Yr,register:Jr,isRedirected:vc,idToken:Sc};globalThis.metro.oidc||(globalThis.metro.oidc=Ec);var kc=Ec;function Ie(t){return[String,Boolean,Number,BigInt].includes(t?.constructor)}function So(t){let e=[];if(t instanceof Function)e.push(t);else for(let[r,n]of Object.entries(t))n instanceof Function?e.push(i=>({[r]:n(i,r,"select")})):Ie(n)?e.push(()=>({[r]:n})):e.push(i=>({[r]:Zr(i[r]).select(n)}));return e.length==1?e[0]:r=>{let n={};for(let i of e)Object.assign(n,i(r));return n}}function Eo(t){let e=[];if(Array.isArray(t))e.push(x_(...t));else if(t instanceof RegExp)e.push(r=>t.test(r));else if(t instanceof Function)e.push(r=>t(r));else if(Ie(t))e.push(r=>Array.isArray(r)?r.filter(n=>t==n).length>0:t==r);else{let r={};for(let[i,s]of Object.entries(t))r[i]=Eo(s);let n=i=>{if(Array.isArray(i))return i.filter(s=>n(s)).length>0;if(Ie(i))return!1;for(let s in r){let o=r[s];if(!o(i?.[s]))return!1}return!0};e.push(n)}return e.length==1?e[0]:r=>{for(let n of e)if(!n(r))return!1;return!0}}var y_=Symbol("asc"),__=Symbol("desc");function Ac(t){let e=Object.entries(t),r=[];for(let[n,i]of e)if(i instanceof Function)r.push(i);else if(i===y_)r.push((s,o)=>s[n]>o[n]?1:s[n]<o[n]?-1:0);else if(i===__)r.push((s,o)=>s[n]<o[n]?1:s[n]>o[n]?-1:0);else{if(Ie(i))throw new Error("Unknown sort order",i);{let s=Ac(i);r.push((o,a)=>s(o[n],a[n]))}}return r.length==1?r[0]:(n,i)=>{for(let s of r){let o=s(n,i);if(o!==0)return o}return 0}}function Tc(t){let e=[];if(t instanceof Function)e.push(t);else for(let[r,n]of Object.entries(t))n instanceof Function?e.push((i,s,o,a)=>(Ie(i)&&(i={}),s.reduce?i[r]=s.reduce(n,i[r]||[]):i[r]=n(i[r]||[],s,o,a),i)):Ie(n)?e.push(i=>(Ie(i)&&(i={}),i[r]=n,i)):e.push((i,s)=>(Ie(i)&&(i={}),i[r]=Zr(s[r]).reduce(n,[]),i));return e.length==1?e[0]:(r,n,i,s)=>{let o={};for(let a of e)Object.assign(o,a(r,n,i,s));return o}}function w_(t,e){let r={};for(let n of t){let i=e(n);Array.isArray(i)||(i=[i]);for(let s of i){if(typeof s!="string"&&!(s instanceof String)){console.warn("JAQT: groupBy(selector) can only handle string values, got:",s);continue}r[s]||(r[s]=[]),r[s].push(n)}}return r}function Ic(t,e){let r=e.shift(),n=w_(t,r);if(e.length)for(let i in n)n[i]=Ic(n[i],e);return n}function x_(...t){let e=t.map(r=>Eo(r));return r=>e.some(n=>n(r))}var v_={apply(t,e,r){let n=t.apply(e,r);return typeof n=="object"?new Proxy(n,Fe):n}},Fe={get(t,e){let r=null;if(typeof e=="symbol"&&(r=t[e]),Array.isArray(t))switch(e){case"where":r=function(n){let i=Eo(n);return new Proxy(t.filter(s=>i(s)),Fe)};break;case"select":r=function(n){let i=So(n);return new Proxy(t.map(i),Fe)};break;case"reduce":r=function(n,i=[]){let s=Tc(n),o=t.reduce(s,i);return Array.isArray(o)?new Proxy(o,Fe):Ie(o)?o:new Proxy(o,Xr)};break;case"orderBy":r=function(n){let i=Ac(n);return new Proxy(t.toSorted(i),Fe)};break;case"groupBy":r=function(...n){let i=Ic(t,n);return new Proxy(i,Xr)};break}return!r&&t&&typeof t=="object"&&e==="select"&&(r=function(n){let i=So(n);return new Proxy(i(t),Fe)}),!r&&t&&typeof t[e]=="function"&&(r=new Proxy(t[e],v_)),r||(r=t[e]),r}},Xr={get(t,e){let r=null;switch(e){case"select":r=function(n){let i=So(n),s={};for(let o in t)Array.isArray(t[o])?s[o]=new Proxy(t[o].map(i),Fe):s[o]=new Proxy(t[o],Xr);return s};break;case"reduce":r=function(n,i=[]){let s=Tc(n),o={};for(let a in t)if(Array.isArray(t[a])){let l=t[a].reduce(s,i);Array.isArray(l)?o[a]=new Proxy(l,Fe):Ie(l)?o[a]=l:o[a]=new Proxy(l,Xr)}else o[a]=new Proxy(t[a],Xr);return o};break;default:Array.isArray(t[e])?r=Zr(t[e]):r=t[e];break}return r}},ci={get(t,e){let r=null;switch(e){case"where":r=function(){return new Proxy(new dr,ci)};break;case"reduce":case"select":r=function(){return null};break;case"orderBy":r=function(){return new Proxy(new dr,ci)};break;case"groupBy":r=function(){return new Proxy(new dr,ci)};break}return!r&&typeof t?.[e]=="function"&&(r=t[e]),r}},dr=class{toJSON(){return null}};function Zr(t){return!t||typeof t!="object"?new Proxy(new dr,ci):new Proxy(t,Fe)}function ko(t){return(e,r)=>{if(t?.length>0){let n=t.slice(),i=n.shift();for(;i;){if(Array.isArray(e)&&parseInt(i)!=i)return n.unshift(i),e.map(ko(n));typeof e?.[i]<"u"?e=e[i]:e=null,i=n.shift()}return e}else return r?typeof e?.[r]<"u"?e[r]:null:e}}var Rc=t=>(t||(t=[]),{get(e,r){if(r=="constructor"||typeof r=="symbol")return e[r];let n=t.concat([r]);return new Proxy(ko(n),Rc(n))},apply(e,r,n){let i=e(...n);return Array.isArray(i)&&(i=i.flat(1/0)),i}}),Xx=new Proxy(ko(),Rc());var en=class extends Rt{#e;#t;constructor(e,r="/",n={}){this.#e=fe(e).with(kc.oidcmw(n)).with(oi(n)),this.#t=new k(r)}get name(){return"SolidAdapter"}async list(e){let r=["text/turtle"],n=await this.read(e);if(n.data)Zr(n.data).where({a:"ldp$Resource"}).select({filename:i=>jsfs.path.filename(metro.url(i.id).pathname),path:i=>metro.url(i.id).pathname,type:i=>i.a.includes("ldp$Container")?"folder":"file"});else throw new Error(e+" could not be parsed",{cause:n})}};var jc={actions:{solidFSInit:async function(t,e){this.jsfs=new cc.fs(new en(t,"/",e))}}};var Nc={css:{dsImport:css`@import url('https://fonts.googleapis.com/css2?family=Alegreya+Sans:ital,wght@0,100;0,300;0,700;1,100;1,300;1,700&family=Quicksand:wght@300..700&display=swap');`,dsLayers:css`@layer reset, setup, theme, base, component, page, utility;`,dsReset:css`@layer reset {
    body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,p,blockquote,th,td {
        margin:0; 
        padding:0; 
    }
    img {
        max-width: 100%;
        display: block;
    }
    * {
        box-sizing: border-box;
    }
}`,dsColors:css`@layer setup {
  :root {
    --ds-black: #000;
    --ds-white: #FFF;
    --ds-primary: oklch(0.7388 0.1792 126.69);
    --ds-primary-90: oklch( from var(--ds-primary) max(0.7,l) c h);
    --ds-primary-10: oklch( from var(--ds-primary) min(0.4,l) c h);
    --ds-primary-high: oklch( from var(--ds-primary) max(0.7, l) c h);
    --ds-primary-low: oklch( from var(--ds-primary) min(0.4,l) c h);
    --ds-primary-contrast: white;
    --ds-support: #d9edf7;
    --ds-support-90: #bce8f1;
    --ds-support-10: #d9edf7;
    --ds-support-low: var(--ds-support-10);
    --ds-support-high: var(--ds-support-90);
    --ds-support-contrast: var(--ds-black);
    /* http://www.colorbox.io/#steps=11#hue_start=198#hue_end=198#hue_curve=linear#sat_start=15#sat_end=15#sat_curve=linear#sat_rate=130#lum_start=98#lum_end=0#lum_curve=easeOutQuad#lock_hex=eef1f8#minor_steps_map=0 */
    --ds-grey-0: #eef1f8;
    --ds-grey-5: #e9edf6;
    --ds-grey-10: #e4eaf4;
    --ds-grey-20: #dae2ed;
    --ds-grey-30: #cdd7e3;
    --ds-grey-40: #bdc8d4;
    --ds-grey-50: #a8b4c0;
    --ds-grey-60: #8f9ba6;
    --ds-grey-70: #707c84;
    --ds-grey-80: #4d565c;
    --ds-grey-90: #262c2f;
    --ds-grey-100: #000000;
    --ds-grey-high: var(--ds-grey-90);
    --ds-grey-medium: var(--ds-grey-60);
    --ds-grey-low: var(--ds-grey-0);

    --ds-color-error: rgb(253, 143, 143);
    --ds-color-warning: #FFFFCC;
    --ds-color-info: rgb(140, 180, 250);
  }

  :root {
    --ds-light-color: var(--ds-black);
    --ds-light-color-background: var(--ds-white);
    --ds-light-link-color: var(--ds-primary-high);
    --ds-light-link-color-visited: var(--ds-grey-medium);
    --ds-light-link-color-hover: var(--ds-primary-low);
    --ds-light-link-color-active: var(--ds-primary-low);

    --ds-dark-color: var(--ds-white);
    --ds-dark-color-background: var(--ds-grey-high);
    --ds-dark-link-color: var(--ds-primary-low);
    --ds-dark-link-color-visited: var(--ds-grey-medium);
    --ds-dark-link-color-hover: var(--ds-primary);
    --ds-dark-link-color-active: var(--ds-primary);
  }
}
@layer base {
  @property --channel {
    syntax: "*";
    inherits: false;
    initial-value: clamp(0, (
      (
        (r * .299) + (g * .587) + (b * .114)
      ) - 128
    ) * -1000, 255);
  }
  
  :root, .ds-lightmode {
    --ds-color: var(--ds-light-color);
    --ds-color-background: var(--ds-light-color-background);
    --ds-link-color: var(--ds-light-link-color);
    --ds-link-color-visited: var(--ds-light-link-color-visited);
    --ds-link-color-hover: var(--ds-light-link-color-hover);
    --ds-link-color-active: var(--ds-light-link-color-active);	
  }
  .ds-darkmode {
    --ds-color: var(--ds-dark-color);
    --ds-color-background: var(--ds-dark-color-background);
    --ds-link-color: var(--ds-dark-link-color);
    --ds-link-color-visited: var(--ds-dark-link-color-visited);
    --ds-link-color-hover: var(--ds-dark-link-color-hover);
    --ds-link-color-active: var(--ds-dark-link-color-active);
    --ds-grey-high: var(--ds-grey-0);
    --ds-grey-medium: var(--ds-grey-60);
    --ds-grey-low: var(--ds-grey-80);
    --ds-support-high: var(--ds-support-10);
    --ds-support-low: var(--ds-support-90);
    --ds-primary-high: var(--ds-primary-10);
    --ds-primary-low: var(--ds-primary-90);
  }
  @media (prefers-color-scheme: dark) {
    .ds-darkmode-auto {
      --ds-color: var(--ds-dark-color);
      --ds-color-background: var(--ds-dark-color-background);
      --ds-link-color: var(--ds-dark-link-color);
      --ds-link-color-visited: var(--ds-dark-link-color-visited);
      --ds-link-color-hover: var(--ds-dark-link-color-hover);
      --ds-link-color-active: var(--ds-dark-link-color-active);
      --ds-grey-high: var(--ds-grey-0);
      --ds-grey-medium: var(--ds-grey-60);
      --ds-grey-low: var(--ds-grey-80);
      --ds-support-high: var(--ds-support-10);
      --ds-support-low: var(--ds-support-90);
      --ds-primary-high: var(--ds-primary-10);
      --ds-primary-low: var(--ds-primary-90);
    }
  }
  :root, .ds-darkmode, .ds-lightmode, .ds-darkmode-auto {
    --ds-color-contrast: rgb(from var(--ds-color-background) var(--channel) var(--channel) var(--channel));
    --ds-primary-gradient: linear-gradient( to bottom, var(--ds-primary-low), var(--ds-primary-high) );
    --ds-support-gradient: linear-gradient( to bottom, var(--ds-support-low), var(--ds-support-high) );
    color: var(--ds-color-contrast);
    background-color: var(--ds-color-background);
  }
}
@layer base {
  a:link {
    color: var(--ds-link-color);
  }
  a:visited {
    color: var(--ds-link-color-visited);
  }
  a.ds-link-hover,
  a:hover {
    color: var(--ds-link-color-hover);
  }
  a.ds-link-active,
  a:active {
    color: var(--ds-link-color-active);
  }
}
@layer utility {
  .ds-bg-primary, .ds-bg-primary-gradient {
      --ds-color-background: var(--ds-primary);
  }
  .ds-bg-support, .ds-bg-support-gradient {
      --ds-color-background: var(--ds-support);
  }
  .ds-bg-grey-low {
      --ds-color-background: var(--ds-grey-low);
  }
  .ds-bg-grey-medium {
      --ds-color-background: var(--ds-grey-medium);
  }
  .ds-bg-grey-high {
      --ds-color-background: var(--ds-grey-high);
  }
  .ds-bg-black {
      --ds-color-background: var(--ds-black);
  }
  .ds-bg-primary, .ds-bg-primary-gradient, 
  .ds-bg-support, .ds-bg-support-gradient,
  .ds-bg-grey-high, .ds-bg-grey-medium, .ds-bg-grey-low,
  .ds-black {
      --ds-color-contrast: rgb(from var(--ds-color-background) var(--channel) var(--channel) var(--channel));
      background: var(--ds-color-background);
      color: var(--ds-color-contrast);
  }
  .ds-bg-primary-gradient {
      background: var(--ds-primary-gradient);
  }
  .ds-bg-support-gradient {
      background: var(--ds-support-gradient);
  }

  .ds-color-primary {
      color: var(--ds-primary);
  }
  .ds-color-primary-high {
      color: var(--ds-primary-high);
  }
  .ds-color-support {
      color: var(--ds-support);
  }
  .ds-color-grey-low {
      color: var(--ds-grey-low);
  }
  .ds-color-grey-medium {
      color: var(--ds-grey-medium);
  }
  .ds-color-grey-high {
      color: var(--ds-grey-high);
  }
}`,dsSpace:css`@layer theme {
    :root {
        --ds-space: var(--ds-line-height);
    }
}
@layer base {
    :root {
        --ds-space-d4: calc(var(--ds-space) / 4);
        --ds-space-d3: calc(var(--ds-space) / 3);
        --ds-space-d2: calc(var(--ds-space) / 2);
        --ds-space-x2: calc(2 * var(--ds-space));
        --ds-space-x3: calc(3 * var(--ds-space));
        --ds-space-x4: calc(4 * var(--ds-space));
    }
}
@layer utility {
    @supports (display: flow-root) {
        .ds-space-contain {
            display: flow-root;
        }
    }
    @supports not (display: flow-root) {
        .ds-space-contain {
            padding: 0.05px;
        }
    }
    .ds-no-space {
        margin: 0;
    }
    .ds-space {
        margin: var(--ds-space);
    }
    .ds-space-vertical {
        margin: var(--ds-space) 0;
    }
    .ds-space-horizontal {
        margin-inline-start: var(--ds-space);
        margin-inline-end: var(--ds-space);
    }
    .ds-space-left {
        margin-inline-start: var(--ds-space);
    }
    .ds-space-right {
        margin-inline-end: var(--ds-space);
    }
    .ds-space-top {
        margin-block-start: var(--ds-space);
    }
    .ds-space-bottom {
        margin-block-end: var(--ds-space);
    }

    .ds-space-inside-horizontal,
    .ds-space-inside {
      padding: 0 var(--ds-space);
    }

    /* FIXME: this seems broken check out why */
    .ds-space-inside-vertical::befofe,
    .ds-space-inside-vertical::after,
    .ds-space-inside::before,
    .ds-space-inside::after {
      content: "";
      display: block;
      height: 0;
    }
    .ds-space-inside-vertical::before,
    .ds-space-inside::before {
      margin-block-end: var(--ds-space);
    }
    .ds-space-inside-vertical::after,
    .ds-space-inside::after {
      margin-block-start: var(--ds-space);
    }
}`,dsFonts:css`@layer theme {
    :root {
        --ds-font-heading: 'Alegreya Sans', sans-serif;
        --ds-font-body: 'Quicksand', Helvetica, sans-serif;
    }
}`,dsTypography:css`@layer theme {
  :root {
    --ds-font-weight: 300;
    --ds-line-height: 1.6rem;
    --ds-heading-weight: 400;
    --ds-heading-multiplier: 1.27201965;
  }
}
@layer base {
  body {
    font-family: var(--ds-font-body);
    font-weight: var(--ds-font-weight);
    line-height: var(--ds-line-height);
  }
  h1 {
      --ds-font-size: calc(1em * var(--ds-heading-multiplier) * var(--ds-heading-multiplier) * var(--ds-heading-multiplier));
      line-height: calc(2 * var(--ds-line-height));
  }
  h2 {
      --ds-font-size: calc(1em * var(--ds-heading-multiplier) * var(--ds-heading-multiplier));    
      line-height: calc(2 * var(--ds-line-height));
  }
  h3 {
      --ds-font-size: calc(1em * var(--ds-heading-multiplier));    
  }
  h1, h2, h3, h4, h5, h6 {
      font-size: var(--ds-font-size);
      font-weight: var(--ds-heading-weight);
      font-family: var(--ds-font-heading);
  }
  h4, h5, h6 {
      font-size: 1em;
  }
  h1, h2, h3, h4, h5, h6, p, ol, ul, dl {
      margin: var(--ds-space) 0;
  }
  dd, li, blockquote {
      margin-inline-start: var(--ds-space);
  }
}
@layer utility {
  .ds-margin-up {
      margin-block-start: calc(-1 * var(--ds-line-height));
  }
}`,dsIcons:css`@layer theme {
  :root {
    --ds-icon-height: var(--ds-line-height);
  }
}
@layer base {
  .ds-icon {
    display: inline-block;
    height: var(--ds-icon-height);
    width: 1em;
    vertical-align: bottom;
  }
  .ds-icon-feather {
    stroke: currentColor;
    stroke-width: 2;
    stroke-linecap: square;
    stroke-linejoin: square;
    fill: none;
  }
}`,dsForms:css`@layer theme {
  :root {
    --ds-input-border: var(--ds-grey-low);
    --ds-input-space: var(--ds-space);
    --ds-input-font: var(--ds-font-family);
    --ds-input-radio-space: 0.2em;
    --ds-input-height: calc(var(--ds-line-height) * 1.5);
    --ds-input-margin: calc(var(--ds-line-height) * 0.5);
  }
}
@layer base {
  .ds-form-group {
    margin: var(--ds-input-space) 0;
  }
  .ds-form-line {
    display: flex;
  }
  label {
    display: block;
    margin: var(--ds-input-space) 0;
  }
  .ds-input, 
  input:not([type="radio"],[type="checkbox"]), 
  select {
    width: 100%;
    display: block;
    height: var(--ds-input-height);
    margin: 0;
    margin-bottom: var(--ds-input-margin);
    box-sizing: border-box;
    background: inherit;
    color: inherit;
    border: 0px;
    outline: 1px solid var(--ds-input-border);
    padding: 0 0.5em;
    font-family: var(--ds-input-font);
    font-size: inherit;
    line-height: inherit;
  }
  select:not([multiple]) {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background: url('data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iMTBweCIgdmlld0JveD0iMCAwIDQwMS45OTggNDAxLjk5OCIgaGVpZ2h0PSIyMHB4Ij4KPHBhdGggZD0iTTczLjA5MiwxNjQuNDUyaDI1NS44MTNjNC45NDksMCw5LjIzMy0xLjgwNywxMi44NDgtNS40MjRjMy42MTMtMy42MTYsNS40MjctNy44OTgsNS40MjctMTIuODQ3ICAgIGMwLTQuOTQ5LTEuODEzLTkuMjI5LTUuNDI3LTEyLjg1TDIxMy44NDYsNS40MjRDMjEwLjIzMiwxLjgxMiwyMDUuOTUxLDAsMjAwLjk5OSwwcy05LjIzMywxLjgxMi0xMi44NSw1LjQyNEw2MC4yNDIsMTMzLjMzMSAgICBjLTMuNjE3LDMuNjE3LTUuNDI0LDcuOTAxLTUuNDI0LDEyLjg1YzAsNC45NDgsMS44MDcsOS4yMzEsNS40MjQsMTIuODQ3QzYzLjg2MywxNjIuNjQ1LDY4LjE0NCwxNjQuNDUyLDczLjA5MiwxNjQuNDUyeiIvPgo8cGF0aCBkPSJNMzI4LjkwNSwyMzcuNTQ5SDczLjA5MmMtNC45NTIsMC05LjIzMywxLjgwOC0xMi44NSw1LjQyMWMtMy42MTcsMy42MTctNS40MjQsNy44OTgtNS40MjQsMTIuODQ3ICAgIGMwLDQuOTQ5LDEuODA3LDkuMjMzLDUuNDI0LDEyLjg0OEwxODguMTQ5LDM5Ni41N2MzLjYyMSwzLjYxNyw3LjkwMiw1LjQyOCwxMi44NSw1LjQyOHM5LjIzMy0xLjgxMSwxMi44NDctNS40MjhsMTI3LjkwNy0xMjcuOTA2ICAgIGMzLjYxMy0zLjYxNCw1LjQyNy03Ljg5OCw1LjQyNy0xMi44NDhjMC00Ljk0OC0xLjgxMy05LjIyOS01LjQyNy0xMi44NDdDMzM4LjEzOSwyMzkuMzUzLDMzMy44NTQsMjM3LjU0OSwzMjguOTA1LDIzNy41NDl6Ii8+Cjwvc3ZnPg==');
    background-repeat: no-repeat;
    background-position: right 1em center;
  }
  select[multiple] {
    height: auto; /* unset? */
    -webkit-appearance: menulist;
    -moz-appearance: menulist; 
    appearance: menulist; 
  }
  .ds-textarea,
  textarea {
    width: 100%;
    border: 0;
    outline: 1px solid var(--ds-input-border);
    padding: 0 0.5em;
    font-family: var(--ds-input-font);
    font-size: inherit;
    line-height: inherit;
    margin: 0;
    height: calc(3 * var(--ds-input-height));
    margin-bottom: var(--ds-input-margin);
    display: block;
  }
  input[type="radio"],
  input[type="checkbox"] {
    width: auto;
    height: auto;
    padding: 0;
  }
  .ds-form-radio label {
    margin: 0;
  }

}`,dsButtons:css`@layer theme {
  :root {
    --ds-button-space: calc(0.5 * var(--ds-input-space));
    --ds-button-bg-color: var(--ds-grey-light);
    --ds-button-default-bg-color: var(--ds-white);
    --ds-button-border-color: var(--ds-grey-light);
    --ds-button-disabled-color: var(--ds-grey-medium);
    --ds-button-disabled-bg-color: var(--ds-white);
    --ds-button-primary-bg-color: var(--ds-primary);
    --ds-button-primary-color: var(--ds-primary-contrast);
    --ds-button-primary-border: none;
    --ds-button-support-bg-color: var(--ds-support);
    --ds-button-support-color: var(--ds-support-contrast);
    --ds-button-support-border: none;
    --ds-button-line-height: calc(var(--ds-line-height) * 1.5);
    --ds-button-shadow: 0;
    --ds-button-shadow-hover: var(--ds-shadow-small);
    --ds-button-radius: 2px;
  }
}
@layer base {
  :root .ds-button {
    line-height: var(--ds-button-line-height);
    min-height: var(--ds-button-line-height);
  }
  .ds-button {
    margin: 0 var(--ds-button-space) var(--ds-button-space) 0;
    overflow: visible;
    font: inherit;
    color: inherit;
    display: inline-block;
    box-sizing: border-box;
    padding: 0 calc(0.5 * var(--ds-line-height));
    vertical-align: middle;
    font-size: calc(0.875 * var(--ds-font-size));
    text-align: center;
    text-decoration: none;
    text-transform: uppercase;
    background-color: var(--ds-button-bg-color);
    outline: var(--ds-button-border);
    border: 0;
    white-space: nowrap;
    box-shadow: var(--ds-button-shadow);
    border-radius: var(--ds-button-radius);
  }
  .ds-button::-moz-focus-inner {
    border: 0;
  }
  .ds-button:hover,
  .ds-button:focus {
    cursor: pointer;
    text-decoration: none;
    color: inherit;
    box-shadow: var(--ds-button-shadow-hover);
  }
  a.ds-button,
  a.ds-button:hover,
  a.ds-button:active,
  a.ds-button:visited {
    color: inherit;
  }
  .ds-button-default {
    background-color: var(--ds-button-default-bg-color);
  }
  a.ds-button-primary, a.ds-button-primary:hover,
  a.ds-button-primary:active, a.ds-button-primary:visited,
  .ds-button-primary, .ds-button-primary:hover {
    background-color: var(--ds-button-primary-bg-color);
    color: var(--ds-button-primary-color);
    border-color: var(--ds-button-primary-border-color);
    text-shadow: #666 0 0 1px;
  }
  a.ds-button-support, a.ds-button-support:hover,
  a.ds-button-support:active, a.ds-button-support:visited,
  .ds-button-support, .ds-button-support:hover {
    background-color: var(--ds-button-support-bg-color);
    color: var(--ds-button-support-color);
    border-color: var(--ds-button-support-border-color);
  }
  .ds-button:disabled {
    background-color: var(--ds-button-disabled-bg-color);
    color: var(--ds-button-disabled-color);
  }
  .ds-button:disabled:hover {
    cursor: not-allowed;
    box-shadow: 0 0 0;
  }
  .ds-button-group {
    display: flex;
    flex-wrap: wrap;
  }
  .ds-button-light {
    background: none;
    outline: 0;
    padding: 0;
  }
  .ds-button-naked {
    background: none;
    outline: 0;
  }
  .ds-button-close {
    position: absolute;
    right: var(--ds-button-space);
    margin: 0;
  }
  .ds-button-grow {
    display: block;
    width: 100%;
  }
  /* icon buttons */
  .ds-button .ds-icon {
    height: var(--ds-button-line-height);
  }
  .ds-button-bar .ds-button:not(:last-child):not(:only-child) {
    margin-right: 0;
    border-right: 0;
  }
  /* icon buttons with state */
  .ds-button[data-simply-state] {
    height: var(--ds-button-line-height);
    overflow: hidden;
    width: 1em;
    box-sizing: content-box;
    white-space: normal;
  }
  .ds-button[data-simply-state] .ds-icon {
    width: 1em;
    height: var(--ds-button-line-height);
    transform: translateY(calc(-1 * var(--ds-button-line-height)));
    transition: transform 0.2s ease;
    display: block;
    margin: 0;
  }
  .ds-button[data-simply-state="alt"] .ds-icon {
    transform: translateY(0);
  }
}`,dsGrid:css`@layer theme {
    :root {
        --ds-grid-space: var(--ds-space);
        --ds-grid-space-column: var(--ds-grid-space);
        --ds-grid-space-row: var(--ds-grid-space);
        --ds-grid-columns: 1;
        --ds-screen-size: tiny;
        --ds-grid-min-colwidth: 15rem;
        --ds-screen-size: small;
    }
    :root,
    .ds-grid-2,
    .ds-grid-3,
    .ds-grid-4,
    .ds-grid-6,
    .ds-grid-12 {
        --ds-grid-columns: 2;
    }
    @container (width >= 640px) {
        :root {
            --ds-screen-size: tablet;
        }
        :root,
        .ds-grid-4,
        .ds-grid-6,
        .ds-grid-12 {
            --ds-grid-columns: 4;
        }
        .ds-grid-3 {
            --ds-grid-columns: 3;
        }
    }
    @container (width >= 992px) {
        :root {
            --ds-screen-size: medium;
        }
        :root,
        .ds-grid-6,
        .ds-grid-12 {
            --ds-grid-columns: 6;
        }
        .ds-grid-6,
        .ds-grid-12 {
            --ds-grid-columns: 6;
        }
    }
    @container (width >= 1200px) {
        :root {
            --ds-screen-size: large;
        }
        .ds-grid-12 {
            --ds-grid-columns: 12;
        }
    }
    @container (width >= 1800px) {
        :root {
            --ds-screen-size: extra-large;
        }
    }
}
@layer base {
    .ds-grid-fixed {
        display: grid;
        grid-column-gap: var(--ds-grid-spacing-column);
        grid-row-gap: var(--ds-grid-spacing-row);
        /* add row-gap/column-gap or gap */
        grid-auto-flow: row;
        grid-template-rows: repeat(1, auto);
        grid-template-columns: repeat(var(--ds-grid-columns), 1fr);
    }
    .ds-grid-dense {
        grid-auto-flow: dense;
    }
    .ds-grid-fixed > * { /* FIXME: only target grid items */
        max-width: 100%;
        overflow: hidden; /* FIXME: better alternative? */
    }
    .ds-grid-span-2 {
        grid-column: auto / span 2;
    }
    .ds-grid-span-3 {
        grid-column: auto / span 3;
    }
    .ds-grid-span-4 {
        grid-column: auto / span 4;
    }
    .ds-grid-span-5 {
        grid-column: auto / span 5;
    }
    .ds-grid-span-6 {
        grid-column: auto / span 6;
    }
    .ds-grid-span-7 {
        grid-column: auto / span 7;
    }
    .ds-grid-span-8 {
        grid-column: auto / span 8;
    }
    .ds-grid-span-9 {
        grid-column: auto / span 9;
    }
    .ds-grid-span-10 {
        grid-column: auto / span 10;
    }
    .ds-grid-span-11 {
        grid-column: auto / span 11;
    }
    .ds-grid-span-6 {
        grid-column: auto / span 12;
    }
    .ds-grid-span-all {
        grid-column: 1 / -1;
    }
    .ds-grid-row-2 {
        grid-row: auto / span 2;
    }
    .ds-grid-row-3 {
        grid-row: auto / span 3;
    }
    .ds-grid-row-4 {
        grid-row: auto / span 4;
    }
    .ds-grid-row-5 {
        grid-row: auto / span 5;
    }
    .ds-grid-row-6 {
        grid-row: auto / span 6;
    }
    .ds-grid-row-7 {
        grid-row: auto / span 7;
    }
    .ds-grid-row-8 {
        grid-row: auto / span 8;
    }
    .ds-grid-row-9 {
        grid-row: auto / span 9;
    }
    .ds-grid-row-10 {
        grid-row: auto / span 10;
    }

    /* flexible grid */
    .ds-grid {
        --ds-grid-spacing-column: var(--ds-grid-spacing);
        --ds-grid-spacing-row: var(--ds-grid-spacing);
        display: grid;
        grid-column-gap: var(--ds-grid-spacing-column);
        grid-row-gap: var(--ds-grid-spacing-row);
        grid-template-columns: repeat(auto-fit, minmax(var(--ds-grid-min-colwidth), 1fr));
    }
}`,dsGlow:css`@layer theme {
  :root {
    --ds-glow-1: rgb(from var(--ds-white) r g b / 0.2);
    --ds-glow-2: rgb( from var(--ds-primary) r g b / 0.5);
    --ds-glow-3: rgb(from var(--ds-grey-medium) r g b / 0.2);
    --ds-glow-support: rgb( from var(--ds-support) r g b / 0.5);
  }
}
@layer base {
  :root {
    --dsb-glow-shadow: 
        0 0 8px 2px var(--ds-glow-1),
        0 0 15px 15px var(--ds-glow-2),
        0 0 25px 25px var(--ds-glow-3);
  }
  .ds-glow, .ds-glow-hover:hover, .ds-glow-focus:focus {
    box-shadow: var(--dsb-glow-shadow);
  }
  .ds-glow-support {
    --ds-glow-2: var(--ds-glow-support);
    --dsb-glow-shadow: 
        0 0 8px 2px var(--ds-glow-1),
        0 0 15px 15px var(--ds-glow-2),
        0 0 25px 25px var(--ds-glow-3);
  }
}`,dsBox:css`@layer theme {
  :root {
    --ds-box-radius: 3px;
    --ds-box-shadow: var(--ds-shadow-small);
  }
}
@layer base {
  .ds-box {
    border-radius: var(--ds-box-radius);
    box-shadow: var(--ds-box-shadow);
    position: relative;
    break-inside: avoid;
  }
  @supports (display: flow-root) {
    .ds-box {
      display: flow-root;
      padding: 0;
    }
  }
  .ds-box-top {
    border-top-left-radius: var(--ds-box-radius);
    border-top-right-radius: var(--ds-box-radius);
  }
  .ds-box-bottom {
    border-bottom-left-radius: var(--ds-box-radius);
    border-bottom-right-radius: var(--ds-box-radius);
  }
}`,dsDialog:css`@layer theme {
  :root {
    --ds-dialog-radius: calc( 2 * var(--ds-box-radius));
    --ds-dialog-shadow: var(--ds-shadow-large);
    --ds-dialog-size: calc( 50% - (1/2 * var(--ds-spacing)));
    --ds-dialog-narrow: calc( 33% - (1/2 * var(--ds-spacing)));
    --ds-dialog-min-width: 20em;
    --ds-dialog-image-height: calc(var(--ds-line-height) * 6);
  }
}
@layer component {
  .ds-dialog {
    border: 0;
    width: var(--ds-dialog-size);
    min-width: var(--ds-dialog-min-width);
    box-shadow: var(--ds-dialog-shadow);
    padding: 0;
    z-index: 101;
    border-radius: calc(2px + var(--ds-dialog-radius));
  }
  .ds-dialog-narrow {
    width: var(--ds-dialog-narrow);
  }
  .ds-dialog-header,
  .ds-dialog-header-image > img {
    border-radius: var(--ds-dialog-radius) var(--ds-dialog-radius) 0 0;
  }
  .ds-dialog-footer,
  .ds-dialog-footer-image > img {
    border-radius: 0 0 var(--ds-dialog-radius) var(--ds-dialog-radius);
  }
  .ds-dialog-header,
  .ds-dialog-footer {
    flex-grow: 0;
  }
  .ds-dialog-header,
  .ds-dialog-footer,
  .ds-dialog-content {
    position: relative;
    padding: 0.05px; 
  }
  .ds-dialog-header-image,
  .ds-dialog-footer-image {
    min-height: var(--ds-dialog-image-size);
  }
  .ds-dialog-content {
    flex-grow: 1;
  }
  .ds-dialog::backdrop {
    background-color: rgba(0,0,0,0.5);
  }
  @media (max-width: 480px)  {
    .ds-dialog-narrow {
      min-width: 100%;
    }
  }
}`,dsDropdown:css`@layer theme {
  :root {
    --ds-dropdown-background: white;
    --ds-dropdown-width: 200px;
    --ds-dropdown-focus: var(--ds-grey-40);
    --ds-dropdown-shadow: var(--ds-shadow-medium);
    --ds-dropdown-radius: var(--ds-box-radius);
    --ds-dropdown-padding: calc(0.25 * var(--ds-spacing)) calc(0.5 * var(--ds-spacing));
  }
}
@layer component {
  .ds-dropdown {
    margin: 0;
    padding: 0;
    outline: none;
    box-shadow: none;
    display: inline-block; 
    position: relative;
  }
  .ds-dropdown-icon {
    padding: 0 0.25em;
    width: 1.5em;
    border-radius: 2px;
  }
  .ds-dropdown-icon:hover {
    background: var(--ds-dropdown-focus);
  }
  .ds-dropdown-nav {
    width: var(--ds-dropdown-width);
    background: var(--ds-dropdown-background);
    display: none;
    position: absolute;
    left: 0;
    box-shadow: var(--ds-dropdown-shadow);
    border-radius: var(--ds-dropdown-radius);
    z-index: 101;
  }
  .ds-dropdown-nav::before {
    content: "";
    display: block;
    width: 0.5rem; 
    height: 0.5rem;
    background: var(--ds-dropdown-background);
    position: absolute;
    top: -0.2rem;
    left: 0.75rem;
    transform: rotate(45deg);
    filter: drop-shadow(-1px -1px 2px #DDD);
    clip-path: polygon(-2px 0.6rem, -2px -2px, 0.6rem -2px);
  }
  .ds-dropdown-state {
    display: none;  
  }
  .ds-dropdown-state:checked ~ .ds-dropdown-nav {
    display: block;
  }
  .ds-dropdown-list {
    list-style: none;
    margin: 0;
    padding: var(--ds-dropdown-padding);
  }
  .ds-dropdown-item {
    list-style: none;
    margin: 0;
    padding: 0;
  }
  .ds-dropdown-right {
    left: auto;
    right: 0;
  }

  .ds-dropdown-right::before {
    left: auto;
    right: 0.5rem;
    top: -0.15rem;
  }

  .ds-dropdown-up {
    bottom: 1.5em
  }
  .ds-dropdown-nav.ds-dropdown-up::before {
    transform: rotate(-135deg);
    top: auto;
    bottom: -0.2rem;
    filter: drop-shadow(1px 1px 2px #000);
  }

  .ds-dropdown-center {
    margin-left: calc(-0.5 * var(--ds-dropdown-width) + 50%);
  }
  .ds-dropdown-nav.ds-dropdown-center::before {
    left: calc(50% - 0.25rem);
  }
}`,dsTabs:css`@layer theme {
  :root {
    --ds-tabs-space: var(--ds-button-space);
    --ds-tabs-bg-color: var(--ds-background);
    --ds-tabs-color: var(--ds-color);
    --ds-tabs-default-bg-color: transparent;
    --ds-tabs-primary-bg-color: var(--ds-primary);
    --ds-tabs-primary-color: var(--ds-primary-contrast);
    --ds-tabs-line-height: var(--ds-button-line-height);
    --ds-tabs-border-color: var(--ds-primary);
    --ds-tabs-direction: row;
    --ds-tabs-border-alignment: top;
    --ds-tabs-radius: var(--ds-button-radius);
    --ds-tabs-font-size: calc(0.875 * var(--ds-font-size));
    --ds-tabs-unselected-background: var(--ds-grey-20);
  }
}
@layer component {
  .ds-tabs {
    display: flex;
    flex-direction: var(--ds-tabs-direction);
    margin: 0;
    list-style: none;
    padding: 0 0 1px 0;
    flex-wrap: wrap;
    justify-content: center;
  }
  .ds-tabs li {
    margin: 0;
    padding: 0;
  }
  :root .ds-tabs-tab {
    line-height: var(--ds-tabs-line-height);
    min-height: var(--ds-tabs-line-height);
  }

  .ds-tabs-tab {
    display: block;
    margin: 0;
    overflow: visible;
    box-sizing: border-box;
    margin: 0 var(--ds-tabs-space) 0 0;
    padding: 0 calc(0.5 * var(--ds-tabs-line-height));
    vertical-align: middle;
    font-size: var(--ds-tabs-font-size);
    text-align: center;
    text-decoration: none;
    background-color: transparent;
    border: 0;
    white-space: nowrap;
    border-radius: var(--ds-tabs-radius) var(--ds-tabs-radius) 0 0;
  }
  .ds-tabs-tab:hover,
  .ds-tabs-tab:focus {
    cursor: pointer;
    text-decoration: none;
  }
  a.ds-tabs-tab,
  a.ds-tabs-tab:hover,
  a.ds-tabs-tab:active,
  a.ds-tabs-tab:visited {
    color: inherit;
  }
  .ds-tabs-support {
    --ds-tabs-border-color: var(--ds-support);
  }
  .ds-tabs-primary {
    --ds-tabs-border-color: var(--ds-primary);
  }
  .ds-tabs-primary .ds-tabs-tab,
  .ds-tabs a.ds-tabs-primary, .ds-tabs a.ds-tabs-primary:hover,
  .ds-tabs a.ds-tabs-primary:active, .ds-tabs a.ds-tabs-primary:visited {
    background-color: var(--ds-primary);
    color: var(--ds-primary-contrast);
    border-color: var(--ds-tabs-border-color);
  }
  .ds-tabs-support .ds-tabs-tab,
  .ds-tabs a.ds-tabs-support, .ds-tabs a.ds-tabs-support:hover,
  .ds-tabs a.ds-tabs-support:active, .ds-tabs a.ds-tabs-support:visited {
    background-color: var(--ds-support);
    color: var(--ds-support-contrast);
    border-color: var(--ds-tabs-border-color);
  }
  .ds-tabs-border li {
    background: linear-gradient(to var(--ds-tabs-border-alignment), var(--ds-tabs-border-color) 0px, var(--ds-tabs-border-color) 1px, transparent 1px);
    padding-bottom: 1px;
  }
  .ds-tabs-border .ds-tabs-tab-selected {
    border: 1px solid var(--ds-tabs-border-color);
    border-bottom: 0;
    position: relative;
    top: 1px;
    line-height: calc(var(--ds-tabs-line-height) - 1px);
    background: var(--ds-tabs-bg-color);
  }
  .ds-tabs-border .ds-tabs-tab-selected {
    position: relative;
    top: 1px;
    line-height: calc(var(--ds-tabs-line-height) - 1px);
  }
  .ds-tabs-border-bottom li {
    background: linear-gradient(to var(--ds-tabs-border-alignment), var(--ds-tabs-border-color) 0px, var(--ds-tabs-border-color) 1px, transparent 1px);
  }
  .ds-tabs-border-bottom .ds-tabs-tab-selected {
    background: linear-gradient(to var(--ds-tabs-border-alignment), var(--ds-tabs-border-color) 0px, var(--ds-tabs-border-color) 2px, transparent 2px);
  }
  .ds-tabs-border-color li {
    background: linear-gradient(to var(--ds-tabs-border-alignment), var(--ds-tabs-unselected-background) 0px, var(--ds-tabs-unselected-background) 1px, transparent 1px);
  }
  .ds-tabs-border-color .ds-tabs-tab-selected {
    background: linear-gradient(to var(--ds-tabs-border-alignment), var(--ds-tabs-border-color) 0px, var(--ds-tabs-border-color) 1px, transparent 1px);
  }

  .ds-tabs-vertical {
    --ds-tabs-direction: column;
    --ds-tabs-border-alignment: right;
    flex-direction: var(--ds-tabs-direction);
  }
  .ds-tabs-vertical .ds-tabs-tab {
    text-align: left;
  }
  .ds-tabs-vertical.ds-tabs-border-color li {
    background: linear-gradient(to var(--ds-tabs-border-alignment), var(--ds-tabs-unselected-background) 0px, var(--ds-tabs-unselected-background) 1px, transparent 1px);
  }
  .ds-tabs-vertical.ds-tabs-border-color .ds-tabs-tab-selected {
    background: linear-gradient(to var(--ds-tabs-border-alignment), var(--ds-tabs-border-color) 0px, var(--ds-tabs-border-color) 1px, transparent 1px);
  }
}`,dsBadge:css`@layer theme {
  :root {
    --ds-badge-color: var(--ds-grey-50);
    --ds-badge-font-color: var(--ds-white);
    --ds-badge-label-color: var(--ds-primary);
    --ds-badge-label-contrast-color: var(--ds-primary-contrast);
    --ds-badge-font-size: 0.66em;
    --ds-badge-height: 2em;
  }
}
@layer component {
  .ds-badge {
    font-size: var(--ds-badge-font-size);
    display: inline-block;
    align-items: center;
    background: var(--ds-badge-color);
    color: var(--ds-badge-font-color);
    border-radius: 0.3em;
    padding: 0 0.6em;
    text-align: center;   
    margin: 0.05em 0;
    margin-right: 0.3em;
    line-height: var(--ds-badge-height);
    max-height: var(--ds-badge-height);
    position: relative;
  }
  .ds-badge-label,
  .ds-badge > label {
    display: inline-flex;
    margin: 0;
    margin-left: -0.6em;
    margin-right: 0.6em;
    padding: 0 0.5em;
    background: var(--ds-badge-label-color);
    color: var(--ds-badge-label-contrast-color);
    float: left;
    min-height: var(--ds-badge-height);
    align-items: center;
    border-radius: 0.3em 0 0 0.3em;
  }
  a.ds-badge {
    color: inherit;
  }
  .ds-badge label .ds-icon,
  .ds-badge-label .ds-icon {
    margin-top: 0;
    height: var(--ds-badge-height);
  }
  .ds-badge-inline {
    display: inline;
  }
  .ds-badge-inverted {
    background: var(--ds-badge-label-color);
    color: var(--ds-badge-label-contrast-color);
  }
  .ds-badge-inverted .ds-badge-label {
    background: var(--ds-badge-color);
    color: var(--ds-badge-font-color);
  }
  .ds-badge-tag {
    position: relative;
    border-radius: 0.3em 0 0 0.3em;
    padding-right: 0.2em;
    margin-right: 0.6em;
  }
  .ds-badge-tag::after {
    content: "";
    display: block;
    border: calc(0.5 * var(--ds-badge-height)) solid transparent;
    border-left: 0.8em solid var(--ds-badge-color); 
    position: absolute;
    top: 0;
    left: 100%;
  }
  .ds-badge-tag-reverse {
    position: relative;
    border-radius: 0 5px 5px 0;
    padding-left: 0.2em;
    margin-left: 0.6em;
  }
  .ds-badge-tag-reverse::before {
    content: "";
    display: block;
    border: calc(0.5 * var(--ds-badge-height)) solid transparent;
    border-right: 0.8em solid var(--ds-badge-color); 
    position: absolute;
    top: 0;
    right: 100%;
  }
  .ds-badge-inverted.ds-badge-tag::after {
    border-left-color: var(--ds-badge-label-color);
  }
  .ds-badge-inverted.ds-badge-tag-reverse::before {
    border-right-color: var(--ds-badge-label-color);
  }
}`,dsNavigation:css`@layer theme {
  :root {
    --ds-navbar-shadow: var(--ds-shadow-small);
    --ds-navbar-space: calc(0.5 * var(--ds-space));
    --ds-navbar-line-height: var(--ds-line-height);
    --ds-navbar-side-space: calc(0.3 * var(--ds-space));
  }
}
@layer component {
  .ds-navbar {
    display: flex;
    box-shadow: var(--ds-navbar-shadow);
  }
  ul.ds-navbar {
    list-style: none;
    margin-left: 0;
    padding-left: 0;
  }
  .ds-navbar .ds-button,
  .ds-navbar input,
  .ds-navbar select {
    border-top: 0;
    border-bottom: 0;
    outline: 0;
    margin-bottom: 0;
  }
  .ds-navbar-left {
    padding-left: 1em;
  }
  .ds-navbar-right {
    margin-left: auto;
    margin-right: 1em;
  }
  .ds-navbar-center {
    margin: 0 auto;
  }
  .ds-navbar-nav {
    margin: 0;
    padding: 0;
    display: flex;
  }
  .ds-navbar-nav li {
    margin: 0;
    padding: 0;
    list-style: none;
  }
  .ds-navbar-nav a {
    text-decoration: none;
    color: inherit;
    padding: 0 var(--ds-navbar-space) 0 0;
  }
  .ds-navbar-nav .ds-button {
    margin-bottom: 0;
  }
  .ds-navbar-nav .ds-button:last-child {
    margin-right: 0;
  }
  .asteroid-user-button {
    position: absolute;
    right: 1em;
  }
  /* sidebar */
  .ds-navbar-side,
  .ds-navbar-side .ds-navbar-nav {
    flex-direction: column;
  }
  .ds-navbar-side .ds-nav {
    display: block;
    position: relative;
    padding: calc(0.5 * var(--ds-navbar-line-height));
    text-align: left;
  }
  .ds-navbar-side .ds-nav .ds-icon {
    margin-right: var(--ds-navbar-size-space);
  }
  .ds-navbar-side .ds-selected,
  .ds-navbar-side .ds-nav:hover,
  .ds-navbar-side .ds-nav-hover {
    background: rgba(0,0,0,0.2);
  }
}`,dsToast:css`@layer theme {
  :root {
    --ds-toast-height: 60px;
    --ds-toast-hide-delay: 3s; /* 5 seems better */
    --ds-toast-show-duration: 0.3s;
    --ds-toast-hide-duration: 0.5s;
    --ds-toast-margin: 20px;
    --ds-toast-shadow: var(--ds-shadow-medium);
    --ds-toast-space: var(--ds-space);
    --ds-toast-background: var(--ds-grey-80);
    --ds-toast-font-color: var(--ds-white);
    --ds-toast-default-color: var(--ds-grey-50);
    --ds-toast-error-color: var(--ds-error-color);
    --ds-toast-info-color: var(--ds-info-color);
    --ds-toast-warning-color: var(--ds-warning-color);
  }
}
@layer component {
  ul.ds-toasts,
  ol.ds-toasts,
  .ds-toasts {
    position: absolute;
    right: 0;
    top: 0;
    z-index: 101;
    display: block;
    list-style: none;
    margin: 0;
    padding: 0;
    max-width: 50%;
    min-width: 300px;
  }
  .ds-toast,
  li.ds-toast {
    min-width: 300px;
    float: right;
    clear: both;
    margin-top: var(--ds-toast-space);
    margin-right: var(--ds-toast-space);
    background: var(--ds-toast-background);
    color: var(--ds-toast-font-color);
    display: block;
    border-left: 10px solid var(--ds-toast-default-color);
    box-shadow: var(--ds-toast-shadow);
  }
  .ds-toast-error,
  li.ds-toast-error {
    border-color: var(--ds-toast-error-color);
  }
  .ds-toast-info,
  li.ds-toast-info {
    border-color: var(--ds-toast-info-color);
  }
  .ds-toast-warning,
  li.ds-toast-warning {
    border-color: var(--ds-toast-warning-color);
  }

  @keyframes ds-toast-show {
    0% {
      transform: scaleX(0);
      transform-origin: right;
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: scaleX(1);
      transform-origin: right;
      opacity: 1;
    }
  }
  @keyframes ds-toast-hide {
    0% {
      transform: scaleX(1);
      transform-origin: right;
      opacity: 1;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: scaleX(0);
      transform-origin: right;
      opacity: 0;
    }
  }
  @keyframes ds-toast-move {
    0% {
      transform: translateY(-80px); /* toast-height + toast-margin */
    }
    100% {
      transform: translateY(0px);
    }
  }
  .ds-toast[data-state="new"] {
    animation: ds-toast-show var(--ds-toast-show-duration) forwards;
  }
  .ds-toast-autohide[data-state="new"] {
    animation: ds-toast-show var(--ds-toast-show-duration);
    animation-delay: 0s;
  }
  .ds-toast-autohide.ds-toast-animated[data-state="shown"] {
    animation: ds-toast-hide var(--ds-toast-hide-duration) forwards;
    animation-delay: calc(var(--ds-toast-hide-delay) - var(--ds-toast-show-duration));
  }
  .ds-toast-autohide:not(.ds-toast-animated)[data-state="shown"] {
    animation: ds-toast-move var(--ds-toast-show-duration), ds-toast-hide var(--ds-toast-hide-duration) forwards;
    animation-delay: 0s, var(--ds-toast-hide-delay);
  }
}`,dsAlignment:css`@layer utility {
  .ds-center {
    text-align: center;
    margin-left: auto;
    margin-right: auto;
  }
  .ds-center-middle {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .ds-align-right {
    float: right;
  }
}`,dsBackground:css``,dsShadow:css`@layer theme {
  :root {
    --ds-shadow-light: rgba(0,0,0,0.07);
    --ds-shadow-middle: rgba(0,0,0,0.09);
    --ds-shadow-dark: rgba(0,0,0,0.11);
    --ds-shadow-tiny: 
        0 1px 1px var(--ds-shadow-dark)
    ;
    --ds-shadow-small: 
        0 1px 1px var(--ds-shadow-dark),
        0 2px 2px var(--ds-shadow-middle),
        0 4px 4px var(--ds-shadow-light)
    ;
    --ds-shadow-medium: 
        0 1px 1px var(--ds-shadow-middle),
        0 2px 2px var(--ds-shadow-middle),
        0 4px 4px var(--ds-shadow-middle),
        0 6px 8px var(--ds-shadow-middle),
        0 8px 16px var(--ds-shadow-middle)
    ;
    --ds-shadow-large: 
        0 2px 1px var(--ds-shadow-light),
        0 4px 2px var(--ds-shadow-light),
        0 8px 4px var(--ds-shadow-light),
        0 16px 8px var(--ds-shadow-light),
        0 32px 16px var(--ds-shadow-light) 
    ;
  }
}
@layer utility {
  .ds-shadow-tiny {
    box-shadow: var(--ds-shadow-tiny);
  }
  .ds-shadow-small {
    box-shadow: var(--ds-shadow-small);
  }
  .ds-shadow-medium {
    box-shadow: var(--ds-shadow-medium);
  }
  .ds-shadow-large {
    box-shadow: var(--ds-shadow-large);
  }
}`}};var Lc=simply.app({actions:{webidSave:async function(t){let e=await mo.actions.webidSave.call(this,t);if(e){this.state.profileJSON=JSON.stringify(this.state.webid.profile,null,4);let r=this.state.webid.profile.solid$oidcIssuer;this.state.solidConfiguration.issuer=r}return e}},state:simply.state.signal({path:"/",list:[],solidConfiguration:{client_info:{client_name:"podlist",redirect_uris:[new URL("redirect.html",window.location.href)]}}}),hooks:{start:async function(){simply.bind({root:this.state}),this.state.solidConfiguration.authorize_callback=oauth2.authorizePopup}},components:{theds:Nc,webid:mo,solidFS:jc}});Lc.start();globalThis.podlist=Lc;})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
//# sourceMappingURL=podlist.min.js.map
