(()=>{var Mc=Object.create;var mi=Object.defineProperty;var Dc=Object.getOwnPropertyDescriptor;var Uc=Object.getOwnPropertyNames;var $c=Object.getPrototypeOf,qc=Object.prototype.hasOwnProperty;var T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),hr=(t,e)=>{for(var r in e)mi(t,r,{get:e[r],enumerable:!0})},Wc=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Uc(e))!qc.call(t,i)&&i!==r&&mi(t,i,{get:()=>e[i],enumerable:!(n=Dc(e,i))||n.enumerable});return t};var sn=(t,e,r)=>(r=t!=null?Mc($c(t)):{},Wc(e||!t||!t.__esModule?mi(r,"default",{value:t,enumerable:!0}):r,t));var ha=T(gn=>{"use strict";gn.byteLength=jd;gn.toByteArray=Pd;gn.fromByteArray=Bd;var me=[],ie=[],kd=typeof Uint8Array<"u"?Uint8Array:Array,Mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ft=0,ca=Mi.length;ft<ca;++ft)me[ft]=Mi[ft],ie[Mi.charCodeAt(ft)]=ft;var ft,ca;ie[45]=62;ie[95]=63;function da(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function jd(t){var e=da(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Nd(t,e,r){return(e+r)*3/4-r}function Pd(t){var e,r=da(t),n=r[0],i=r[1],s=new kd(Nd(t,n,i)),o=0,a=i>0?n-4:n,l;for(l=0;l<a;l+=4)e=ie[t.charCodeAt(l)]<<18|ie[t.charCodeAt(l+1)]<<12|ie[t.charCodeAt(l+2)]<<6|ie[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=ie[t.charCodeAt(l)]<<2|ie[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=ie[t.charCodeAt(l)]<<10|ie[t.charCodeAt(l+1)]<<4|ie[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Ld(t){return me[t>>18&63]+me[t>>12&63]+me[t>>6&63]+me[t&63]}function Od(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Ld(n));return i.join("")}function Bd(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(Od(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(me[e>>2]+me[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(me[e>>10]+me[e>>4&63]+me[e<<2&63]+"=")),i.join("")}});var pa=T(Di=>{Di.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,l=(1<<a)-1,u=l>>1,f=-7,c=r?i-1:0,h=r?-1:1,d=t[e+c];for(c+=h,s=d&(1<<-f)-1,d>>=-f,f+=a;f>0;s=s*256+t[e+c],c+=h,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+t[e+c],c+=h,f-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-u}return(d?-1:1)*o*Math.pow(2,s-n)};Di.write=function(t,e,r,n,i,s){var o,a,l,u=s*8-i-1,f=(1<<u)-1,c=f>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+c>=1?e+=h/l:e+=h*Math.pow(2,1-c),e*l>=2&&(o++,l/=2),o+c>=f?(a=0,o=f):o+c>=1?(a=(e*l-1)*Math.pow(2,i),o=o+c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=a&255,d+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[r+d]=o&255,d+=p,o/=256,u-=8);t[r+d-p]|=m*128}});var _e=T(Wt=>{"use strict";var Ui=ha(),$t=pa(),ma=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Wt.Buffer=y;Wt.SlowBuffer=$d;Wt.INSPECT_MAX_BYTES=50;var wn=2147483647;Wt.kMaxLength=wn;y.TYPED_ARRAY_SUPPORT=Cd();!y.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Cd(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}});Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}});function Ne(t){if(t>wn)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,y.prototype),e}function y(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return zi(t)}return ga(t,e,r)}y.poolSize=8192;function ga(t,e,r){if(typeof t=="string")return Md(t,e);if(ArrayBuffer.isView(t))return Dd(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(ye(t,ArrayBuffer)||t&&ye(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(t,SharedArrayBuffer)||t&&ye(t.buffer,SharedArrayBuffer)))return qi(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return y.from(n,e,r);let i=Ud(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return y.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}y.from=function(t,e,r){return ga(t,e,r)};Object.setPrototypeOf(y.prototype,Uint8Array.prototype);Object.setPrototypeOf(y,Uint8Array);function wa(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function Fd(t,e,r){return wa(t),t<=0?Ne(t):e!==void 0?typeof r=="string"?Ne(t).fill(e,r):Ne(t).fill(e):Ne(t)}y.alloc=function(t,e,r){return Fd(t,e,r)};function zi(t){return wa(t),Ne(t<0?0:Hi(t)|0)}y.allocUnsafe=function(t){return zi(t)};y.allocUnsafeSlow=function(t){return zi(t)};function Md(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!y.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=xa(t,e)|0,n=Ne(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function $i(t){let e=t.length<0?0:Hi(t.length)|0,r=Ne(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function Dd(t){if(ye(t,Uint8Array)){let e=new Uint8Array(t);return qi(e.buffer,e.byteOffset,e.byteLength)}return $i(t)}function qi(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,y.prototype),n}function Ud(t){if(y.isBuffer(t)){let e=Hi(t.length)|0,r=Ne(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Ki(t.length)?Ne(0):$i(t);if(t.type==="Buffer"&&Array.isArray(t.data))return $i(t.data)}function Hi(t){if(t>=wn)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+wn.toString(16)+" bytes");return t|0}function $d(t){return+t!=t&&(t=0),y.alloc(+t)}y.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==y.prototype};y.compare=function(e,r){if(ye(e,Uint8Array)&&(e=y.from(e,e.offset,e.byteLength)),ye(r,Uint8Array)&&(r=y.from(r,r.offset,r.byteLength)),!y.isBuffer(e)||!y.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};y.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};y.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return y.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=y.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){let o=e[n];if(ye(o,Uint8Array))s+o.length>i.length?(y.isBuffer(o)||(o=y.from(o)),o.copy(i,s)):Uint8Array.prototype.set.call(i,o,s);else if(y.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function xa(t,e){if(y.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||ye(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Wi(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return ja(t).length;default:if(i)return n?-1:Wi(t).length;e=(""+e).toLowerCase(),i=!0}}y.byteLength=xa;function qd(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Zd(this,e,r);case"utf8":case"utf-8":return Ea(this,e,r);case"ascii":return Jd(this,e,r);case"latin1":case"binary":return Yd(this,e,r);case"base64":return Vd(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Xd(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}y.prototype._isBuffer=!0;function ct(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}y.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)ct(this,r,r+1);return this};y.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)ct(this,r,r+3),ct(this,r+1,r+2);return this};y.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)ct(this,r,r+7),ct(this,r+1,r+6),ct(this,r+2,r+5),ct(this,r+3,r+4);return this};y.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Ea(this,0,e):qd.apply(this,arguments)};y.prototype.toLocaleString=y.prototype.toString;y.prototype.equals=function(e){if(!y.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:y.compare(this,e)===0};y.prototype.inspect=function(){let e="",r=Wt.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};ma&&(y.prototype[ma]=y.prototype.inspect);y.prototype.compare=function(e,r,n,i,s){if(ye(e,Uint8Array)&&(e=y.from(e,e.offset,e.byteLength)),!y.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;let o=s-i,a=n-r,l=Math.min(o,a),u=this.slice(i,s),f=e.slice(r,n);for(let c=0;c<l;++c)if(u[c]!==f[c]){o=u[c],a=f[c];break}return o<a?-1:a<o?1:0};function Sa(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Ki(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=y.from(e,n)),y.isBuffer(e))return e.length===0?-1:ya(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):ya(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function ya(t,e,r,n,i){let s=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function l(f,c){return s===1?f[c]:f.readUInt16BE(c*s)}let u;if(i){let f=-1;for(u=r;u<o;u++)if(l(t,u)===l(e,f===-1?0:u-f)){if(f===-1&&(f=u),u-f+1===a)return f*s}else f!==-1&&(u-=u-f),f=-1}else for(r+a>o&&(r=o-a),u=r;u>=0;u--){let f=!0;for(let c=0;c<a;c++)if(l(t,u+c)!==l(e,c)){f=!1;break}if(f)return u}return-1}y.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};y.prototype.indexOf=function(e,r,n){return Sa(this,e,r,n,!0)};y.prototype.lastIndexOf=function(e,r,n){return Sa(this,e,r,n,!1)};function Wd(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let s=e.length;n>s/2&&(n=s/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(Ki(a))return o;t[r+o]=a}return o}function zd(t,e,r,n){return xn(Wi(e,t.length-r),t,r,n)}function Hd(t,e,r,n){return xn(nh(e),t,r,n)}function Gd(t,e,r,n){return xn(ja(e),t,r,n)}function Kd(t,e,r,n){return xn(ih(e,t.length-r),t,r,n)}y.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return Wd(this,e,r,n);case"utf8":case"utf-8":return zd(this,e,r,n);case"ascii":case"latin1":case"binary":return Hd(this,e,r,n);case"base64":return Gd(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Kd(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Vd(t,e,r){return e===0&&r===t.length?Ui.fromByteArray(t):Ui.fromByteArray(t.slice(e,r))}function Ea(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let s=t[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=r){let l,u,f,c;switch(a){case 1:s<128&&(o=s);break;case 2:l=t[i+1],(l&192)===128&&(c=(s&31)<<6|l&63,c>127&&(o=c));break;case 3:l=t[i+1],u=t[i+2],(l&192)===128&&(u&192)===128&&(c=(s&15)<<12|(l&63)<<6|u&63,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:l=t[i+1],u=t[i+2],f=t[i+3],(l&192)===128&&(u&192)===128&&(f&192)===128&&(c=(s&15)<<18|(l&63)<<12|(u&63)<<6|f&63,c>65535&&c<1114112&&(o=c))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return Qd(n)}var _a=4096;function Qd(t){let e=t.length;if(e<=_a)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=_a));return r}function Jd(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function Yd(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function Zd(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let s=e;s<r;++s)i+=sh[t[s]];return i}function Xd(t,e,r){let n=t.slice(e,r),i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}y.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,y.prototype),i};function W(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}y.prototype.readUintLE=y.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||W(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return i};y.prototype.readUintBE=y.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||W(e,r,this.length);let i=this[e+--r],s=1;for(;r>0&&(s*=256);)i+=this[e+--r]*s;return i};y.prototype.readUint8=y.prototype.readUInt8=function(e,r){return e=e>>>0,r||W(e,1,this.length),this[e]};y.prototype.readUint16LE=y.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||W(e,2,this.length),this[e]|this[e+1]<<8};y.prototype.readUint16BE=y.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||W(e,2,this.length),this[e]<<8|this[e+1]};y.prototype.readUint32LE=y.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||W(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};y.prototype.readUint32BE=y.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||W(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};y.prototype.readBigUInt64LE=Ge(function(e){e=e>>>0,qt(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&xr(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))});y.prototype.readBigUInt64BE=Ge(function(e){e=e>>>0,qt(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&xr(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)});y.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||W(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};y.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||W(e,r,this.length);let i=r,s=1,o=this[e+--i];for(;i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};y.prototype.readInt8=function(e,r){return e=e>>>0,r||W(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};y.prototype.readInt16LE=function(e,r){e=e>>>0,r||W(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};y.prototype.readInt16BE=function(e,r){e=e>>>0,r||W(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};y.prototype.readInt32LE=function(e,r){return e=e>>>0,r||W(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};y.prototype.readInt32BE=function(e,r){return e=e>>>0,r||W(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};y.prototype.readBigInt64LE=Ge(function(e){e=e>>>0,qt(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&xr(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});y.prototype.readBigInt64BE=Ge(function(e){e=e>>>0,qt(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&xr(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});y.prototype.readFloatLE=function(e,r){return e=e>>>0,r||W(e,4,this.length),$t.read(this,e,!0,23,4)};y.prototype.readFloatBE=function(e,r){return e=e>>>0,r||W(e,4,this.length),$t.read(this,e,!1,23,4)};y.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||W(e,8,this.length),$t.read(this,e,!0,52,8)};y.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||W(e,8,this.length),$t.read(this,e,!1,52,8)};function X(t,e,r,n,i,s){if(!y.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}y.prototype.writeUintLE=y.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;X(this,e,r,n,a,0)}let s=1,o=0;for(this[r]=e&255;++o<n&&(s*=256);)this[r+o]=e/s&255;return r+n};y.prototype.writeUintBE=y.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;X(this,e,r,n,a,0)}let s=n-1,o=1;for(this[r+s]=e&255;--s>=0&&(o*=256);)this[r+s]=e/o&255;return r+n};y.prototype.writeUint8=y.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,1,255,0),this[r]=e&255,r+1};y.prototype.writeUint16LE=y.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};y.prototype.writeUint16BE=y.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};y.prototype.writeUint32LE=y.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};y.prototype.writeUint32BE=y.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Aa(t,e,r,n,i){ka(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function va(t,e,r,n,i){ka(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}y.prototype.writeBigUInt64LE=Ge(function(e,r=0){return Aa(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});y.prototype.writeBigUInt64BE=Ge(function(e,r=0){return va(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});y.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let l=Math.pow(2,8*n-1);X(this,e,r,n,l-1,-l)}let s=0,o=1,a=0;for(this[r]=e&255;++s<n&&(o*=256);)e<0&&a===0&&this[r+s-1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};y.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let l=Math.pow(2,8*n-1);X(this,e,r,n,l-1,-l)}let s=n-1,o=1,a=0;for(this[r+s]=e&255;--s>=0&&(o*=256);)e<0&&a===0&&this[r+s+1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};y.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};y.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};y.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};y.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};y.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};y.prototype.writeBigInt64LE=Ge(function(e,r=0){return Aa(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});y.prototype.writeBigInt64BE=Ge(function(e,r=0){return va(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ra(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Ta(t,e,r,n,i){return e=+e,r=r>>>0,i||Ra(t,e,r,4,34028234663852886e22,-34028234663852886e22),$t.write(t,e,r,n,23,4),r+4}y.prototype.writeFloatLE=function(e,r,n){return Ta(this,e,r,!0,n)};y.prototype.writeFloatBE=function(e,r,n){return Ta(this,e,r,!1,n)};function Ia(t,e,r,n,i){return e=+e,r=r>>>0,i||Ra(t,e,r,8,17976931348623157e292,-17976931348623157e292),$t.write(t,e,r,n,52,8),r+8}y.prototype.writeDoubleLE=function(e,r,n){return Ia(this,e,r,!0,n)};y.prototype.writeDoubleBE=function(e,r,n){return Ia(this,e,r,!1,n)};y.prototype.copy=function(e,r,n,i){if(!y.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),s};y.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!y.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{let o=y.isBuffer(e)?e:y.from(e,i),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=o[s%a]}return this};var Ut={};function Gi(t,e,r){Ut[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Gi("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Gi("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Gi("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=ba(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=ba(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function ba(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function eh(t,e,r){qt(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&xr(e,t.length-(r+1))}function ka(t,e,r,n,i,s){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw s>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:a=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new Ut.ERR_OUT_OF_RANGE("value",a,t)}eh(n,i,s)}function qt(t,e){if(typeof t!="number")throw new Ut.ERR_INVALID_ARG_TYPE(e,"number",t)}function xr(t,e,r){throw Math.floor(t)!==t?(qt(t,r),new Ut.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Ut.ERR_BUFFER_OUT_OF_BOUNDS:new Ut.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var th=/[^+/0-9A-Za-z-_]/g;function rh(t){if(t=t.split("=")[0],t=t.trim().replace(th,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Wi(t,e){e=e||1/0;let r,n=t.length,i=null,s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function nh(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function ih(t,e){let r,n,i,s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function ja(t){return Ui.toByteArray(rh(t))}function xn(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function ye(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Ki(t){return t!==t}var sh=(function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e})();function Ge(t){return typeof BigInt>"u"?oh:t}function oh(){throw new Error("BigInt not supported")}});var P=T((Qw,Ga)=>{"use strict";var Zi=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};Ga.exports={AggregateError:Zi,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var Xi=T((Jw,Ka)=>{"use strict";Ka.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var V=T((Yw,Ja)=>{"use strict";var{format:Rh,inspect:vn}=Xi(),{AggregateError:Th}=P(),Ih=globalThis.AggregateError||Th,kh=Symbol("kIsNodeError"),jh=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Nh=/^([A-Z][a-z0-9]*)+$/,Ph="__node_internal_",Rn={};function _t(t,e){if(!t)throw new Rn.ERR_INTERNAL_ASSERTION(e)}function Va(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Lh(t,e,r){if(typeof e=="function")return _t(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return _t(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:Rh(e,...r)}function G(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(Lh(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[kh]=!0,Rn[t]=n}function Qa(t){let e=Ph+t.name;return Object.defineProperty(t,"name",{value:e}),t}function Oh(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new Ih([e,t],e.message);return r.code=e.code,r}return t||e}var es=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Rn.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};G("ERR_ASSERTION","%s",Error);G("ERR_INVALID_ARG_TYPE",(t,e,r)=>{_t(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)_t(typeof l=="string","All expected entries have to be of type string"),jh.includes(l)?i.push(l.toLowerCase()):Nh.test(l)?s.push(l):(_t(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=vn(r,{depth:-1});n+=`. Received ${l}`}}else{let l=vn(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);G("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=vn(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);G("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);G("ERR_MISSING_ARGS",(...t)=>{_t(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);G("ERR_OUT_OF_RANGE",(t,e,r)=>{_t(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=Va(String(r));else if(typeof r=="bigint"){n=String(r);let i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=Va(n)),n+="n"}else n=vn(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);G("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);G("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);G("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);G("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);G("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);G("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);G("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);G("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);G("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);G("ERR_STREAM_WRITE_AFTER_END","write after end",Error);G("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);Ja.exports={AbortError:es,aggregateTwoErrors:Qa(Oh),hideStackFrames:Qa,codes:Rn}});var Vt=T((Zw,Tn)=>{"use strict";var{AbortController:Ya,AbortSignal:Bh}=typeof self<"u"?self:typeof window<"u"?window:void 0;Tn.exports=Ya;Tn.exports.AbortSignal=Bh;Tn.exports.default=Ya});var kr=T((Xw,ts)=>{"use strict";var Qt=typeof Reflect=="object"?Reflect:null,Za=Qt&&typeof Qt.apply=="function"?Qt.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},In;Qt&&typeof Qt.ownKeys=="function"?In=Qt.ownKeys:Object.getOwnPropertySymbols?In=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:In=function(e){return Object.getOwnPropertyNames(e)};function Ch(t){console&&console.warn&&console.warn(t)}var tl=Number.isNaN||function(e){return e!==e};function k(){k.init.call(this)}ts.exports=k;ts.exports.once=Uh;k.EventEmitter=k;k.prototype._events=void 0;k.prototype._eventsCount=0;k.prototype._maxListeners=void 0;var Xa=10;function kn(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(k,"defaultMaxListeners",{enumerable:!0,get:function(){return Xa},set:function(t){if(typeof t!="number"||t<0||tl(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Xa=t}});k.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};k.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||tl(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function rl(t){return t._maxListeners===void 0?k.defaultMaxListeners:t._maxListeners}k.prototype.getMaxListeners=function(){return rl(this)};k.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")Za(l,this,r);else for(var u=l.length,f=al(l,u),n=0;n<u;++n)Za(f[n],this,r);return!0};function nl(t,e,r,n){var i,s,o;if(kn(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=rl(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Ch(a)}return t}k.prototype.addListener=function(e,r){return nl(this,e,r,!1)};k.prototype.on=k.prototype.addListener;k.prototype.prependListener=function(e,r){return nl(this,e,r,!0)};function Fh(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function il(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Fh.bind(n);return i.listener=r,n.wrapFn=i,i}k.prototype.once=function(e,r){return kn(r),this.on(e,il(this,e,r)),this};k.prototype.prependOnceListener=function(e,r){return kn(r),this.prependListener(e,il(this,e,r)),this};k.prototype.removeListener=function(e,r){var n,i,s,o,a;if(kn(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():Mh(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};k.prototype.off=k.prototype.removeListener;k.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function sl(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Dh(i):al(i,i.length)}k.prototype.listeners=function(e){return sl(this,e,!0)};k.prototype.rawListeners=function(e){return sl(this,e,!1)};k.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ol.call(t,e)};k.prototype.listenerCount=ol;function ol(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}k.prototype.eventNames=function(){return this._eventsCount>0?In(this._events):[]};function al(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Mh(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Dh(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Uh(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}ll(t,e,s,{once:!0}),e!=="error"&&$h(t,i,{once:!0})})}function $h(t,e,r){typeof t.on=="function"&&ll(t,"error",e,r)}function ll(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var J=T((e0,ns)=>{"use strict";var qh=_e(),{format:Wh,inspect:zh}=Xi(),{codes:{ERR_INVALID_ARG_TYPE:rs}}=V(),{kResistStopPropagation:Hh,AggregateError:Gh,SymbolDispose:Kh}=P(),Vh=globalThis.AbortSignal||Vt().AbortSignal,Qh=globalThis.AbortController||Vt().AbortController,Jh=Object.getPrototypeOf(async function(){}).constructor,ul=globalThis.Blob||qh.Blob,Yh=typeof ul<"u"?function(e){return e instanceof ul}:function(e){return!1},fl=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new rs(e,"AbortSignal",t)},Zh=(t,e)=>{if(typeof t!="function")throw new rs(e,"Function",t)};ns.exports={AggregateError:Gh,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format:Wh,inspect:zh,types:{isAsyncFunction(t){return t instanceof Jh},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:Yh,deprecate(t,e){return t},addAbortListener:kr().addAbortListener||function(e,r){if(e===void 0)throw new rs("signal","AbortSignal",e);fl(e,"signal"),Zh(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[Hh]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[Kh](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:Vh.any||function(e){if(e.length===1)return e[0];let r=new Qh,n=()=>r.abort();return e.forEach(i=>{fl(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};ns.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Yt=T((t0,wl)=>{"use strict";var{ArrayIsArray:ss,ArrayPrototypeIncludes:pl,ArrayPrototypeJoin:ml,ArrayPrototypeMap:Xh,NumberIsInteger:os,NumberIsNaN:ep,NumberMAX_SAFE_INTEGER:tp,NumberMIN_SAFE_INTEGER:rp,NumberParseInt:np,ObjectPrototypeHasOwnProperty:ip,RegExpPrototypeExec:yl,String:sp,StringPrototypeToUpperCase:op,StringPrototypeTrim:ap}=P(),{hideStackFrames:se,codes:{ERR_SOCKET_BAD_PORT:lp,ERR_INVALID_ARG_TYPE:Q,ERR_INVALID_ARG_VALUE:Jt,ERR_OUT_OF_RANGE:bt,ERR_UNKNOWN_SIGNAL:cl}}=V(),{normalizeEncoding:up}=J(),{isAsyncFunction:fp,isArrayBufferView:cp}=J().types,dl={};function dp(t){return t===(t|0)}function hp(t){return t===t>>>0}var pp=/^[0-7]+$/,mp="must be a 32-bit unsigned integer or an octal string";function yp(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(yl(pp,t)===null)throw new Jt(e,t,mp);t=np(t,8)}return _l(t,e),t}var _p=se((t,e,r=rp,n=tp)=>{if(typeof t!="number")throw new Q(e,"number",t);if(!os(t))throw new bt(e,"an integer",t);if(t<r||t>n)throw new bt(e,`>= ${r} && <= ${n}`,t)}),bp=se((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Q(e,"number",t);if(!os(t))throw new bt(e,"an integer",t);if(t<r||t>n)throw new bt(e,`>= ${r} && <= ${n}`,t)}),_l=se((t,e,r=!1)=>{if(typeof t!="number")throw new Q(e,"number",t);if(!os(t))throw new bt(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new bt(e,`>= ${n} && <= ${i}`,t)});function as(t,e){if(typeof t!="string")throw new Q(e,"string",t)}function gp(t,e,r=void 0,n){if(typeof t!="number")throw new Q(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&ep(t))throw new bt(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var wp=se((t,e,r)=>{if(!pl(r,t)){let i="must be one of: "+ml(Xh(r,s=>typeof s=="string"?`'${s}'`:sp(s)),", ");throw new Jt(e,t,i)}});function bl(t,e){if(typeof t!="boolean")throw new Q(e,"boolean",t)}function is(t,e,r){return t==null||!ip(t,e)?r:t[e]}var xp=se((t,e,r=null)=>{let n=is(r,"allowArray",!1),i=is(r,"allowFunction",!1);if(!is(r,"nullable",!1)&&t===null||!n&&ss(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Q(e,"Object",t)}),Sp=se((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Q(e,"a dictionary",t)}),jn=se((t,e,r=0)=>{if(!ss(t))throw new Q(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Jt(e,t,n)}});function Ep(t,e){jn(t,e);for(let r=0;r<t.length;r++)as(t[r],`${e}[${r}]`)}function Ap(t,e){jn(t,e);for(let r=0;r<t.length;r++)bl(t[r],`${e}[${r}]`)}function vp(t,e){jn(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new Q(i,"AbortSignal",n);gl(n,i)}}function Rp(t,e="signal"){if(as(t,e),dl[t]===void 0)throw dl[op(t)]!==void 0?new cl(t+" (signals must use all capital letters)"):new cl(t)}var Tp=se((t,e="buffer")=>{if(!cp(t))throw new Q(e,["Buffer","TypedArray","DataView"],t)});function Ip(t,e){let r=up(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Jt("encoding",e,`is invalid for data of length ${n}`)}function kp(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&ap(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new lp(e,t,r);return t|0}var gl=se((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Q(e,"AbortSignal",t)}),jp=se((t,e)=>{if(typeof t!="function")throw new Q(e,"Function",t)}),Np=se((t,e)=>{if(typeof t!="function"||fp(t))throw new Q(e,"Function",t)}),Pp=se((t,e)=>{if(t!==void 0)throw new Q(e,"undefined",t)});function Lp(t,e,r){if(!pl(r,t))throw new Q(e,`('${ml(r,"|")}')`,t)}var Op=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function hl(t,e){if(typeof t>"u"||!yl(Op,t))throw new Jt(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Bp(t){if(typeof t=="string")return hl(t,"hints"),t;if(ss(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];hl(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Jt("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}wl.exports={isInt32:dp,isUint32:hp,parseFileMode:yp,validateArray:jn,validateStringArray:Ep,validateBooleanArray:Ap,validateAbortSignalArray:vp,validateBoolean:bl,validateBuffer:Tp,validateDictionary:Sp,validateEncoding:Ip,validateFunction:jp,validateInt32:bp,validateInteger:_p,validateNumber:gp,validateObject:xp,validateOneOf:wp,validatePlainFunction:Np,validatePort:kp,validateSignalName:Rp,validateString:as,validateUint32:_l,validateUndefined:Pp,validateUnion:Lp,validateAbortSignal:gl,validateLinkHeaderValue:Bp}});var Ye=T((r0,Al)=>{var C=Al.exports={},ge,we;function ls(){throw new Error("setTimeout has not been defined")}function us(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ge=setTimeout:ge=ls}catch{ge=ls}try{typeof clearTimeout=="function"?we=clearTimeout:we=us}catch{we=us}})();function xl(t){if(ge===setTimeout)return setTimeout(t,0);if((ge===ls||!ge)&&setTimeout)return ge=setTimeout,setTimeout(t,0);try{return ge(t,0)}catch{try{return ge.call(null,t,0)}catch{return ge.call(this,t,0)}}}function Cp(t){if(we===clearTimeout)return clearTimeout(t);if((we===us||!we)&&clearTimeout)return we=clearTimeout,clearTimeout(t);try{return we(t)}catch{try{return we.call(null,t)}catch{return we.call(this,t)}}}var Le=[],Zt=!1,gt,Nn=-1;function Fp(){!Zt||!gt||(Zt=!1,gt.length?Le=gt.concat(Le):Nn=-1,Le.length&&Sl())}function Sl(){if(!Zt){var t=xl(Fp);Zt=!0;for(var e=Le.length;e;){for(gt=Le,Le=[];++Nn<e;)gt&&gt[Nn].run();Nn=-1,e=Le.length}gt=null,Zt=!1,Cp(t)}}C.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Le.push(new El(t,e)),Le.length===1&&!Zt&&xl(Sl)};function El(t,e){this.fun=t,this.array=e}El.prototype.run=function(){this.fun.apply(null,this.array)};C.title="browser";C.browser=!0;C.env={};C.argv=[];C.version="";C.versions={};function Oe(){}C.on=Oe;C.addListener=Oe;C.once=Oe;C.off=Oe;C.removeListener=Oe;C.removeAllListeners=Oe;C.emit=Oe;C.prependListener=Oe;C.prependOnceListener=Oe;C.listeners=function(t){return[]};C.binding=function(t){throw new Error("process.binding is not supported")};C.cwd=function(){return"/"};C.chdir=function(t){throw new Error("process.chdir is not supported")};C.umask=function(){return 0}});var Se=T((n0,Dl)=>{"use strict";var{SymbolAsyncIterator:vl,SymbolIterator:Rl,SymbolFor:wt}=P(),Tl=wt("nodejs.stream.destroyed"),Il=wt("nodejs.stream.errored"),fs=wt("nodejs.stream.readable"),cs=wt("nodejs.stream.writable"),kl=wt("nodejs.stream.disturbed"),Mp=wt("nodejs.webstream.isClosedPromise"),Dp=wt("nodejs.webstream.controllerErrorFunction");function Pn(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function Ln(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Up(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function xe(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function jl(t){return!!(t&&!xe(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function Nl(t){return!!(t&&!xe(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function Pl(t){return!!(t&&!xe(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function $p(t){return jl(t)||Nl(t)||Pl(t)}function qp(t,e){return t==null?!1:e===!0?typeof t[vl]=="function":e===!1?typeof t[Rl]=="function":typeof t[vl]=="function"||typeof t[Rl]=="function"}function On(t){if(!xe(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[Tl]||n!=null&&n.destroyed)}function Ll(t){if(!Ln(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Wp(t,e){if(!Ln(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function zp(t){if(!Pn(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Ol(t,e){if(!Pn(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function Bl(t){return t&&t[fs]!=null?t[fs]:typeof t?.readable!="boolean"?null:On(t)?!1:Pn(t)&&t.readable&&!Ol(t)}function Cl(t){return t&&t[cs]!=null?t[cs]:typeof t?.writable!="boolean"?null:On(t)?!1:Ln(t)&&t.writable&&!Ll(t)}function Hp(t,e){return xe(t)?On(t)?!0:!(e?.readable!==!1&&Bl(t)||e?.writable!==!1&&Cl(t)):null}function Gp(t){var e,r;return xe(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Kp(t){var e,r;return xe(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Vp(t){if(!xe(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&Fl(t)?t._closed:null}function Fl(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function Ml(t){return typeof t._sent100=="boolean"&&Fl(t)}function Qp(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Jp(t){if(!xe(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&Ml(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Yp(t){var e;return!!(t&&((e=t[kl])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Zp(t){var e,r,n,i,s,o,a,l,u,f;return!!(t&&((e=(r=(n=(i=(s=(o=t[Il])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(u=t._readableState)===null||u===void 0?void 0:u.errored)!==null&&e!==void 0?e:!((f=t._writableState)===null||f===void 0)&&f.errored))}Dl.exports={isDestroyed:On,kIsDestroyed:Tl,isDisturbed:Yp,kIsDisturbed:kl,isErrored:Zp,kIsErrored:Il,isReadable:Bl,kIsReadable:fs,kIsClosedPromise:Mp,kControllerErrorFunction:Dp,kIsWritable:cs,isClosed:Vp,isDuplexNodeStream:Up,isFinished:Hp,isIterable:qp,isReadableNodeStream:Pn,isReadableStream:jl,isReadableEnded:zp,isReadableFinished:Ol,isReadableErrored:Kp,isNodeStream:xe,isWebStream:$p,isWritable:Cl,isWritableNodeStream:Ln,isWritableStream:Nl,isWritableEnded:Ll,isWritableFinished:Wp,isWritableErrored:Gp,isServerRequest:Qp,isServerResponse:Ml,willEmitClose:Jp,isTransformStream:Pl}});var Be=T((i0,ys)=>{"use strict";var Ze=Ye(),{AbortError:Vl,codes:Xp}=V(),{ERR_INVALID_ARG_TYPE:em,ERR_STREAM_PREMATURE_CLOSE:Ul}=Xp,{kEmptyObject:hs,once:ps}=J(),{validateAbortSignal:tm,validateFunction:rm,validateObject:nm,validateBoolean:im}=Yt(),{Promise:sm,PromisePrototypeThen:om,SymbolDispose:Ql}=P(),{isClosed:am,isReadable:$l,isReadableNodeStream:ds,isReadableStream:lm,isReadableFinished:ql,isReadableErrored:Wl,isWritable:zl,isWritableNodeStream:Hl,isWritableStream:um,isWritableFinished:Gl,isWritableErrored:Kl,isNodeStream:fm,willEmitClose:cm,kIsClosedPromise:dm}=Se(),Xt;function hm(t){return t.setHeader&&typeof t.abort=="function"}var ms=()=>{};function Jl(t,e,r){var n,i;if(arguments.length===2?(r=e,e=hs):e==null?e=hs:nm(e,"options"),rm(r,"callback"),tm(e.signal,"options.signal"),r=ps(r),lm(t)||um(t))return pm(t,e,r);if(!fm(t))throw new em("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:ds(t),o=(i=e.writable)!==null&&i!==void 0?i:Hl(t),a=t._writableState,l=t._readableState,u=()=>{t.writable||h()},f=cm(t)&&ds(t)===s&&Hl(t)===o,c=Gl(t,!1),h=()=>{c=!0,t.destroyed&&(f=!1),!(f&&(!t.readable||s))&&(!s||d)&&r.call(t)},d=ql(t,!1),p=()=>{d=!0,t.destroyed&&(f=!1),!(f&&(!t.writable||o))&&(!o||c)&&r.call(t)},m=R=>{r.call(t,R)},g=am(t),_=()=>{g=!0;let R=Kl(t)||Wl(t);if(R&&typeof R!="boolean")return r.call(t,R);if(s&&!d&&ds(t,!0)&&!ql(t,!1))return r.call(t,new Ul);if(o&&!c&&!Gl(t,!1))return r.call(t,new Ul);r.call(t)},b=()=>{g=!0;let R=Kl(t)||Wl(t);if(R&&typeof R!="boolean")return r.call(t,R);r.call(t)},S=()=>{t.req.on("finish",h)};hm(t)?(t.on("complete",h),f||t.on("abort",_),t.req?S():t.on("request",S)):o&&!a&&(t.on("end",u),t.on("close",u)),!f&&typeof t.aborted=="boolean"&&t.on("aborted",_),t.on("end",p),t.on("finish",h),e.error!==!1&&t.on("error",m),t.on("close",_),g?Ze.nextTick(_):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?f||Ze.nextTick(b):(!s&&(!f||$l(t))&&(c||zl(t)===!1)||!o&&(!f||zl(t))&&(d||$l(t)===!1)||l&&t.req&&t.aborted)&&Ze.nextTick(b);let w=()=>{r=ms,t.removeListener("aborted",_),t.removeListener("complete",h),t.removeListener("abort",_),t.removeListener("request",S),t.req&&t.req.removeListener("finish",h),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",h),t.removeListener("end",p),t.removeListener("error",m),t.removeListener("close",_)};if(e.signal&&!g){let R=()=>{let ke=r;w(),ke.call(t,new Vl(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Ze.nextTick(R);else{Xt=Xt||J().addAbortListener;let ke=Xt(e.signal,R),M=r;r=ps((...jt)=>{ke[Ql](),M.apply(t,jt)})}}return w}function pm(t,e,r){let n=!1,i=ms;if(e.signal)if(i=()=>{n=!0,r.call(t,new Vl(void 0,{cause:e.signal.reason}))},e.signal.aborted)Ze.nextTick(i);else{Xt=Xt||J().addAbortListener;let o=Xt(e.signal,i),a=r;r=ps((...l)=>{o[Ql](),a.apply(t,l)})}let s=(...o)=>{n||Ze.nextTick(()=>r.apply(t,o))};return om(t[dm].promise,s,s),ms}function mm(t,e){var r;let n=!1;return e===null&&(e=hs),(r=e)!==null&&r!==void 0&&r.cleanup&&(im(e.cleanup,"cleanup"),n=e.cleanup),new sm((i,s)=>{let o=Jl(t,e,a=>{n&&o(),a?s(a):i()})})}ys.exports=Jl;ys.exports.finished=mm});var xt=T((s0,iu)=>{"use strict";var Ee=Ye(),{aggregateTwoErrors:ym,codes:{ERR_MULTIPLE_CALLBACK:_m},AbortError:bm}=V(),{Symbol:Xl}=P(),{kIsDestroyed:gm,isDestroyed:wm,isFinished:xm,isServerRequest:Sm}=Se(),eu=Xl("kDestroy"),_s=Xl("kConstruct");function tu(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function Em(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(tu(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?Yl(this,t,e):this.once(eu,function(s){Yl(this,ym(s,t),e)}),this)}function Yl(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;tu(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?Ee.nextTick(Am,t,s):Ee.nextTick(ru,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function Am(t,e){bs(t,e),ru(t)}function ru(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function bs(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function vm(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function gs(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Ee.nextTick(bs,t,e):bs(t,e))}function Rm(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(_s,e),!(t.listenerCount(_s)>1)&&Ee.nextTick(Tm,t)}function Tm(t){let e=!1;function r(n){if(e){gs(t,n??new _m);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(eu,n):n?gs(t,n,!0):Ee.nextTick(Im,t)}try{t._construct(n=>{Ee.nextTick(r,n)})}catch(n){Ee.nextTick(r,n)}}function Im(t){t.emit(_s)}function Zl(t){return t?.setHeader&&typeof t.abort=="function"}function nu(t){t.emit("close")}function km(t,e){t.emit("error",e),Ee.nextTick(nu,t)}function jm(t,e){!t||wm(t)||(!e&&!xm(t)&&(e=new bm),Sm(t)?(t.socket=null,t.destroy(e)):Zl(t)?t.abort():Zl(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Ee.nextTick(km,t,e):Ee.nextTick(nu,t),t.destroyed||(t[gm]=!0))}iu.exports={construct:Rm,destroyer:jm,destroy:Em,undestroy:vm,errorOrDestroy:gs}});var Fn=T((o0,ou)=>{"use strict";var{ArrayIsArray:Nm,ObjectSetPrototypeOf:su}=P(),{EventEmitter:Bn}=kr();function Cn(t){Bn.call(this,t)}su(Cn.prototype,Bn.prototype);su(Cn,Bn);Cn.prototype.pipe=function(t,e){let r=this;function n(f){t.writable&&t.write(f)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(f){u(),Bn.listenerCount(this,"error")===0&&this.emit("error",f)}ws(r,"error",l),ws(t,"error",l);function u(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t};function ws(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Nm(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}ou.exports={Stream:Cn,prependListener:ws}});var jr=T((a0,Mn)=>{"use strict";var{SymbolDispose:Pm}=P(),{AbortError:au,codes:Lm}=V(),{isNodeStream:lu,isWebStream:Om,kControllerErrorFunction:Bm}=Se(),Cm=Be(),{ERR_INVALID_ARG_TYPE:uu}=Lm,xs,Fm=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new uu(e,"AbortSignal",t)};Mn.exports.addAbortSignal=function(e,r){if(Fm(e,"signal"),!lu(r)&&!Om(r))throw new uu("stream",["ReadableStream","WritableStream","Stream"],r);return Mn.exports.addAbortSignalNoValidate(e,r)};Mn.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=lu(e)?()=>{e.destroy(new au(void 0,{cause:t.reason}))}:()=>{e[Bm](new au(void 0,{cause:t.reason}))};if(t.aborted)r();else{xs=xs||J().addAbortListener;let n=xs(t,r);Cm(e,n[Pm])}return e}});var du=T((u0,cu)=>{"use strict";var{StringPrototypeSlice:fu,SymbolIterator:Mm,TypedArrayPrototypeSet:Dn,Uint8Array:Dm}=P(),{Buffer:Ss}=_e(),{inspect:Um}=J();cu.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return Ss.alloc(0);let r=Ss.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)Dn(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Mm](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=fu(s,0,e),this.head=n,n.data=fu(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=Ss.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)Dn(r,o,n-e),e-=o.length;else{e===o.length?(Dn(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(Dn(r,new Dm(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return Um(this,{...r,depth:0,customInspect:!1})}}});var Nr=T((f0,yu)=>{"use strict";var{MathFloor:$m,NumberIsInteger:qm}=P(),{validateInteger:Wm}=Yt(),{ERR_INVALID_ARG_VALUE:zm}=V().codes,hu=16*1024,pu=16;function Hm(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function mu(t){return t?pu:hu}function Gm(t,e){Wm(e,"value",0),t?pu=e:hu=e}function Km(t,e,r,n){let i=Hm(e,n,r);if(i!=null){if(!qm(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new zm(s,i)}return $m(i)}return mu(t.objectMode)}yu.exports={getHighWaterMark:Km,getDefaultHighWaterMark:mu,setDefaultHighWaterMark:Gm}});var gu=T((Es,bu)=>{var Un=_e(),Ae=Un.Buffer;function _u(t,e){for(var r in t)e[r]=t[r]}Ae.from&&Ae.alloc&&Ae.allocUnsafe&&Ae.allocUnsafeSlow?bu.exports=Un:(_u(Un,Es),Es.Buffer=St);function St(t,e,r){return Ae(t,e,r)}St.prototype=Object.create(Ae.prototype);_u(Ae,St);St.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ae(t,e,r)};St.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Ae(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};St.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ae(t)};St.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Un.SlowBuffer(t)}});var Su=T(xu=>{"use strict";var vs=gu().Buffer,wu=vs.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Vm(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Qm(t){var e=Vm(t);if(typeof e!="string"&&(vs.isEncoding===wu||!wu(t)))throw new Error("Unknown encoding: "+t);return e||t}xu.StringDecoder=Pr;function Pr(t){this.encoding=Qm(t);var e;switch(this.encoding){case"utf16le":this.text=ty,this.end=ry,e=4;break;case"utf8":this.fillLast=Zm,e=4;break;case"base64":this.text=ny,this.end=iy,e=3;break;default:this.write=sy,this.end=oy;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=vs.allocUnsafe(e)}Pr.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Pr.prototype.end=ey;Pr.prototype.text=Xm;Pr.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function As(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Jm(t,e,r){var n=e.length-1;if(n<r)return 0;var i=As(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=As(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=As(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Ym(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Zm(t){var e=this.lastTotal-this.lastNeed,r=Ym(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Xm(t,e){var r=Jm(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function ey(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function ty(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function ry(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function ny(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function iy(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function sy(t){return t.toString(this.encoding)}function oy(t){return t&&t.length?this.write(t):""}});var Rs=T((d0,Ru)=>{"use strict";var Eu=Ye(),{PromisePrototypeThen:ay,SymbolAsyncIterator:Au,SymbolIterator:vu}=P(),{Buffer:ly}=_e(),{ERR_INVALID_ARG_TYPE:uy,ERR_STREAM_NULL_VALUES:fy}=V().codes;function cy(t,e,r){let n;if(typeof e=="string"||e instanceof ly)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[Au])i=!0,n=e[Au]();else if(e&&e[vu])i=!1,n=e[vu]();else throw new uy("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(u,f){ay(a(u),()=>Eu.nextTick(f,u),c=>Eu.nextTick(f,c||u))};async function a(u){let f=u!=null,c=typeof n.throw=="function";if(f&&c){let{value:h,done:d}=await n.throw(u);if(await h,d)return}if(typeof n.return=="function"){let{value:h}=await n.return();await h}}async function l(){for(;;){try{let{value:u,done:f}=i?await n.next():n.next();if(f)s.push(null);else{let c=u&&typeof u.then=="function"?await u:u;if(c===null)throw o=!1,new fy;if(s.push(c))continue;o=!1}}catch(u){s.destroy(u)}break}}return s}Ru.exports=cy});var Or=T((h0,zu)=>{"use strict";var fe=Ye(),{ArrayPrototypeIndexOf:dy,NumberIsInteger:hy,NumberIsNaN:py,NumberParseInt:my,ObjectDefineProperties:Os,ObjectKeys:yy,ObjectSetPrototypeOf:ku,Promise:ju,SafeSet:_y,SymbolAsyncDispose:by,SymbolAsyncIterator:gy,Symbol:wy}=P();zu.exports=E;E.ReadableState=zn;var{EventEmitter:xy}=kr(),{Stream:Xe,prependListener:Sy}=Fn(),{Buffer:Ts}=_e(),{addAbortSignal:Ey}=jr(),Nu=Be(),v=J().debuglog("stream",t=>{v=t}),Ay=du(),rr=xt(),{getHighWaterMark:vy,getDefaultHighWaterMark:Ry}=Nr(),{aggregateTwoErrors:Tu,codes:{ERR_INVALID_ARG_TYPE:Ty,ERR_METHOD_NOT_IMPLEMENTED:Iy,ERR_OUT_OF_RANGE:ky,ERR_STREAM_PUSH_AFTER_EOF:jy,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Ny},AbortError:Py}=V(),{validateObject:Ly}=Yt(),Et=wy("kPaused"),{StringDecoder:Pu}=Su(),Oy=Rs();ku(E.prototype,Xe.prototype);ku(E,Xe);var Is=()=>{},{errorOrDestroy:er}=rr,tr=1,By=2,Lu=4,Lr=8,Ou=16,$n=32,qn=64,Bu=128,Cy=256,Fy=512,My=1024,Ps=2048,Ls=4096,Dy=8192,Uy=16384,$y=32768,Cu=65536,qy=1<<17,Wy=1<<18;function D(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}Os(zn.prototype,{objectMode:D(tr),ended:D(By),endEmitted:D(Lu),reading:D(Lr),constructed:D(Ou),sync:D($n),needReadable:D(qn),emittedReadable:D(Bu),readableListening:D(Cy),resumeScheduled:D(Fy),errorEmitted:D(My),emitClose:D(Ps),autoDestroy:D(Ls),destroyed:D(Dy),closed:D(Uy),closeEmitted:D($y),multiAwaitDrain:D(Cu),readingMore:D(qy),dataEmitted:D(Wy)});function zn(t,e,r){typeof r!="boolean"&&(r=e instanceof ve()),this.state=Ps|Ls|Ou|$n,t&&t.objectMode&&(this.state|=tr),r&&t&&t.readableObjectMode&&(this.state|=tr),this.highWaterMark=t?vy(this,t,"readableHighWaterMark",r):Ry(!1),this.buffer=new Ay,this.length=0,this.pipes=[],this.flowing=null,this[Et]=null,t&&t.emitClose===!1&&(this.state&=~Ps),t&&t.autoDestroy===!1&&(this.state&=~Ls),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new Pu(t.encoding),this.encoding=t.encoding)}function E(t){if(!(this instanceof E))return new E(t);let e=this instanceof ve();this._readableState=new zn(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Ey(t.signal,this)),Xe.call(this,t),rr.construct(this,()=>{this._readableState.needReadable&&Wn(this,this._readableState)})}E.prototype.destroy=rr.destroy;E.prototype._undestroy=rr.undestroy;E.prototype._destroy=function(t,e){e(t)};E.prototype[xy.captureRejectionSymbol]=function(t){this.destroy(t)};E.prototype[by]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new Py,this.destroy(t)),new ju((e,r)=>Nu(this,n=>n&&n!==t?r(n):e(null)))};E.prototype.push=function(t,e){return Fu(this,t,e,!1)};E.prototype.unshift=function(t,e){return Fu(this,t,e,!0)};function Fu(t,e,r,n){v("readableAddChunk",e);let i=t._readableState,s;if((i.state&tr)===0&&(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=Ts.from(e,r).toString(i.encoding):(e=Ts.from(e,r),r=""))):e instanceof Ts?r="":Xe._isUint8Array(e)?(e=Xe._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new Ty("chunk",["string","Buffer","Uint8Array"],e))),s)er(t,s);else if(e===null)i.state&=~Lr,Gy(t,i);else if((i.state&tr)!==0||e&&e.length>0)if(n)if((i.state&Lu)!==0)er(t,new Ny);else{if(i.destroyed||i.errored)return!1;ks(t,i,e,!0)}else if(i.ended)er(t,new jy);else{if(i.destroyed||i.errored)return!1;i.state&=~Lr,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?ks(t,i,e,!1):Wn(t,i)):ks(t,i,e,!1)}else n||(i.state&=~Lr,Wn(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function ks(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&Cu)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&qn)!==0&&Hn(t)),Wn(t,e)}E.prototype.isPaused=function(){let t=this._readableState;return t[Et]===!0||t.flowing===!1};E.prototype.setEncoding=function(t){let e=new Pu(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var zy=1073741824;function Hy(t){if(t>zy)throw new ky("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function Iu(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&tr)!==0?1:py(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}E.prototype.read=function(t){v("read",t),t===void 0?t=NaN:hy(t)||(t=my(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=Hy(t)),t!==0&&(e.state&=~Bu),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return v("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?js(this):Hn(this),null;if(t=Iu(t,e),t===0&&e.ended)return e.length===0&&js(this),null;let n=(e.state&qn)!==0;if(v("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,v("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,v("reading, ended or constructing",n);else if(n){v("do read"),e.state|=Lr|$n,e.length===0&&(e.state|=qn);try{this._read(e.highWaterMark)}catch(s){er(this,s)}e.state&=~$n,e.reading||(t=Iu(r,e))}let i;return t>0?i=qu(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&js(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function Gy(t,e){if(v("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Hn(t):(e.needReadable=!1,e.emittedReadable=!0,Mu(t))}}function Hn(t){let e=t._readableState;v("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(v("emitReadable",e.flowing),e.emittedReadable=!0,fe.nextTick(Mu,t))}function Mu(t){let e=t._readableState;v("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Uu(t)}function Wn(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,fe.nextTick(Ky,t,e))}function Ky(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(v("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}E.prototype._read=function(t){throw new Iy("_read()")};E.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new _y(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),v("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==fe.stdout&&t!==fe.stderr?a:g;n.endEmitted?fe.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(_,b){v("onunpipe"),_===r&&b&&b.hasUnpiped===!1&&(b.hasUnpiped=!0,f())}function a(){v("onend"),t.end()}let l,u=!1;function f(){v("cleanup"),t.removeListener("close",p),t.removeListener("finish",m),l&&t.removeListener("drain",l),t.removeListener("error",d),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",h),u=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function c(){u||(n.pipes.length===1&&n.pipes[0]===t?(v("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(v("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=Vy(r,t),t.on("drain",l))}r.on("data",h);function h(_){v("ondata");let b=t.write(_);v("dest.write",b),b===!1&&c()}function d(_){if(v("onerror",_),g(),t.removeListener("error",d),t.listenerCount("error")===0){let b=t._writableState||t._readableState;b&&!b.errorEmitted?er(t,_):t.emit("error",_)}}Sy(t,"error",d);function p(){t.removeListener("finish",m),g()}t.once("close",p);function m(){v("onfinish"),t.removeListener("close",p),g()}t.once("finish",m);function g(){v("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?c():n.flowing||(v("pipe resume"),r.resume()),t};function Vy(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(v("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(v("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}E.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=dy(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};E.prototype.on=function(t,e){let r=Xe.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,v("on readable",n.length,n.reading),n.length?Hn(this):n.reading||fe.nextTick(Qy,this)),r};E.prototype.addListener=E.prototype.on;E.prototype.removeListener=function(t,e){let r=Xe.prototype.removeListener.call(this,t,e);return t==="readable"&&fe.nextTick(Du,this),r};E.prototype.off=E.prototype.removeListener;E.prototype.removeAllListeners=function(t){let e=Xe.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&fe.nextTick(Du,this),e};function Du(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Et]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function Qy(t){v("readable nexttick read 0"),t.read(0)}E.prototype.resume=function(){let t=this._readableState;return t.flowing||(v("resume"),t.flowing=!t.readableListening,Jy(this,t)),t[Et]=!1,this};function Jy(t,e){e.resumeScheduled||(e.resumeScheduled=!0,fe.nextTick(Yy,t,e))}function Yy(t,e){v("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Uu(t),e.flowing&&!e.reading&&t.read(0)}E.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Et]=!0,this};function Uu(t){let e=t._readableState;for(v("flow",e.flowing);e.flowing&&t.read()!==null;);}E.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{er(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=yy(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};E.prototype[gy]=function(){return $u(this)};E.prototype.iterator=function(t){return t!==void 0&&Ly(t,"options"),$u(this,t)};function $u(t,e){typeof t.read!="function"&&(t=E.wrap(t,{objectMode:!0}));let r=Zy(t,e);return r.stream=t,r}async function*Zy(t,e){let r=Is;function n(o){this===t?(r(),r=Is):r=o}t.on("readable",n);let i,s=Nu(t,{writable:!1},o=>{i=o?Tu(i,o):null,r(),r=Is});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new ju(n)}}}catch(o){throw i=Tu(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?rr.destroyer(t,null):(t.off("readable",n),s())}}Os(E.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Os(zn.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Et]!==!1},set(t){this[Et]=!!t}}});E._fromList=qu;function qu(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function js(t){let e=t._readableState;v("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,fe.nextTick(Xy,e,t))}function Xy(t,e){if(v("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)fe.nextTick(e_,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function e_(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}E.from=function(t,e){return Oy(E,t,e)};var Ns;function Wu(){return Ns===void 0&&(Ns={}),Ns}E.fromWeb=function(t,e){return Wu().newStreamReadableFromReadableStream(t,e)};E.toWeb=function(t,e){return Wu().newReadableStreamFromStreamReadable(t,e)};E.wrap=function(t,e){var r,n;return new E({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){rr.destroyer(t,i),s(i)}}).wrap(t)}});var Jn=T((p0,rf)=>{"use strict";var At=Ye(),{ArrayPrototypeSlice:Ku,Error:t_,FunctionPrototypeSymbolHasInstance:Vu,ObjectDefineProperty:Qu,ObjectDefineProperties:r_,ObjectSetPrototypeOf:Ju,StringPrototypeToLowerCase:n_,Symbol:i_,SymbolHasInstance:s_}=P();rf.exports=O;O.WritableState=Fr;var{EventEmitter:o_}=kr(),Br=Fn().Stream,{Buffer:Gn}=_e(),Qn=xt(),{addAbortSignal:a_}=jr(),{getHighWaterMark:l_,getDefaultHighWaterMark:u_}=Nr(),{ERR_INVALID_ARG_TYPE:f_,ERR_METHOD_NOT_IMPLEMENTED:c_,ERR_MULTIPLE_CALLBACK:Yu,ERR_STREAM_CANNOT_PIPE:d_,ERR_STREAM_DESTROYED:Cr,ERR_STREAM_ALREADY_FINISHED:h_,ERR_STREAM_NULL_VALUES:p_,ERR_STREAM_WRITE_AFTER_END:m_,ERR_UNKNOWN_ENCODING:Zu}=V().codes,{errorOrDestroy:nr}=Qn;Ju(O.prototype,Br.prototype);Ju(O,Br);function Fs(){}var ir=i_("kOnFinished");function Fr(t,e,r){typeof r!="boolean"&&(r=e instanceof ve()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?l_(this,t,"writableHighWaterMark",r):u_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=__.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Vn(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[ir]=[]}function Vn(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Fr.prototype.getBuffer=function(){return Ku(this.buffered,this.bufferedIndex)};Qu(Fr.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function O(t){let e=this instanceof ve();if(!e&&!Vu(O,this))return new O(t);this._writableState=new Fr(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&a_(t.signal,this)),Br.call(this,t),Qn.construct(this,()=>{let r=this._writableState;r.writing||Ds(this,r),Us(this,r)})}Qu(O,s_,{__proto__:null,value:function(t){return Vu(this,t)?!0:this!==O?!1:t&&t._writableState instanceof Fr}});O.prototype.pipe=function(){nr(this,new d_)};function Xu(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!Gn.isEncoding(r))throw new Zu(r);typeof n!="function"&&(n=Fs)}if(e===null)throw new p_;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=Gn.from(e,r),r="buffer");else if(e instanceof Gn)r="buffer";else if(Br._isUint8Array(e))e=Br._uint8ArrayToBuffer(e),r="buffer";else throw new f_("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new m_:i.destroyed&&(s=new Cr("write")),s?(At.nextTick(n,s),nr(t,s,!0),s):(i.pendingcb++,y_(t,i,e,r,n))}O.prototype.write=function(t,e,r){return Xu(this,t,e,r)===!0};O.prototype.cork=function(){this._writableState.corked++};O.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Ds(this,t))};O.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=n_(e)),!Gn.isEncoding(e))throw new Zu(e);return this._writableState.defaultEncoding=e,this};function y_(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==Fs&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function Hu(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Cr("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Gu(t,e,r,n){--e.pendingcb,n(r),Ms(e),nr(t,r)}function __(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){nr(t,new Yu);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?At.nextTick(Gu,t,r,e,i):Gu(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&Ds(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},At.nextTick(b_,r.afterWriteTickInfo)):ef(t,r,1,i))}function b_({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,ef(t,e,r,n)}function ef(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&Ms(e),Us(t,e)}function Ms(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Cr("write"))}let r=t[ir].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new Cr("end"))}Vn(t)}function Ds(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?Fs:u=>{for(let f=o;f<r.length;++f)r[f].callback(u)},l=e.allNoop&&o===0?r:Ku(r,o);l.allBuffers=e.allBuffers,Hu(t,e,!0,e.length,l,"",a),Vn(e)}else{do{let{chunk:a,encoding:l,callback:u}=r[o];r[o++]=null;let f=i?1:a.length;Hu(t,e,!1,f,a,l,u)}while(o<r.length&&!e.writing);o===r.length?Vn(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}O.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new c_("_write()")};O.prototype._writev=null;O.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=Xu(this,t,e);s instanceof t_&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,Us(this,n,!0),n.ended=!0):n.finished?i=new h_("end"):n.destroyed&&(i=new Cr("end"))),typeof r=="function"&&(i||n.finished?At.nextTick(r,i):n[ir].push(r)),this};function Kn(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function g_(t,e){let r=!1;function n(i){if(r){nr(t,i??Yu());return}if(r=!0,e.pendingcb--,i){let s=e[ir].splice(0);for(let o=0;o<s.length;o++)s[o](i);nr(t,i,e.sync)}else Kn(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,At.nextTick(Cs,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function w_(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,g_(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Us(t,e,r){Kn(e)&&(w_(t,e),e.pendingcb===0&&(r?(e.pendingcb++,At.nextTick((n,i)=>{Kn(i)?Cs(n,i):i.pendingcb--},t,e)):Kn(e)&&(e.pendingcb++,Cs(t,e))))}function Cs(t,e){e.pendingcb--,e.finished=!0;let r=e[ir].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}r_(O.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var x_=Qn.destroy;O.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[ir].length)&&At.nextTick(Ms,r),x_.call(this,t,e),this};O.prototype._undestroy=Qn.undestroy;O.prototype._destroy=function(t,e){e(t)};O.prototype[o_.captureRejectionSymbol]=function(t){this.destroy(t)};var Bs;function tf(){return Bs===void 0&&(Bs={}),Bs}O.fromWeb=function(t,e){return tf().newStreamWritableFromWritableStream(t,e)};O.toWeb=function(t){return tf().newWritableStreamFromStreamWritable(t)}});var bf=T((m0,_f)=>{var $s=Ye(),S_=_e(),{isReadable:E_,isWritable:A_,isIterable:nf,isNodeStream:v_,isReadableNodeStream:sf,isWritableNodeStream:of,isDuplexNodeStream:R_,isReadableStream:af,isWritableStream:lf}=Se(),uf=Be(),{AbortError:mf,codes:{ERR_INVALID_ARG_TYPE:T_,ERR_INVALID_RETURN_VALUE:ff}}=V(),{destroyer:or}=xt(),I_=ve(),yf=Or(),k_=Jn(),{createDeferredPromise:cf}=J(),df=Rs(),hf=globalThis.Blob||S_.Blob,j_=typeof hf<"u"?function(e){return e instanceof hf}:function(e){return!1},N_=globalThis.AbortController||Vt().AbortController,{FunctionPrototypeCall:pf}=P(),et=class extends I_{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};_f.exports=function t(e,r){if(R_(e))return e;if(sf(e))return sr({readable:e});if(of(e))return sr({writable:e});if(v_(e))return sr({writable:!1,readable:!1});if(af(e))return sr({readable:yf.fromWeb(e)});if(lf(e))return sr({writable:k_.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=P_(e);if(nf(i))return df(et,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let u,f=pf(l,i,c=>{if(c!=null)throw new ff("nully","body",c)},c=>{or(u,c)});return u=new et({objectMode:!0,readable:!1,write:s,final(c){o(async()=>{try{await f,$s.nextTick(c,null)}catch(h){$s.nextTick(c,h)}})},destroy:a})}throw new ff("Iterable, AsyncIterable or AsyncFunction",r,i)}if(j_(e))return t(e.arrayBuffer());if(nf(e))return df(et,e,{objectMode:!0,writable:!1});if(af(e?.readable)&&lf(e?.writable))return et.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?sf(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?of(e?.writable)?e?.writable:t(e.writable):void 0;return sr({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return pf(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{or(i,s)}),i=new et({objectMode:!0,writable:!1,read(){}})}throw new T_(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function P_(t){let{promise:e,resolve:r}=cf(),n=new N_,i=n.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:u}=await o;if($s.nextTick(u),l)return;if(i.aborted)throw new mf(void 0,{cause:i.reason});({promise:e,resolve:r}=cf()),yield a}})(),{signal:i}),write(o,a,l){let u=r;r=null,u({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function sr(t){let e=t.readable&&typeof t.readable.read!="function"?yf.wrap(t.readable):t.readable,r=t.writable,n=!!E_(e),i=!!A_(r),s,o,a,l,u;function f(c){let h=l;l=null,h?h(c):c&&u.destroy(c)}return u=new et({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(uf(r,c=>{i=!1,c&&or(e,c),f(c)}),u._write=function(c,h,d){r.write(c,h)?d():s=d},u._final=function(c){r.end(),o=c},r.on("drain",function(){if(s){let c=s;s=null,c()}}),r.on("finish",function(){if(o){let c=o;o=null,c()}})),n&&(uf(e,c=>{n=!1,c&&or(e,c),f(c)}),e.on("readable",function(){if(a){let c=a;a=null,c()}}),e.on("end",function(){u.push(null)}),u._read=function(){for(;;){let c=e.read();if(c===null){a=u._read;return}if(!u.push(c))return}}),u._destroy=function(c,h){!c&&l!==null&&(c=new mf),a=null,s=null,o=null,l===null?h(c):(l=h,or(r,c),or(e,c))},u}});var ve=T((y0,xf)=>{"use strict";var{ObjectDefineProperties:L_,ObjectGetOwnPropertyDescriptor:Ce,ObjectKeys:O_,ObjectSetPrototypeOf:gf}=P();xf.exports=ce;var zs=Or(),oe=Jn();gf(ce.prototype,zs.prototype);gf(ce,zs);{let t=O_(oe.prototype);for(let e=0;e<t.length;e++){let r=t[e];ce.prototype[r]||(ce.prototype[r]=oe.prototype[r])}}function ce(t){if(!(this instanceof ce))return new ce(t);zs.call(this,t),oe.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}L_(ce.prototype,{writable:{__proto__:null,...Ce(oe.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Ce(oe.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Ce(oe.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Ce(oe.prototype,"writableBuffer")},writableLength:{__proto__:null,...Ce(oe.prototype,"writableLength")},writableFinished:{__proto__:null,...Ce(oe.prototype,"writableFinished")},writableCorked:{__proto__:null,...Ce(oe.prototype,"writableCorked")},writableEnded:{__proto__:null,...Ce(oe.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Ce(oe.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var qs;function wf(){return qs===void 0&&(qs={}),qs}ce.fromWeb=function(t,e){return wf().newStreamDuplexFromReadableWritablePair(t,e)};ce.toWeb=function(t){return wf().newReadableWritablePairFromDuplex(t)};var Ws;ce.from=function(t){return Ws||(Ws=bf()),Ws(t,"body")}});var Ks=T((_0,Ef)=>{"use strict";var{ObjectSetPrototypeOf:Sf,Symbol:B_}=P();Ef.exports=Fe;var{ERR_METHOD_NOT_IMPLEMENTED:C_}=V().codes,Gs=ve(),{getHighWaterMark:F_}=Nr();Sf(Fe.prototype,Gs.prototype);Sf(Fe,Gs);var Mr=B_("kCallback");function Fe(t){if(!(this instanceof Fe))return new Fe(t);let e=t?F_(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Gs.call(this,t),this._readableState.sync=!1,this[Mr]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",M_)}function Hs(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function M_(){this._final!==Hs&&Hs.call(this)}Fe.prototype._final=Hs;Fe.prototype._transform=function(t,e,r){throw new C_("_transform()")};Fe.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[Mr]=r})};Fe.prototype._read=function(){if(this[Mr]){let t=this[Mr];this[Mr]=null,t()}}});var Qs=T((b0,vf)=>{"use strict";var{ObjectSetPrototypeOf:Af}=P();vf.exports=ar;var Vs=Ks();Af(ar.prototype,Vs.prototype);Af(ar,Vs);function ar(t){if(!(this instanceof ar))return new ar(t);Vs.call(this,t)}ar.prototype._transform=function(t,e,r){r(null,t)}});var ei=T((g0,jf)=>{var Dr=Ye(),{ArrayIsArray:D_,Promise:U_,SymbolAsyncIterator:$_,SymbolDispose:q_}=P(),Xn=Be(),{once:W_}=J(),z_=xt(),Rf=ve(),{aggregateTwoErrors:H_,codes:{ERR_INVALID_ARG_TYPE:io,ERR_INVALID_RETURN_VALUE:Js,ERR_MISSING_ARGS:G_,ERR_STREAM_DESTROYED:K_,ERR_STREAM_PREMATURE_CLOSE:V_},AbortError:Q_}=V(),{validateFunction:J_,validateAbortSignal:Y_}=Yt(),{isIterable:vt,isReadable:Ys,isReadableNodeStream:Zn,isNodeStream:Tf,isTransformStream:lr,isWebStream:Z_,isReadableStream:Zs,isReadableFinished:X_}=Se(),eb=globalThis.AbortController||Vt().AbortController,Xs,eo,to;function If(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=Xn(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,z_.destroyer(t,s||new K_("pipe")))},cleanup:i}}function tb(t){return J_(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function ro(t){if(vt(t))return t;if(Zn(t))return rb(t);throw new io("val",["Readable","Iterable","AsyncIterable"],t)}async function*rb(t){eo||(eo=Or()),yield*eo.prototype[$_].call(t)}async function Yn(t,e,r,{end:n}){let i,s=null,o=u=>{if(u&&(i=u),s){let f=s;s=null,f()}},a=()=>new U_((u,f)=>{i?f(i):s=()=>{i?f(i):u()}});e.on("drain",o);let l=Xn(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let u of t)e.write(u)||await a();n&&(e.end(),await a()),r()}catch(u){r(i!==u?H_(i,u):u)}finally{l(),e.off("drain",o)}}async function no(t,e,r,{end:n}){lr(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function nb(...t){return kf(t,W_(tb(t)))}function kf(t,e,r){if(t.length===1&&D_(t[0])&&(t=t[0]),t.length<2)throw new G_("streams");let n=new eb,i=n.signal,s=r?.signal,o=[];Y_(s,"options.signal");function a(){p(new Q_)}to=to||J().addAbortListener;let l;s&&(l=to(s,a));let u,f,c=[],h=0;function d(S){p(S,--h===0)}function p(S,w){var R;if(S&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=S),!(!u&&!w)){for(;c.length;)c.shift()(u);(R=l)===null||R===void 0||R[q_](),n.abort(),w&&(u||o.forEach(ke=>ke()),Dr.nextTick(e,u,f))}}let m;for(let S=0;S<t.length;S++){let w=t[S],R=S<t.length-1,ke=S>0,M=R||r?.end!==!1,jt=S===t.length-1;if(Tf(w)){let Z=function(je){je&&je.name!=="AbortError"&&je.code!=="ERR_STREAM_PREMATURE_CLOSE"&&d(je)};var b=Z;if(M){let{destroy:je,cleanup:pi}=If(w,R,ke);c.push(je),Ys(w)&&jt&&o.push(pi)}w.on("error",Z),Ys(w)&&jt&&o.push(()=>{w.removeListener("error",Z)})}if(S===0)if(typeof w=="function"){if(m=w({signal:i}),!vt(m))throw new Js("Iterable, AsyncIterable or Stream","source",m)}else vt(w)||Zn(w)||lr(w)?m=w:m=Rf.from(w);else if(typeof w=="function"){if(lr(m)){var g;m=ro((g=m)===null||g===void 0?void 0:g.readable)}else m=ro(m);if(m=w(m,{signal:i}),R){if(!vt(m,!0))throw new Js("AsyncIterable",`transform[${S-1}]`,m)}else{var _;Xs||(Xs=Qs());let Z=new Xs({objectMode:!0}),je=(_=m)===null||_===void 0?void 0:_.then;if(typeof je=="function")h++,je.call(m,Ue=>{f=Ue,Ue!=null&&Z.write(Ue),M&&Z.end(),Dr.nextTick(d)},Ue=>{Z.destroy(Ue),Dr.nextTick(d,Ue)});else if(vt(m,!0))h++,Yn(m,Z,d,{end:M});else if(Zs(m)||lr(m)){let Ue=m.readable||m;h++,Yn(Ue,Z,d,{end:M})}else throw new Js("AsyncIterable or Promise","destination",m);m=Z;let{destroy:pi,cleanup:Fc}=If(m,!1,!0);c.push(pi),jt&&o.push(Fc)}}else if(Tf(w)){if(Zn(m)){h+=2;let Z=ib(m,w,d,{end:M});Ys(w)&&jt&&o.push(Z)}else if(lr(m)||Zs(m)){let Z=m.readable||m;h++,Yn(Z,w,d,{end:M})}else if(vt(m))h++,Yn(m,w,d,{end:M});else throw new io("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],m);m=w}else if(Z_(w)){if(Zn(m))h++,no(ro(m),w,d,{end:M});else if(Zs(m)||vt(m))h++,no(m,w,d,{end:M});else if(lr(m))h++,no(m.readable,w,d,{end:M});else throw new io("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],m);m=w}else m=Rf.from(w)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Dr.nextTick(a),m}function ib(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new V_)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;X_(t)?Dr.nextTick(o):t.once("end",o)}else r();return Xn(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),Xn(e,{readable:!1,writable:!0},r)}jf.exports={pipelineImpl:kf,pipeline:nb}});var oo=T((w0,Cf)=>{"use strict";var{pipeline:sb}=ei(),ti=ve(),{destroyer:ob}=xt(),{isNodeStream:ri,isReadable:Nf,isWritable:Pf,isWebStream:so,isTransformStream:Rt,isWritableStream:Lf,isReadableStream:Of}=Se(),{AbortError:ab,codes:{ERR_INVALID_ARG_VALUE:Bf,ERR_MISSING_ARGS:lb}}=V(),ub=Be();Cf.exports=function(...e){if(e.length===0)throw new lb("streams");if(e.length===1)return ti.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=ti.from(e[0])),typeof e[e.length-1]=="function"){let d=e.length-1;e[d]=ti.from(e[d])}for(let d=0;d<e.length;++d)if(!(!ri(e[d])&&!so(e[d]))){if(d<e.length-1&&!(Nf(e[d])||Of(e[d])||Rt(e[d])))throw new Bf(`streams[${d}]`,r[d],"must be readable");if(d>0&&!(Pf(e[d])||Lf(e[d])||Rt(e[d])))throw new Bf(`streams[${d}]`,r[d],"must be writable")}let n,i,s,o,a;function l(d){let p=o;o=null,p?p(d):d?a.destroy(d):!h&&!c&&a.destroy()}let u=e[0],f=sb(e,l),c=!!(Pf(u)||Lf(u)||Rt(u)),h=!!(Nf(f)||Of(f)||Rt(f));if(a=new ti({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(f!=null&&f.readableObjectMode),writable:c,readable:h}),c){if(ri(u))a._write=function(p,m,g){u.write(p,m)?g():n=g},a._final=function(p){u.end(),i=p},u.on("drain",function(){if(n){let p=n;n=null,p()}});else if(so(u)){let m=(Rt(u)?u.writable:u).getWriter();a._write=async function(g,_,b){try{await m.ready,m.write(g).catch(()=>{}),b()}catch(S){b(S)}},a._final=async function(g){try{await m.ready,m.close().catch(()=>{}),i=g}catch(_){g(_)}}}let d=Rt(f)?f.readable:f;ub(d,()=>{if(i){let p=i;i=null,p()}})}if(h){if(ri(f))f.on("readable",function(){if(s){let d=s;s=null,d()}}),f.on("end",function(){a.push(null)}),a._read=function(){for(;;){let d=f.read();if(d===null){s=a._read;return}if(!a.push(d))return}};else if(so(f)){let p=(Rt(f)?f.readable:f).getReader();a._read=async function(){for(;;)try{let{value:m,done:g}=await p.read();if(!a.push(m))return;if(g){a.push(null);return}}catch{return}}}}return a._destroy=function(d,p){!d&&o!==null&&(d=new ab),s=null,n=null,i=null,o===null?p(d):(o=p,ri(f)&&ob(f,d))},a}});var Gf=T((x0,uo)=>{"use strict";var fb=globalThis.AbortController||Vt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:cb,ERR_INVALID_ARG_TYPE:Ur,ERR_MISSING_ARGS:db,ERR_OUT_OF_RANGE:hb},AbortError:Re}=V(),{validateAbortSignal:Tt,validateInteger:Ff,validateObject:It}=Yt(),pb=P().Symbol("kWeak"),mb=P().Symbol("kResistStopPropagation"),{finished:yb}=Be(),_b=oo(),{addAbortSignalNoValidate:bb}=jr(),{isWritable:gb,isNodeStream:wb}=Se(),{deprecate:xb}=J(),{ArrayPrototypePush:Sb,Boolean:Eb,MathFloor:Mf,Number:Ab,NumberIsNaN:vb,Promise:Df,PromiseReject:Uf,PromiseResolve:Rb,PromisePrototypeThen:$f,Symbol:Wf}=P(),ni=Wf("kEmpty"),qf=Wf("kEof");function Tb(t,e){if(e!=null&&It(e,"options"),e?.signal!=null&&Tt(e.signal,"options.signal"),wb(t)&&!gb(t))throw new cb("stream",t,"must be writable");let r=_b(this,t);return e!=null&&e.signal&&bb(e.signal,r),r}function ii(t,e){if(typeof t!="function")throw new Ur("fn",["Function","AsyncFunction"],t);e!=null&&It(e,"options"),e?.signal!=null&&Tt(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=Mf(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=Mf(e.highWaterMark)),Ff(r,"options.concurrency",1),Ff(n,"options.highWaterMark",0),n+=r,async function*(){let s=J().AbortSignalAny([e?.signal].filter(Eb)),o=this,a=[],l={signal:s},u,f,c=!1,h=0;function d(){c=!0,p()}function p(){h-=1,m()}function m(){f&&!c&&h<r&&a.length<n&&(f(),f=null)}async function g(){try{for await(let _ of o){if(c)return;if(s.aborted)throw new Re;try{if(_=t(_,l),_===ni)continue;_=Rb(_)}catch(b){_=Uf(b)}h+=1,$f(_,p,d),a.push(_),u&&(u(),u=null),!c&&(a.length>=n||h>=r)&&await new Df(b=>{f=b})}a.push(qf)}catch(_){let b=Uf(_);$f(b,p,d),a.push(b)}finally{c=!0,u&&(u(),u=null)}}g();try{for(;;){for(;a.length>0;){let _=await a[0];if(_===qf)return;if(s.aborted)throw new Re;_!==ni&&(yield _),a.shift(),m()}await new Df(_=>{u=_})}}finally{c=!0,f&&(f(),f=null)}}.call(this)}function Ib(t=void 0){return t!=null&&It(t,"options"),t?.signal!=null&&Tt(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Re({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function zf(t,e=void 0){for await(let r of lo.call(this,t,e))return!0;return!1}async function kb(t,e=void 0){if(typeof t!="function")throw new Ur("fn",["Function","AsyncFunction"],t);return!await zf.call(this,async(...r)=>!await t(...r),e)}async function jb(t,e){for await(let r of lo.call(this,t,e))return r}async function Nb(t,e){if(typeof t!="function")throw new Ur("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),ni}for await(let n of ii.call(this,r,e));}function lo(t,e){if(typeof t!="function")throw new Ur("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:ni}return ii.call(this,r,e)}var ao=class extends db{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function Pb(t,e,r){var n;if(typeof t!="function")throw new Ur("reducer",["Function","AsyncFunction"],t);r!=null&&It(r,"options"),r?.signal!=null&&Tt(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let u=new Re(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await yb(this.destroy(u)),u}let s=new fb,o=s.signal;if(r!=null&&r.signal){let u={once:!0,[pb]:this,[mb]:!0};r.signal.addEventListener("abort",()=>s.abort(),u)}let a=!1;try{for await(let u of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new Re;i?e=await t(e,u,{signal:o}):(e=u,i=!0)}if(!a&&!i)throw new ao}finally{s.abort()}return e}async function Lb(t){t!=null&&It(t,"options"),t?.signal!=null&&Tt(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Re(void 0,{cause:t.signal.reason});Sb(e,n)}return e}function Ob(t,e){let r=ii.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function Hf(t){if(t=Ab(t),vb(t))return 0;if(t<0)throw new hb("number",">= 0",t);return t}function Bb(t,e=void 0){return e!=null&&It(e,"options"),e?.signal!=null&&Tt(e.signal,"options.signal"),t=Hf(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Re;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Re;t--<=0&&(yield s)}}.call(this)}function Cb(t,e=void 0){return e!=null&&It(e,"options"),e?.signal!=null&&Tt(e.signal,"options.signal"),t=Hf(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Re;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Re;if(t-- >0&&(yield s),t<=0)return}}.call(this)}uo.exports.streamReturningOperators={asIndexedPairs:xb(Ib,"readable.asIndexedPairs will be removed in a future version."),drop:Bb,filter:lo,flatMap:Ob,map:ii,take:Cb,compose:Tb};uo.exports.promiseReturningOperators={every:kb,forEach:Nb,reduce:Pb,toArray:Lb,some:zf,find:jb}});var fo=T((S0,Kf)=>{"use strict";var{ArrayPrototypePop:Fb,Promise:Mb}=P(),{isIterable:Db,isNodeStream:Ub,isWebStream:$b}=Se(),{pipelineImpl:qb}=ei(),{finished:Wb}=Be();co();function zb(...t){return new Mb((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!Ub(s)&&!Db(s)&&!$b(s)){let o=Fb(t);n=o.signal,i=o.end}qb(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}Kf.exports={finished:Wb,pipeline:zb}});var co=T((E0,rc)=>{"use strict";var{Buffer:Hb}=_e(),{ObjectDefineProperty:Me,ObjectKeys:Jf,ReflectApply:Yf}=P(),{promisify:{custom:Zf}}=J(),{streamReturningOperators:Vf,promiseReturningOperators:Qf}=Gf(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:Xf}}=V(),Gb=oo(),{setDefaultHighWaterMark:Kb,getDefaultHighWaterMark:Vb}=Nr(),{pipeline:ec}=ei(),{destroyer:Qb}=xt(),tc=Be(),ho=fo(),$r=Se(),N=rc.exports=Fn().Stream;N.isDestroyed=$r.isDestroyed;N.isDisturbed=$r.isDisturbed;N.isErrored=$r.isErrored;N.isReadable=$r.isReadable;N.isWritable=$r.isWritable;N.Readable=Or();for(let t of Jf(Vf)){let r=function(...n){if(new.target)throw Xf();return N.Readable.from(Yf(e,this,n))},e=Vf[t];Me(r,"name",{__proto__:null,value:e.name}),Me(r,"length",{__proto__:null,value:e.length}),Me(N.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let t of Jf(Qf)){let r=function(...n){if(new.target)throw Xf();return Yf(e,this,n)},e=Qf[t];Me(r,"name",{__proto__:null,value:e.name}),Me(r,"length",{__proto__:null,value:e.length}),Me(N.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}N.Writable=Jn();N.Duplex=ve();N.Transform=Ks();N.PassThrough=Qs();N.pipeline=ec;var{addAbortSignal:Jb}=jr();N.addAbortSignal=Jb;N.finished=tc;N.destroy=Qb;N.compose=Gb;N.setDefaultHighWaterMark=Kb;N.getDefaultHighWaterMark=Vb;Me(N,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return ho}});Me(ec,Zf,{__proto__:null,enumerable:!0,get(){return ho.pipeline}});Me(tc,Zf,{__proto__:null,enumerable:!0,get(){return ho.finished}});N.Stream=N;N._isUint8Array=function(e){return e instanceof Uint8Array};N._uint8ArrayToBuffer=function(e){return Hb.from(e.buffer,e.byteOffset,e.byteLength)}});var si=T((A0,F)=>{"use strict";var U=co(),Yb=fo(),Zb=U.Readable.destroy;F.exports=U.Readable;F.exports._uint8ArrayToBuffer=U._uint8ArrayToBuffer;F.exports._isUint8Array=U._isUint8Array;F.exports.isDisturbed=U.isDisturbed;F.exports.isErrored=U.isErrored;F.exports.isReadable=U.isReadable;F.exports.Readable=U.Readable;F.exports.Writable=U.Writable;F.exports.Duplex=U.Duplex;F.exports.Transform=U.Transform;F.exports.PassThrough=U.PassThrough;F.exports.addAbortSignal=U.addAbortSignal;F.exports.finished=U.finished;F.exports.destroy=U.destroy;F.exports.destroy=Zb;F.exports.pipeline=U.pipeline;F.exports.compose=U.compose;Object.defineProperty(U,"promises",{configurable:!0,enumerable:!0,get(){return Yb}});F.exports.Stream=U.Stream;F.exports.default=F.exports});Symbol.onDestroy||(Symbol.onDestroy=Symbol("onDestroy"));var $e=new Map,Ro={addListener:(t,e)=>{$e.has(t)||$e.set(t,[]),$e.get(t).push(e),zc(t)},removeListener:(t,e)=>{if(!$e.has(t))return!1;$e.set(t,$e.get(t).filter(r=>r!=e))}};function zc(t){let e=document.querySelectorAll('[data-simply-activate="'+t+'"]');if(e)for(let r of e)To(r)}function To(t){let e=t?.dataset?.simplyActivate;if(e&&$e.has(e))for(let r of $e.get(e)){let n=r.call(t);typeof n=="function"?t[Symbol.onDestroy]=n:typeof n<"u"&&console.warn("activate listener may only return a de-activate function, instead got",n)}}function Hc(t){let e=[];for(let r of t)if(r.type=="childList"){for(let n of r.addedNodes)if(n.querySelectorAll){let i=Array.from(n.querySelectorAll("[data-simply-activate]"));n.matches("[data-simply-activate]")&&i.push(n),e=e.concat(i)}for(let n of r.removedNodes)if(n.querySelectorAll){let i=Array.from(n.querySelectorAll("[data-simply-activate]"));n.matches["[data-simply-activate"]&&i.push(n);for(let s of i)s[Symbol.onDestroy]&&s[Symbol.onDestroy].call(s)}}for(let r of e)To(r)}var Gc=new MutationObserver(Hc);Gc.observe(document,{subtree:!0,childList:!0});function on(t,e){if(e){let r=t;t=e,t.app=r}if(t.app){let r={apply(s,o,a){try{let l=s(...a);return l instanceof Promise?(t.app.hooks.wait(!0),l.finally(()=>{t.app.hooks.wait(!1,s)})):l}catch{}}},n={apply(s,o,a){try{let l=s(...a);return l instanceof Promise?t.app.hooks.wait?(t.app.hooks.wait(!0,s),l.catch(u=>t.app.hooks.error(u,s)).finally(()=>{t.app.hooks.wait(!1,s)})):l.catch(u=>t.app.hooks.error(u,s)):l}catch(l){return t.app.hooks.error(l,s)}}},i={get(s,o){if(s[o])return t.app.hooks?.error?new Proxy(s[o].bind(t.app),n):t.app.hooks?.wait?new Proxy(s[o].bind(t.app),r):s[o].bind(t.app)}};return new Proxy(t.actions,i)}else return t}function an(t,e){if(e){let r=t;t=e,t.app=t}return new yi(t)}var yi=class{constructor(e={}){this.baseURL=e.baseURL||"/",this.app=e.app||{},this.addMissingSlash=!!e.addMissingSlash,this.matchExact=!!e.matchExact,this.clear(),e.routes&&this.load(e.routes)}load(e){Kc(e,this.routeInfo,this.matchExact)}clear(){this.routeInfo=[],this.listeners={match:{},call:{},goto:{},finish:{}}}match(e,r){let n={path:e,options:r};n=this.runListeners("match",n),e=n.path?n.path:e;let i;if(!e)return this.match(document.location.pathname+document.location.hash)?!0:this.match(document.location.pathname);e=Nt(e);for(let s of this.routeInfo)if(i=s.match.exec(e),this.addMissingSlash&&!i?.length&&e&&e[e.length-1]!="/"&&(i=s.match.exec(e+"/"),i&&(e+="/",history.replaceState({},"",Io(e,this.baseURL)))),i&&i.length){let o={};s.params.forEach((l,u)=>{l=="*"&&(l="remainder"),o[l]=i[u+1]}),Object.assign(o,r),n.route=s,n.params=o,n=this.runListeners("call",n),o=n.params?n.params:o;let a=new URLSearchParams(document.location.search);return n.result=s.action.call(this.app,o,a),this.runListeners("finish",n),n.result}return!1}runListeners(e,r){if(!(!this.listeners[e]||!Object.keys(this.listeners[e])))return Object.keys(this.listeners[e]).forEach(n=>{var i=ko(n);if(i.exec(r.path)){var s;for(let o of this.listeners[e][n])s=o.call(this.app,r),s&&(r=s)}}),r}handleEvents(){globalThis.addEventListener("popstate",()=>{this.match(Nt(document.location.pathname+document.location.hash,this.baseURL))===!1&&this.match(Nt(document.location.pathname,this.baseURL))}),this.app.container.addEventListener("click",e=>{if(!e.ctrlKey&&e.which==1){for(var r=e.target;r&&r.tagName!="A";)r=r.parentElement;if(r&&r.pathname&&r.hostname==globalThis.location.hostname&&!r.link&&!r.dataset.simplyCommand){let n=[r.hash,r.pathname+r.hash,r.pathname],i;do i=Nt(n.shift(),this.baseURL);while(n.length&&!this.has(i));if(this.has(i)){let s=this.runListeners("goto",{path:i});if(s.path&&this.goto(s.path))return e.preventDefault(),!1}}}})}goto(e){return history.pushState({},"",Io(e,this.baseURL)),this.match(e)}has(e){e=Nt(e,this.baseURL);for(let n of this.routeInfo){var r=n.match.exec(e);if(r&&r.length)return!0}return!1}addListener(e,r,n){if(["goto","match","call","finish"].indexOf(e)==-1)throw new Error("Unknown action "+e);this.listeners[e][r]||(this.listeners[e][r]=[]),this.listeners[e][r].push(n)}removeListener(e,r,n){if(["match","call","finish"].indexOf(e)==-1)throw new Error("Unknown action "+e);this.listeners[e][r]&&(this.listeners[e][r]=this.listeners[e][r].filter(i=>i!=n))}init(e){e.baseURL&&(this.baseURL=e.baseURL)}};function Nt(t,e="/"){return(t.substring(0,e.length)==e||e[e.length-1]=="/"&&t.length==e.length-1&&t==e.substring(0,t.length))&&(t=t.substring(e.length)),t[0]!="/"&&t[0]!="#"&&(t="/"+t),t}function Io(t,e){return t=Nt(t,e),e[e.length-1]==="/"&&t[0]==="/"&&(t=t.substring(1)),t[0]=="#"?t:e+t}function ko(t,e=!1){return e?new RegExp("^"+t.replace(/:\w+/g,"([^/]+)").replace(/:\*/,"(.*)")+"(\\?|$)"):new RegExp("^"+t.replace(/:\w+/g,"([^/]+)").replace(/:\*/,"(.*)"))}function Kc(t,e,r=!1){let n=Object.keys(t),i=/:(\w+|\*)/g;for(let s of n){let o=[],a=[];do o=i.exec(s),o&&a.push(o[1]);while(o);e.push({match:ko(s,r),params:a,action:t[s]})}return e}var _i=class{constructor(e={}){e.app||(e.app={}),e.app.container||(e.app.container=document.body),this.app=e.app,this.$handlers=e.handlers||Qc,e.commands&&Object.assign(this,e.commands);let r=n=>{let i=Vc(n,this.$handlers);if(!i)return;if(!this[i.name]){console.error("simply.command: undefined command "+i.name,i.source);return}if(this[i.name].call(e.app,i.source,i.value)!==!0)return n.preventDefault(),n.stopPropagation(),!1};e.app.container.addEventListener("click",r),e.app.container.addEventListener("submit",r),e.app.container.addEventListener("change",r),e.app.container.addEventListener("input",r)}call(e,r,n){if(!this[e]){console.error("simply.command: undefined command "+e);return}return this[e].call(this.app,r,n)}action(e){console.warn("deprecated call to `this.commands.action`");let r=Array.from(arguments).slice();return r.shift(),this.app.actions[e](...r)}appendHandler(e){this.$handlers.push(e)}prependHandler(e){this.$handlers.unshift(e)}};function ln(t={},e){if(e){let r=t;t=e,t.app=t}return new _i(t)}function Vc(t,e){var r=t.target.closest("[data-simply-command]");if(r){for(let n of e)if(r.matches(n.match))return n.check(r,t)?{name:r.dataset.simplyCommand,source:r,value:n.get(r)}:null}return null}var Qc=[{match:"input,select,textarea",get:function(t){if(t.tagName==="SELECT"&&t.multiple){let e=[];for(let r of t.options)r.selected&&e.push(r.value);return e}return t.dataset.simplyValue||t.value},check:function(t,e){return e.type=="change"||t.dataset.simplyImmediate&&e.type=="input"}},{match:"a,button",get:function(t){return t.dataset.simplyValue||t.href||t.value},check:function(t,e){return e.type=="click"&&e.ctrlKey==!1&&e.button==0}},{match:"form",get:function(t){let e={};for(let r of Array.from(t.elements)){if(r.tagName=="INPUT"&&(r.type=="checkbox"||r.type=="radio")&&!r.checked)return;e[r.name]&&!Array.isArray(e[r.name])&&(e[r.name]=[e[r.name]]),Array.isArray(e[r.name])?e[r.name].push(r.value):e[r.name]=r.value}return e},check:function(t,e){return e.type=="submit"}},{match:"*",get:function(t){return t.dataset.simplyValue},check:function(t,e){return e.type=="click"&&e.ctrlKey==!1&&e.button==0}}];var pr=Object.freeze({Compose:229,Control:17,Meta:224,Alt:18,Shift:16}),bi=class{constructor(e={}){e.app||(e.app={}),e.app.container||(e.app.container=document.body),Object.assign(this,e.keys);let r=n=>{if(n.isComposing||n.keyCode===pr.Compose||n.defaultPrevented||!n.target)return;let i="default";n.target.closest("[data-simply-keyboard]")&&(i=n.target.closest("[data-simply-keyboard]").dataset.simplyKeyboard);let s=[];n.ctrlKey&&n.keyCode!=pr.Control&&s.push("Control"),n.metaKey&&n.keyCode!=pr.Meta&&s.push("Meta"),n.altKey&&n.keyCode!=pr.Alt&&s.push("Alt"),n.shiftKey&&n.keyCode!=pr.Shift&&s.push("Shift"),s.push(n.key.toLowerCase());let o=[],a=event.target.closest("[data-simply-keyboard]");for(;a;)o.push(a.dataset.simplyKeyboard),a=a.parentNode.closest("[data-simply-keyboard]");o.push("");let l,u,f=["+","-"];for(let c in o){l=o[c],l==""?u="default":(u=l,l+=".");for(let h of f){let d=s.join(h);if(this[u]&&typeof this[u][d]=="function"&&!this[u][d].call(e.app,n)){n.preventDefault();return}if(typeof this[u+d]=="function"&&!this[u+d].call(e.app,n)){n.preventDefault();return}if(this[i]&&this[i][d]){let p=e.app.container.querySelectorAll('[data-simply-accesskey="'+l+d+'"]');p.length&&(p.forEach(m=>m.click()),n.preventDefault())}}}};e.app.container.addEventListener("keydown",r)}};function un(t={},e){if(e){let r=t;t=e,t.app=t}return new bi(t)}function fn(t,e){if(e){let r=t;t=e,t.app=t}if(t.app){t.app.view=t.view||{};let r=()=>{let n=t.app.view,i=globalThis.editor.data.getDataPath(t.app.container||document.body);t.app.view=globalThis.editor.currentData[i],Object.assign(t.app.view,n)};return globalThis.editor&&globalThis.editor.currentData?r():document.addEventListener("simply-content-loaded",r),t.app.view}else return t.view}function Pt(t,...e){return e.map((n,i)=>`${t[i]}${n}`).join("")+t[t.length-1]}function mr(t,...e){return Pt(t,...e)}var gi=class{constructor(e={}){if(this.container=e.container||document.body,e.components){let r={};No(r,e.components),wi(r,e),e=r}for(let r in e)switch(r){case"html":for(let s in e.html){let o=document.createElement("div");o.innerHTML=e.html[s];let a=this.container.querySelector("template#"+s);a?a.content.replaceChildren(...o.children):(a=document.createElement("template"),a.id=s,a.content.append(...o.children),this.container.appendChild(a))}break;case"css":for(let s in e.css){let o=this.container.querySelector("style#"+s);o||(o=document.createElement("style"),o.id=s,this.container.appendChild(o)),o.innerHTML=e.css[s]}break;case"commands":this.commands=ln({app:this,container:this.container,commands:e.commands});break;case"keys":case"keyboard":this.keys=un({app:this,keys:e.keys});break;case"root":case"baseURL":this.baseURL=e[r];break;case"routes":this.routes=an({app:this,routes:e.routes});break;case"actions":this.actions=on({app:this,actions:e.actions}),this.action=function(s){console.warn("deprecated call to `this.action`");let o=Array.from(arguments).slice();return o.shift(),this.actions[s](...o)};break;case"view":this.view=fn({app:this,view:e.view});break;case"hooks":let n={get:(s,o)=>{if(s[o])return typeof s[o]=="function"?new Proxy(s[o],i):s[o]&&typeof s[o]=="object"?new Proxy(s[o],n):s[o]}},i={apply:(s,o,a)=>s.apply(this,a)};this[r]=new Proxy(e[r],n);break;default:console.log('simply.app: unknown initialization option "'+r+'", added as-is'),this[r]=e[r];break}}get app(){return this}async start(){if(this.components)for(let e in this.components)this.components[e].hooks?.start&&await this.components[e].hooks.start.call(this,this.components[e]);this.hooks?.start&&await this.hooks.start(),this.routes&&(this.baseURL&&this.routes.init({baseURL:this.baseURL}),this.routes.handleEvents(),globalThis.setTimeout(()=>{this.routes.has(globalThis.location?.hash)?this.routes.match(globalThis.location.hash):this.routes.match(globalThis.location?.pathname+globalThis.location?.hash)}))}};function jo(t={}){return new gi(t)}globalThis.html||(globalThis.html=Pt);globalThis.css||(globalThis.css=mr);function wi(t,e){for(let r in e)switch(typeof e[r]){case"object":if(!e[r])continue;t[r]?wi(t[r],e[r]):t[r]=e[r];break;default:t[r]=e[r]}}function No(t,e){for(let r in e){let n=e[r];n.components&&No(t,n.components),t.components||(t.components={}),t.components[r]=n;for(let i in n)switch(i){case"hooks":case"components":break;default:t[i]||(t[i]=Object.create(null)),wi(t[i],n[i]);break}}}function Jc(t,e){let r=0;return()=>{let n=arguments;r||(r=globalThis.setTimeout(()=>{t.apply(this,n),r=0},e))}}var Yc=globalThis.requestIdleCallback?t=>{globalThis.requestIdleCallback(t,{timeout:500})}:globalThis.requestAnimationFrame;function Po(t,e){let r=new URL(t,e);return Lt.cacheBuster&&r.searchParams.set("cb",Lt.cacheBuster),r.href}var Lo,Zc={},xi=globalThis.document.querySelector("head"),Oo=globalThis.document.currentScript,Bo,Co;Oo?Co=Oo.src:(Bo=(()=>{var t=document.getElementsByTagName("script"),e=t.length-1,r=t[e];return()=>r?.src})(),Co=Bo());var Xc=async()=>new Promise(function(t){var e=globalThis.document.createElement("script");e.src="https://cdn.jsdelivr.net/gh/simplyedit/simplyview/dist/simply.include.next.js",e.async=!1,globalThis.document.addEventListener("simply-include-next",()=>{xi.removeChild(e),t()},{once:!0,passive:!0}),xi.appendChild(e)}),cn=[],Lt={cacheBuster:null,scripts:(t,e)=>{let r=t.slice(),n=()=>{let i=r.shift();if(!i)return;let s=[].map.call(i.attributes,a=>a.name),o=globalThis.document.createElement("script");for(let a of s)o.setAttribute(a,i.getAttribute(a));if(o.removeAttribute("data-simply-location"),!o.src)o.innerHTML=i.innerHTML,Xc().then(()=>{let a=cn[i.dataset.simplyLocation];a.parentNode.insertBefore(o,a),a.parentNode.removeChild(a),n()});else{o.src=Po(o.src,e),!o.hasAttribute("async")&&!o.hasAttribute("defer")&&(o.async=!1);let a=cn[i.dataset.simplyLocation];a.parentNode.insertBefore(o,a),a.parentNode.removeChild(a),Zc[o.src]=!0,n()}};r.length&&n()},html:(t,e)=>{let r=globalThis.document.createRange().createContextualFragment(t),n=r.querySelectorAll('link[rel="stylesheet"],style');for(let o of n)o.href&&(o.href=Po(o.href,e.href)),xi.appendChild(o);let i=globalThis.document.createDocumentFragment(),s=r.querySelectorAll("script");if(s.length){for(let o of s){let a=globalThis.document.createComment(o.src||"inline script");o.parentNode.insertBefore(a,o),o.dataset.simplyLocation=cn.length,cn.push(a),i.appendChild(o)}globalThis.setTimeout(function(){Lt.scripts(Array.from(i.children),e?e.href:globalThis.location.href)},10)}e.parentNode.insertBefore(r,e||null)}},Fo={},ed=async t=>{let e=[].reduce.call(t,(r,n)=>(n.rel=="simply-include-once"&&Fo[n.href]?n.parentNode.removeChild(n):(Fo[n.href]=!0,n.rel="simply-include-loading",r.push(n)),r),[]);for(let r of e){if(!r.href)return;let n=await fetch(r.href);if(!n.ok){console.log("simply-include: failed to load "+r.href);continue}console.log("simply-include: loaded "+r.href);let i=await n.text();Lt.html(i,r),r.parentNode.removeChild(r)}},Mo=Jc(()=>{Yc(()=>{var t=globalThis.document.querySelectorAll('link[rel="simply-include"],link[rel="simply-include-once"]');t.length&&ed(t)})}),td=()=>{Lo=new MutationObserver(Mo),Lo.observe(globalThis.document,{subtree:!0,childList:!0})};td();Mo();var yr={get(t,e){return typeof e!="string"?e:e?e.split(".").reduce(function(r,n){return r&&r[n]?r[n]:null},t):t},set:function(t,e,r){let n=yr.get(t,yr.parent(e));n[yr.pop(e)]=r},pop:function(t){return t.split(".").pop()},push:function(t,e){return(t?t+".":"")+e},parent:function(t,e){let r=e.split(".");return r.pop(),r.join(".")},parents:function(t,e){let r=[];for(;e;)e=yr.parent(e),r.unshift(e)}},Do=yr;var Si=class extends HTMLElement{constructor(){super()}connectedCallback(){let e=this.getAttribute("rel"),r=document.getElementById(e);if(r){let n=r.content.cloneNode(!0);for(let i of n.childNodes){let s=i.cloneNode(!0);s.nodeType==document.ELEMENT_NODE&&s.querySelectorAll("template").forEach(function(o){o.setAttribute("simply-render","")}),this.parentNode.insertBefore(s,this)}this.parentNode.removeChild(this)}}};customElements.get("simply-render")||customElements.define("simply-render",Si);var rd=()=>{let t=globalThis.document.querySelectorAll("simply-render[rel]");for(el of t)document.querySelector("template#"+el.getAttribute("rel"))&&el.replaceWith(el)},nd=()=>{observer=new MutationObserver(rd),observer.observe(globalThis.document,{subtree:!0,childList:!0})};nd();var id={activate:Ro,action:on,app:jo,command:ln,include:Lt,key:un,path:Do,route:an,view:fn};globalThis.simply=id;var Ti={};hr(Ti,{batch:()=>Ri,clockEffect:()=>zo,destroy:()=>yn,effect:()=>Wo,signal:()=>ze,throttledEffect:()=>le,trace:()=>od,untracked:()=>ud});var Ei=Symbol("iterate");Symbol.xRay||(Symbol.xRay=Symbol("xRay"));Symbol.Signal||(Symbol.Signal=Symbol("Signal"));var sd={get:(t,e,r)=>{if(e===Symbol.xRay)return t;if(e===Symbol.Signal)return!0;let n=t?.[e];return Ai(r,e),typeof n=="function"?Array.isArray(t)?(...i)=>{let s=t.length,o=n.apply(r,i);return s!=t.length&&st(r,qe("length",{was:s,now:t.length})),o}:t instanceof Set||t instanceof Map?(...i)=>{let s=t.size,o=n.apply(t,i);return s!=t.size&&st(r,qe("size",{was:s,now:t.size})),["set","add","clear","delete"].includes(e)&&st(r,qe({entries:{},forEach:{},has:{},keys:{},values:{},[Symbol.iterator]:{}})),o}:t instanceof HTMLElement||t instanceof Number||t instanceof String||t instanceof Boolean?n.bind(t):n.bind(r):n&&typeof n=="object"?ze(n):n},set:(t,e,r,n)=>{r=r?.[Symbol.xRay]||r;let i=t[e];return i!==r&&(t[e]=r,st(n,qe(e,{was:i,now:r}))),typeof i>"u"&&st(n,qe(Ei,{})),!0},has:(t,e)=>{let r=z.get(t);return r&&Ai(r,e),Object.hasOwn(t,e)},deleteProperty:(t,e)=>{if(typeof t[e]<"u"){let r=t[e];delete t[e];let n=z.get(t);st(n,qe(e,{delete:!0,was:r}))}return!0},defineProperty:(t,e,r)=>{if(typeof t[e]>"u"){let n=z.get(t);st(n,qe(Ei,{}))}return Object.defineProperty(t,e,r)},ownKeys:t=>{let e=z.get(t);return Ai(e,Ei),Reflect.ownKeys(t)}},z=new WeakMap;function ze(t){if(t[Symbol.Signal]){let e=t[Symbol.xRay];z.has(e)||z.set(e,t),t=e}else z.has(t)||z.set(t,new Proxy(t,sd));return z.get(t)}function od(t,e){return qo(t,e).map(n=>({effect:n.effectType,fn:n.effectFunction,signal:z.get(n.effectFunction)}))}var hn=new Set,Ot=0;function st(t,e={}){let r=[];if(e.forEach((n,i)=>{let s=qo(t,i);if(s?.length){for(let o of s)ad(o,qe(i,n));r=r.concat(s)}}),r=new Set(r.filter(Boolean)),r)if(Ot)hn=hn.union(r);else{let n=$[$.length-1];for(let i of Array.from(r))i!=n&&i?.needsUpdate&&i(),$o(i)}}function qe(t,e){let r=new Map;if(typeof t=="object")for(let n in t)r.set(n,t[n]);else r.set(t,e);return r}function ad(t,e){t.context?e.forEach((r,n)=>{t.context.set(n,r)}):t.context=e,t.needsUpdate=!0}function $o(t){delete t.context,delete t.needsUpdate}function Ai(t,e){let r=$[$.length-1];r&&ld(t,e,r)}var _r=new WeakMap,dn=new WeakMap;function qo(t,e){let r=_r.get(t);return r?Array.from(r.get(e)||[]):[]}function ld(t,e,r){_r.has(t)||_r.set(t,new Map);let n=_r.get(t);n.has(e)||n.set(e,new Set),n.get(e).add(r),dn.has(r)||dn.set(r,new Map);let i=dn.get(r);i.has(e)||i.set(e,new Set),i.get(e).add(t)}function mn(t){let e=dn.get(t);e&&e.forEach(r=>{r.forEach(n=>{let i=_r.get(n);i.has(r)&&i.get(r).delete(t)})})}var $=[],pn=[],vi=new WeakMap,We=[];function Wo(t){if(pn.findIndex(n=>t==n)!==-1)throw new Error("Recursive update() call",{cause:t});pn.push(t);let e=z.get(t);e||(e=ze({current:null}),z.set(t,e));let r=function n(){if(We.findIndex(s=>s==e)!==-1)throw new Error("Cyclical dependency in update() call",{cause:t});mn(n),n.effectFunction=t,n.effectType=Wo,$.push(n),We.push(e);let i;try{i=t(n,$,We)}finally{$.pop(),We.pop(),i instanceof Promise?i.then(s=>{e.current=s}):e.current=i}};return r.fn=t,vi.set(e,r),r(),e}function yn(t){let e=vi.get(t)?.deref();if(!e)return;mn(e);let r=e.fn;z.remove(r),vi.delete(t)}function Ri(t){Ot++;let e;try{e=t()}finally{e instanceof Promise?e.then(()=>{Ot--,Ot||Uo()}):(Ot--,Ot||Uo())}return e}function Uo(){let t=Array.from(hn);hn=new Set;let e=$[$.length-1];for(let r of t)r!=e&&r?.needsUpdate&&r(),$o(r)}function le(t,e){if(pn.findIndex(o=>t==o)!==-1)throw new Error("Recursive update() call",{cause:t});pn.push(t);let r=z.get(t);r||(r=ze({current:null}),z.set(t,r));let n=!1,i=!0;return function o(){if(We.findIndex(l=>l==r)!==-1)throw new Error("Cyclical dependency in update() call",{cause:t});if(n&&n>Date.now()){i=!0;return}mn(o),o.effectFunction=t,o.effectType=le,$.push(o),We.push(r);let a;try{a=t(o,$,We)}finally{i=!1,$.pop(),We.pop(),a instanceof Promise?a.then(l=>{r.current=l}):r.current=a}n=Date.now()+e,globalThis.setTimeout(()=>{i&&o()},e)}(),r}function zo(t,e){let r=z.get(t);r||(r=ze({current:null}),z.set(t,r));let n=-1,i=!0;return function o(){if(n<e.time)if(i){mn(o),o.effectFunction=t,o.effectType=zo,$.push(o),n=e.time;let a;try{a=t(o,$)}finally{$.pop(),a instanceof Promise?a.then(l=>{r.current=l}):r.current=a,i=!1}}else n=e.time;else i=!0}(),r}function ud(t){let e=$.slice();$=[];try{return t()}finally{$=e}}function Ho(t,e){let r=t.value.innerHTML;typeof t.value=="string"&&(r=t.value,t.value={innerHTML:r}),r&&(r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),t.value.innerHTML=r),e(t)}function Go(t,e){typeof t.value=="string"?t.value={}:delete t.value.innerHTML,e(t)}function Vo(t){if(t.templates?.length)dd.call(this,t);else if(Object.hasOwnProperty.call(this.options.renderers,t.element.tagName)){let e=this.options.renderers[t.element.tagName];e&&e.call(this,t)}else this.options.renderers["*"]&&this.options.renderers["*"].call(this,t);return t}function Qo(t){return Array.isArray(t.value)?t.templates?.length?fd.call(this,t):console.error("No templates found in",t.element):console.error("Value is not an array.",t.element,t.path,t.value),t}function Jo(t){return typeof t.value!="object"||!t.value?console.error("Value is not an object.",t.element,t.path,t.value):t.templates?.length?cd.call(this,t):console.error("No templates found in",t.element),t}function fd(t){let e=this.options.attribute,r=t.element.querySelectorAll(":scope > ["+e+"-key]"),n=0,i=0;t.list=t.value;for(let o of r){let a=parseInt(o.getAttribute(e+"-key"));if(a>n)t.index=n,t.element.insertBefore(this.applyTemplate(t),o);else if(a<n)o.remove();else{let l=Array.from(o.querySelectorAll(`[${e}]`));o.matches(`[${e}]`)&&l.unshift(o);let u=l.find(f=>{let c=f.getAttribute(e);return c.substr(0,5)!==":root"&&c.substr(0,t.path.length)!==t.path});if(!u&&o[Symbol.bindTemplate]){let f=this.findTemplate(t.templates,t.list[n]);f!=o[Symbol.bindTemplate]&&(u=!0,f||i++)}u&&(t.index=n,t.element.replaceChild(this.applyTemplate(t),o))}if(n++,n>=t.value.length)break}r=t.element.querySelectorAll(":scope > ["+e+"-key]");let s=r.length+i;if(s>t.value.length)for(;s>t.value.length;)t.element.querySelectorAll(":scope > :not(template)")?.[s-1]?.remove(),s--;else if(s<t.value.length)for(;s<t.value.length;)t.index=s,t.element.appendChild(this.applyTemplate(t)),s++}function cd(t){let e=this.options.attribute;t.list=t.value;let r=Array.from(t.element.querySelectorAll(":scope > ["+e+"-key]"));for(let n in t.list){t.index=n;let i=r.shift();if(!i){let o=this.applyTemplate(t);t.element.appendChild(o);continue}if(i.getAttribute[e+"-key"]!=n){r.unshift(i);let o=t.element.querySelector(":scope > ["+e+'-key="'+n+'"]');if(o)t.element.insertBefore(o,i),i=o,r=r.filter(a=>a!=o);else{let a=this.applyTemplate(t);t.element.insertBefore(a,i);continue}}if(this.findTemplate(t.templates,t.list[t.index])!=i[Symbol.bindTemplate]){let o=this.applyTemplate(t);t.element.replaceChild(o,i)}}for(;r.length;)r.shift().remove()}function dd(t){let e=t.element.querySelector(":scope > :not(template)"),r=this.findTemplate(t.templates,t.value);if(t.parent=hd(t.element),e)if(r){if(e?.[Symbol.bindTemplate]!=r){let n=this.applyTemplate(t);t.element.replaceChild(n,e)}}else t.element.removeChild(e);else if(r){let n=this.applyTemplate(t);t.element.appendChild(n)}}function hd(t,e){let r=t.parentElement?.closest(`[${e}-list],[${e}-map]`);return r?r.hasAttribute(`${e}-list`)?r.getAttribute(`${e}-list`)+".":r.getAttribute(`${e}-map`)+".":""}function Yo(t){let e=t.element,r=t.value;br(t),typeof r>"u"&&(r=""),e.type=="checkbox"||e.type=="radio"?_n(e.value,r)?e.checked=!0:e.checked=!1:_n(e.value,r)||(e.value=""+r)}function Zo(t){br(t),ot(t.element,t.value,"value")}function Ii(t){let e=t.element,r=t.value;if(r===null&&(r=""),typeof r!="object")if(e.multiple){if(Array.isArray(r))for(let n of e.options)r.indexOf(n.value)===!1?n.selected=!1:n.selected=!0}else{let n=e.options.find(i=>_n(i.value,r));n&&(n.selected=!0,n.setAttribute("selected",!0))}else r.options&&pd(e,r.options),r.selected&&Ii(Object.asssign({},t,{value:r.selected})),ot(e,r,"name","id","selectedIndex","className")}function Ko(t,e){e&&(typeof e!="object"?t.options.add(new Option(""+e)):e.text?t.options.add(new Option(e.text,e.value,e.defaultSelected,e.selected)):typeof e.value<"u"&&t.options.add(new Option(""+e.value,e.value,e.defaultSelected,e.selected)))}function pd(t,e){if(t.innerHTML="",Array.isArray(e))for(let r of e)Ko(t,r);else if(e&&typeof e=="object")for(let r in e)Ko(t,{text:e[r],value:r})}function Xo(t){br(t),ot(t.element,t.value,"target","href","name","newwindow","nofollow")}function ea(t){ot(t.element,t.value,"title","alt","src","id")}function ta(t){ot(t.element,t.value,"title","src","id")}function ra(t){ot(t.element,t.value,"content","id")}function br(t){let e=t.element,r=t.value;(typeof r>"u"||r==null)&&(r="");let n=""+r;if(typeof r!="object"||n.substring(0,8)!="[object "){e.innerHTML=n;return}ot(e,r,"innerHTML","title","id","className")}function ot(t,e,...r){if(!(!e||typeof e!="object"))for(let n of r)typeof e[n]>"u"||_n(t[n],e[n])||(e[n]===null?t[n]="":t[n]=""+e[n])}function _n(t,e){return t==":empty"&&!e||e==":empty"&&!t||""+t==""+e}Symbol.bindTemplate||(Symbol.bindTemplate=Symbol("bindTemplate"));var ji=class{constructor(e){this.bindings=new Map;let r={escape_html:Ho,fixed_content:Go},n={container:document.body,attribute:"data-flow",transformers:r,render:{field:[Vo],list:[Qo],map:[Jo]},renderers:{INPUT:Yo,BUTTON:Zo,SELECT:Ii,A:Xo,IMG:ea,IFRAME:ta,META:ra,TEMPLATE:null,"*":br}};if(!e?.root)throw new Error("bind needs at least options.root set");this.options=Object.assign({},n,e),e.transformers&&(this.options.transformers=Object.assign({},r,e?.transformers));let i=this.options.attribute,s=[i+"-field",i+"-list",i+"-map"],o=i+"-transform",a=d=>{let p=s.find(m=>d.hasAttribute(m));return p||console.error("No matching attribute found",d,s),p},l=d=>{this.bindings.set(d,le(()=>{if(!d.isConnected){_d(d,this.getBindingPath(d)),yn(this.bindings.get(d));return}let p={templates:d.querySelectorAll(":scope > template"),attribute:a(d)};p.path=this.getBindingPath(d),p.value=ki(this.options.root,p.path),p.element=d,yd(d,p),u(p)},50))},u=d=>{let p;switch(d.attribute){case this.options.attribute+"-field":p=Array.from(this.options.render.field);break;case this.options.attribute+"-list":p=Array.from(this.options.render.list);break;case this.options.attribute+"-map":p=Array.from(this.options.render.map);break;default:throw new Error("no valid context attribute specified",d)}d.element.hasAttribute(o)&&d.element.getAttribute(o).split(" ").filter(Boolean).forEach(g=>{this.options.transformers[g]?p.push(this.options.transformers[g]):console.warn("No transformer with name "+g+" configured",{cause:d.element})});let m;for(let g of p)m=((_,b)=>S=>b.call(this,S,_))(m,g);m(d)},f=d=>{for(let p of d)this.bindings.get(p)||l(p)},c=d=>{let p=`[${i}-field],[${i}-list],[${i}-map]`;for(let m of d)if(m.type=="childList"&&m.addedNodes){for(let g of m.addedNodes)if(g instanceof HTMLElement){let _=Array.from(g.querySelectorAll(p));g.matches(p)&&_.unshift(g),_.length&&f(_)}}};this.observer=new MutationObserver(d=>{c(d)}),this.observer.observe(this.options.container,{subtree:!0,childList:!0});let h=this.options.container.querySelectorAll(":is(["+this.options.attribute+"-field],["+this.options.attribute+"-list],["+this.options.attribute+"-map]):not(template)");h.length&&f(h)}applyTemplate(e){let r=e.path,n=e.parent,i=e.templates,s=e.list,o=e.index,a=s?s[o]:e.value,l=this.findTemplate(i,a);if(!l){let d=new DocumentFragment;return d.innerHTML="<!-- no matching template -->",d}let u=l.content.cloneNode(!0);if(!u.children?.length)return u;if(u.children.length>1)throw new Error("template must contain a single root node",{cause:l});let f=this.options.attribute,c=[f+"-field",f+"-list",f+"-map"],h=u.querySelectorAll(`[${f}-field],[${f}-list],[${f}-map]`);for(let d of h){if(d.tagName=="TEMPLATE")continue;let p=c.find(g=>d.hasAttribute(g)),m=d.getAttribute(p);m=this.applyLinks(l.links,m),m.substring(0,6)==":root."?d.setAttribute(p,m.substring(6)):m==":value"&&o!=null?d.setAttribute(p,r+"."+o):o!=null?d.setAttribute(p,r+"."+o+"."+m):d.setAttribute(p,n+m)}return typeof o<"u"&&u.children[0].setAttribute(f+"-key",o),u.children[0][Symbol.bindTemplate]=l,u}parseLinks(e){let r={};e=e.split(";").map(n=>n.trim());for(let n of e)n=n.split("="),r[n[0].trim()]=n[1].trim();return r}applyLinks(e,r){for(let n in e){if(r.startsWith(n+"."))return e[n]+r.substr(n.length);if(r==n)return e[n]}return r}getBindingPath(e){let r=[this.options.attribute+"-field",this.options.attribute+"-list",this.options.attribute+"-map"];for(let n of r)if(e.hasAttribute(n))return e.getAttribute(n)}findTemplate(e,r){let n=a=>{let l=this.getBindingPath(a),u;l?l.substr(0,6)==":root."?u=ki(this.options.root,l):u=ki(r,l):u=r;let f=""+u,c=a.getAttribute(this.options.attribute+"-match");if(c){if(c===":empty"&&!u)return a;if(c===":notempty"&&u||f.match(c))return a}if(!c&&u!==null&&u!==void 0)return a},i=Array.from(e).find(n),s=null;i?.hasAttribute(this.options.attribute+"-link")&&(s=this.parseLinks(i.getAttribute(this.options.attribute+"-link")));let o=i?.getAttribute("rel");if(o){let a=document.querySelector("template#"+o);if(!a)throw new Error("Could not find template with id "+o);i=a}return i&&(i.links=s),i}destroy(){this.bindings.forEach(e=>{yn(e)}),this.bindings=new Map,this.observer.disconnect()}};function na(t){return new ji(t)}var gr=new Map;function yd(t,e){gr.has(e.path)?gr.get(e.path).push(e):gr.set(e.path,[e])}function _d(t,e){let r=gr.get(e);r&&(r=r.filter(n=>n.element==t),gr.set(e,r))}function ki(t,e){let r=e.split("."),n=t,i;for(i=r.shift();i&&n;)i=decodeURIComponent(i),n=n[i],i=r.shift();return n}var Pi={};hr(Pi,{columns:()=>Sd,filter:()=>xd,model:()=>bd,paging:()=>wd,scroll:()=>Ed,sort:()=>gd});var Ni=class{constructor(e){this.state=ze(e),this.state.options||(this.state.options={}),this.effects=[{current:e.data}],this.view=ze(e.data)}addEffect(e){let r=this.effects[this.effects.length-1];this.view=e.call(this,r),this.effects.push(this.view)}};function bd(t){return new Ni(t)}function gd(t={}){return function(e){return this.state.options.sort=Object.assign({direction:"asc",sortBy:null,sortFn:((r,n)=>{let i=this.state.options.sort,s=i.sortBy;if(!i.sortBy)return 0;let o=i.direction=="asc"?1:-1,a=i.direction=="asc"?-1:1;return typeof r?.[s]>"u"?typeof n?.[s]>"u"?0:o:typeof n?.[s]>"u"||r[s]<n[s]?a:r[s]>n[s]?o:0})},t),le(()=>{let r=this.state.options.sort;return r?.sortBy&&r?.direction?e.current.toSorted(r?.sortFn):e.current},50)}}function wd(t={}){return function(e){return this.state.options.paging=Object.assign({page:1,pageSize:20,max:1},t),le(()=>Ri(()=>{let r=this.state.options.paging;r.pageSize||(r.pageSize=20),r.max=Math.ceil(this.state.data.length/r.pageSize),r.page=Math.max(1,Math.min(r.max,r.page));let n=(r.page-1)*r.pageSize,i=n+r.pageSize;return e.current.slice(n,i)}),50)}}function xd(t){if(!t?.name||typeof t.name!="string")throw new Error("filter requires options.name to be a string");if(!t.matches||typeof t.matches!="function")throw new Error("filter requires options.matches to be a function");return function(e){if(this.state.options[t.name])throw new Error("a filter with this name already exists on this model");return this.state.options[t.name]=t,le(()=>this.state.options[t.name].enabled?e.current.filter(this.state.options[t.name].matches.bind(this)):e.current,50)}}function Sd(t={}){if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error("columns requires options to be an object with at least one property");return function(e){return this.state.options.columns=t,le(()=>e.current.map(r=>{let n={};for(let i of Object.keys(this.state.options.columns))this.state.options.columns[i]?.hidden||(n[i]=r[i]);return n}),50)}}function Ed(t){return function(e){this.state.options.scroll=Object.assign({offset:0,rowHeight:26,rowCount:20,itemsPerRow:1,size:e.current.length},t);let r=this.state.options.scroll,n=r.scrollbar||r.container?.querySelector("[data-flow-scrollbar]");return n&&(r.container&&r.container.addEventListener("scroll",i=>{r.offset=Math.floor(r.container.scrollTop/(r.rowHeight*r.itemsPerRow))}),le(()=>{r.size=e.current.length*r.rowHeight,n.style.height=r.size+"px"},50)),le(()=>{r.container&&(r.rowCount=Math.ceil(r.container.getBoundingClientRect().height/r.rowHeight)),r.data=e.current;let i=Math.min(r.offset,e.current.length-1),s=i+r.rowCount;return s>e.current.length&&(s=e.current.length,i=s-r.rowCount),e.current.slice(i,s)},50)}}globalThis.simply||(globalThis.simply={});Object.assign(globalThis.simply,{bind:na,flow:Pi,state:Ti});var cw=globalThis.simply;var Ct={};hr(Ct,{Client:()=>ue,client:()=>ne,deepClone:()=>He,formdata:()=>oa,metroError:()=>H,request:()=>lt,response:()=>Bt,trace:()=>vd,url:()=>q});var at="https://metro.muze.nl/details/";Symbol.metroProxy||(Symbol.metroProxy=Symbol("isProxy"));Symbol.metroSource||(Symbol.metroSource=Symbol("source"));var ue=class t{clientOptions={url:q(typeof window<"u"?window.location:"https://localhost"),verbs:["get","post","put","delete","patch","head","options","query"]};static tracers={};constructor(...e){for(let r of e)if(typeof r=="string"||r instanceof String)this.clientOptions.url=q(this.clientOptions.url.href,r);else if(r instanceof t)Object.assign(this.clientOptions,r.clientOptions);else if(r instanceof Function)this.#e([r]);else if(r&&typeof r=="object")for(let n in r)n=="middlewares"?this.#e(r[n]):n=="url"?this.clientOptions.url=q(this.clientOptions.url.href,r[n]):typeof r[n]=="function"?this.clientOptions[n]=r[n](this.clientOptions[n],this.clientOptions):this.clientOptions[n]=r[n];for(let r of this.clientOptions.verbs)this[r]=async function(...n){return this.fetch(lt(this.clientOptions,...n,{method:r.toUpperCase()}))}}#e(e){typeof e=="function"&&(e=[e]);let r=e.findIndex(n=>typeof n!="function");if(r>=0)throw H("metro.client: middlewares must be a function or an array of functions "+at+"client/invalid-middlewares/",e[r]);Array.isArray(this.clientOptions.middlewares)||(this.clientOptions.middlewares=[]),this.clientOptions.middlewares=this.clientOptions.middlewares.concat(e)}fetch(e,r){if(e=lt(e,r),!e.url)throw H("metro.client."+e.method.toLowerCase()+": Missing url parameter "+at+"client/fetch-missing-url/",e);if(r||(r={}),typeof r!="object"||r instanceof String)throw H("metro.client.fetch: Invalid options parameter "+at+"client/fetch-invalid-options/",r);let i=[async function(a){a[Symbol.metroProxy]&&(a=a[Symbol.metroSource]);let l=await fetch(a);return Bt(l)}].concat(this.clientOptions?.middlewares?.slice()||[]);r=Object.assign({},this.clientOptions,r);let s;for(let o of i)s=(function(a,l){return async function(u){let f,c=Object.values(t.tracers);for(let h of c)h.request&&h.request.call(h,u,l);f=await l(u,a);for(let h of c)h.response&&h.response.call(h,f,l);return f}})(s,o);return s(e)}with(...e){return new t(He(this.clientOptions),...e)}get location(){return this.clientOptions.url}};function ne(...t){return new ue(...He(t))}function Ad(t,e){let r=e||{};!r.url&&e.url&&(r.url=e.url);for(let n of["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"]){let i=t[n];if(!(typeof i>"u"||i==null))if(i?.[Symbol.metroProxy]&&(i=i[Symbol.metroSource]),typeof i=="function")r[n]=i(r[n],r);else if(n=="url")r.url=q(r.url,i);else if(n=="headers"){r.headers=new Headers(e.headers),i instanceof Headers||(i=new Headers(t.headers));for(let[s,o]of i.entries())r.headers.set(s,o)}else r[n]=i}return t instanceof Request&&t.data&&(r.body=t.data),r}function lt(...t){let e={url:q(typeof window<"u"?window.location:"https://localhost/"),duplex:"half"};for(let i of t)typeof i=="string"||i instanceof URL||i instanceof URLSearchParams?e.url=q(e.url,i):i&&(i instanceof FormData||i instanceof ReadableStream||i instanceof Blob||i instanceof ArrayBuffer||i instanceof DataView)?e.body=i:i&&typeof i=="object"&&Object.assign(e,Ad(i,e));let r=new Request(e.url,e),n=e.body;return n&&typeof n=="object"&&!(n instanceof String)&&!(n instanceof ReadableStream)&&!(n instanceof Blob)&&!(n instanceof ArrayBuffer)&&!(n instanceof DataView)&&!(n instanceof FormData)&&!(n instanceof URLSearchParams)&&(typeof globalThis.TypedArray>"u"||!(n instanceof globalThis.TypedArray))&&typeof n.toString=="function"&&(e.body=n.toString({headers:r.headers}),r=new Request(e.url,e)),Object.freeze(r),new Proxy(r,{get(i,s){let o;switch(s){case Symbol.metroSource:o=i;break;case Symbol.metroProxy:o=!0;break;case"with":o=function(...a){return n&&a.unshift({body:n}),lt(i,...a)};break;case"data":o=n;break;default:i[s]instanceof Function?o=i[s].bind(i):o=i[s];break}return o}})}function ia(t,e){let r=e||{};!r.url&&e.url&&(r.url=e.url);for(let n of["status","statusText","headers","body","url","type","redirected"]){let i=t[n];typeof i>"u"||i==null||(i?.[Symbol.metroProxy]&&(i=i[Symbol.metroSource]),typeof i=="function"?r[n]=i(r[n],r):n=="url"?r.url=new URL(i,r.url||"https://localhost/"):r[n]=i)}return t instanceof Response&&t.data&&(r.body=t.data),r}function Bt(...t){let e={};for(let i of t)typeof i=="string"?e.body=i:i instanceof Response?Object.assign(e,ia(i,e)):i&&typeof i=="object"&&(i instanceof FormData||i instanceof Blob||i instanceof ArrayBuffer||i instanceof DataView||i instanceof ReadableStream||i instanceof URLSearchParams||i instanceof String||typeof globalThis.TypedArray<"u"&&i instanceof globalThis.TypedArray?e.body=i:Object.assign(e,ia(i,e)));let r;e.body&&(r=e.body),[101,204,205,304].includes(e.status)&&(e.body=null);let n=new Response(e.body,e);return Object.freeze(n),new Proxy(n,{get(i,s){let o;switch(s){case Symbol.metroProxy:o=!0;break;case Symbol.metroSource:o=i;break;case"with":o=function(...a){return Bt(i,...a)};break;case"data":o=r;break;case"ok":o=i.status>=200&&i.status<400;break;default:typeof i[s]=="function"?o=i[s].bind(i):o=i[s];break}return o}})}function sa(t,e){typeof e=="function"?e(t.searchParams,t):(e=new URLSearchParams(e),e.forEach((r,n)=>{t.searchParams.append(n,r)}))}function q(...t){let e=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],r=new URL("https://localhost/");for(let n of t)if(typeof n=="string"||n instanceof String)r=new URL(n,r);else if(n instanceof URL||typeof Location<"u"&&n instanceof Location)r=new URL(n);else if(n instanceof URLSearchParams)sa(r,n);else if(n&&typeof n=="object")for(let i in n)switch(i){case"search":typeof n.search=="function"?n.search(r.search,r):r.search=new URLSearchParams(n.search);break;case"searchParams":sa(r,n.searchParams);break;default:if(!e.includes(i))throw H("metro.url: unknown url parameter "+at+"url/unknown-param-name/",i);if(typeof n[i]=="function")n[i](r[i],r);else if(typeof n[i]=="string"||n[i]instanceof String||typeof n[i]=="number"||n[i]instanceof Number||typeof n[i]=="boolean"||n[i]instanceof Boolean)r[i]=""+n[i];else if(typeof n[i]=="object"&&n[i].toString)r[i]=n[i].toString();else throw H("metro.url: unsupported value for "+i+" "+at+"url/unsupported-param-value/",t[i]);break}else throw H("metro.url: unsupported option value "+at+"url/unsupported-option-value/",n);return Object.freeze(r),new Proxy(r,{get(n,i){let s;switch(i){case Symbol.metroProxy:s=!0;break;case Symbol.metroSource:s=n;break;case"with":s=function(...o){return q(n,...o)};break;case"filename":s=n.pathname.split("/").pop();break;case"folderpath":s=n.pathname.substring(0,n.pathname.lastIndexOf("\\")+1);break;case"authority":s=n.username??"",s+=n.password?":"+n.password:"",s+=s?"@":"",s+=n.hostname,s+=n.port?":"+n.port:"",s+="/",s=n.protocol+"//"+s;break;case"origin":s=n.protocol+"//"+n.hostname,s+=n.port?":"+n.port:"",s+="/";break;case"fragment":s=n.hash.substring(1);break;case"scheme":n.protocol?s=n.protocol.substring(0,n.protocol.length-1):s="";break;default:n[i]instanceof Function?s=n[i].bind(n):s=n[i];break}return s}})}function oa(...t){var e=new FormData;for(let r of t)if(r instanceof HTMLFormElement&&(r=new FormData(r)),r instanceof FormData)for(let n of r.entries())e.append(n[0],n[1]);else if(r&&typeof r=="object")for(let n of Object.entries(r))if(Array.isArray(n[1]))for(let i of n[1])e.append(n[0],i);else e.append(n[0],n[1]);else throw new H("metro.formdata: unknown option type "+at+"formdata/unknown-option-value/",r);return Object.freeze(e),new Proxy(e,{get(r,n){let i;switch(n){case Symbol.metroProxy:i=!0;break;case Symbol.metroSource:i=r;break;case"with":i=function(...s){return oa(r,...s)};break;default:r[n]instanceof Function?i=r[n].bind(r):i=r[n];break}return i}})}var wr={error:(t,...e)=>{console.error("\u24C2\uFE0F  ",t,...e)},info:(t,...e)=>{console.info("\u24C2\uFE0F  ",t,...e)},group:t=>{console.group("\u24C2\uFE0F  "+t)},groupEnd:t=>{console.groupEnd("\u24C2\uFE0F  "+t)}};function H(t,...e){return wr.error(t,...e),new Error(t,...e)}var vd={add(t,e){ue.tracers[t]=e},delete(t){delete ue.tracers[t]},clear(){ue.tracers={}},group(){let t=0;return{request:(e,r)=>{t++,wr.group(t),wr.info(e?.url,e,r)},response:(e,r)=>{wr.info(e?.body?e.body[Symbol.metroSource]:null,e,r),wr.groupEnd(t),t--}}}};function He(t){if(Array.isArray(t))return t.slice().map(He);if(t&&typeof t=="object")if(t.__proto__.constructor==Object||!t.__proto__){let e=Object.assign({},t);return Object.keys(e).forEach(r=>{e[r]=He(t[r])}),e}else return t;return t}function he(t){return t=Object.assign({contentType:"application/json",reviver:null,replacer:null,space:""},t),async function(r,n){if(r.headers.get("Accept")||(r=r.with({headers:{Accept:t.accept??t.contentType}})),r.method!=="GET"&&r.method!=="HEAD"&&r.data&&typeof r.data=="object"&&!(r.data instanceof ReadableStream)){let s=r.headers.get("Content-Type");(!s||Td(s))&&(r=r.with({headers:{"Content-Type":t.contentType}})),aa(r.headers.get("Content-Type"))&&(r=r.with({body:JSON.stringify(r.data,t.replacer,t.space)}))}let i=await n(r);if(i&&aa(i.headers?.get("Content-Type"))){let o=await i.clone().text();try{let a=JSON.parse(o,t.reviver);return i.with({body:a})}catch{}}return i}}var Rd=/^application\/([a-zA-Z0-9\-_]+\+)?json\b/;function aa(t){return Rd.exec(t)}function Td(t){return/^text\/plain\b/.exec(t)}function pe(t){return async function(r,n){let i=await n(r);if(!i.ok)if(t&&typeof t[i.status]=="function")i=t[i.status].apply(i,r);else throw new Error(i.status+": "+i.statusText,{cause:i});return i}}function Ft(){return async function(e,r){let n=await r(e);return n.ok&&n.data?n.data:n}}var bn=class extends ue{constructor(e,r,n=null){e instanceof ue?super(e.clientOptions,pe(),Ft()):super(e,pe(),Ft()),n||(n=this);for(let i in r)typeof r[i]=="function"?this[i]=r[i].bind(n):r[i]&&typeof r[i]=="object"?this[i]=new this.constructor(e,r[i],n):this[i]=r[i]}},Li=class extends bn{constructor(e,r,n=null){e instanceof ue?super(e.with(he()),r,n):super(ne(e,he()),r,n)}};function la(...t){return new bn(...He(t))}function ua(...t){return new Li(...He(t))}var fa=Object.assign({},Ct,{mw:{json:he,thrower:pe,getdata:Ft},api:la,jsonApi:ua});globalThis.metro||(globalThis.metro=fa);var K=fa;function Ci(t){return new Oi(t)}var Fi="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",Id={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",solid:"http://www.w3.org/ns/solid/terms#",schema:"http://schema.org/",vcard:"http://www.w3.org/2006/vcard/ns#"},Oi=class{constructor(e){this.prefixes={...Id,...e?.prefixes},this.prefixes.xsd||(this.prefixes.xsd="http://www.w3.org/2001/XMLSchema#"),this.parser=e?.parser,this.writer=e?.writer,this.sources=Object.create(null),this.separator=e?.separator??"$"}parse(e,r,n){let{quads:i,prefixes:s}=this.parser(e,r,n);if(s)for(let o in s){let a=s[o];if(a.match(/^http(s?):\/\/$/i))a+=r.substring(a.length);else try{a=new URL(s[o],r).href}catch(l){console.error("Could not parse prefix",s[o],l.message)}this.prefixes[o]||(this.prefixes[o]=a)}return this.sources[r]=new Bi(i,r,n,s,this),this.sources[r]}setType(e,r){if(!r)return e;if(typeof e=="string"?e=new String(e):typeof result=="number"&&(e=new Number(e)),typeof e!="object")throw new Error("cannot set type on ",e,r);return e.type=r,e}getType(e){return e&&typeof e=="object"?e.type:null}},Bi=class{#e=Object.create(null);constructor(e,r,n,i,s){this.mimetype=n,this.url=r,this.prefixes=i,this.context=s,this.subjects=Object.create(null);for(let o of e){let a;if(o.subject.termType=="BlankNode"){let l=this.shortURI(o.predicate.id,":"),u;switch(l){case"rdf:first":if(a=this.addCollection(o.subject.id),u=this.shortURI(o.object.id,":"),u!="rdf:nil"){let f=this.getValue(o.object);f&&a.push(f)}continue;case"rdf:rest":this.#e[o.object.id]=this.#e[o.subject.id];continue;default:a=this.addBlankNode(o.subject.id);break}}else a=this.addNamedNode(o.subject.id);a.addPredicate(o.predicate.id,o.object)}this.subjects[r]?this.primary=this.subjects[r]:this.primary=null,Object.defineProperty(this,"data",{get(){return Object.values(this.subjects)}})}addNamedNode(e){let r=new URL(e,this.url).href;return this.subjects[r]||(this.subjects[r]=new Mt(r,this)),this.subjects[r]}addBlankNode(e){return this.#e[e]||(this.#e[e]=new ut(this)),this.#e[e]}addCollection(e){return this.#e[e]||(this.#e[e]=new Dt(this)),this.#e[e]}write(){return this.context.writer(this)}get(e){return this.subjects[this.fullURI(e)]}fullURI(e,r=null){r||(r=this.context.separator);let[n,i]=e.split(r);return i?this.prefixes[n]+i:e}shortURI(e,r=null){r||(r=this.context.separator);for(let n in this.context.prefixes)if(e.startsWith(this.context.prefixes[n]))return n+r+e.substring(this.context.prefixes[n].length);return this.url&&e.startsWith(this.url)?e.substring(this.url.length):e}setType(e,r){let n=this.shortURI(r);return this.context.setType(e,n)}getType(e){return this.context.getType(e)}setLanguage(e,r){if(typeof e=="string"?e=new String(e):typeof result=="number"&&(e=new Number(e)),typeof e!="object")throw new Error("cannot set language on ",e);return e.language=r,e}getValue(e){let r;if(e.termType=="Literal"){r=e.value;let n=e.datatype?.id;n&&(r=this.setType(r,n));let i=e.language;i&&(r=this.setLanguage(r,i))}else e.termType=="BlankNode"?r=this.addBlankNode(e.id):r=this.addNamedNode(e.id);return r}},ut=class{constructor(e){Object.defineProperty(this,"graph",{value:e,writable:!1,enumerable:!1})}addPredicate(e,r){if(e.id&&(e=e.id),e==Fi){let n=this.graph.shortURI(r.id);this.addType(n)}else{let n=this.graph.getValue(r);e=this.graph.shortURI(e),this[e]?Array.isArray(this[e])?this[e].push(n):this[e]=[this[e],n]:this[e]=n}}addType(e){this.a?(Array.isArray(this.a)||(this.a=[this.a]),this.a.push(e)):this.a=e}},Mt=class extends ut{constructor(e,r){super(r),Object.defineProperty(this,"id",{value:e,writable:!1,enumerable:!0})}},Dt=class extends Array{constructor(e,r){super(),Object.defineProperty(this,"graph",{value:r,writable:!1,enumerable:!1})}};var _o={};hr(_o,{n3Parser:()=>Xb,n3Writer:()=>eg});var Pa=sn(_e());var Sr="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Er="http://www.w3.org/2001/XMLSchema#",Sn="http://www.w3.org/2000/10/swap/",B={xsd:{decimal:`${Er}decimal`,boolean:`${Er}boolean`,double:`${Er}double`,integer:`${Er}integer`,string:`${Er}string`},rdf:{type:`${Sr}type`,nil:`${Sr}nil`,first:`${Sr}first`,rest:`${Sr}rest`,langString:`${Sr}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Sn}reify#forSome`,forAll:`${Sn}reify#forAll`},log:{implies:`${Sn}log#implies`,isImpliedBy:`${Sn}log#isImpliedBy`}};var{xsd:En}=B,ah=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Na={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},lh=/[\x00-\x20<>\\"\{\}\|\^\`]/,uh={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},fh=/$0^/,dt=class{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(let r in this)!(r in uh)&&this[r]instanceof RegExp&&(this[r]=fh)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,r){let n=this._input,i=n.length;for(;;){let a,l;for(;a=this._newline.exec(n);)this.comments&&(l=this._comment.exec(a[0]))&&s("comment",l[1],"",this._line,a[0].length),n=n.substr(a[0].length,n.length),i=n.length,this._line++;if(!a&&(a=this._whitespace.exec(n))&&(n=n.substr(a[0].length,n.length)),this._endOfFile.test(n))return r&&(this.comments&&(l=this._comment.exec(n))&&s("comment",l[1],"",this._line,n.length),n=null,s("eof","","",this._line,0)),this._input=n;let u=this._line,f=n[0],c="",h="",d="",p=null,m=0,g=!1;switch(f){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){g=!0;break}}else{this._n3Mode&&(m=1,c="^");break}case"<":if(p=this._unescapedIri.exec(n))c="IRI",h=p[1];else if(p=this._iri.exec(n)){if(h=this._unescape(p[1]),h===null||lh.test(h))return o(this);c="IRI"}else n.length>1&&n[1]==="<"?(c="<<",m=2):this._n3Mode&&n.length>1&&n[1]==="="&&(m=2,this._isImpliedBy?(c="abbreviation",h="<"):(c="inverse",h=">"));break;case">":n.length>1&&n[1]===">"&&(c=">>",m=2);break;case"_":((p=this._blank.exec(n))||r&&(p=this._blank.exec(`${n} `)))&&(c="blank",d="_",h=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(n))h=p[1];else if({value:h,matchLength:m}=this._parseLiteral(n),h===null)return o(this);(p!==null||m!==0)&&(c="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(n))h=p[1];else if({value:h,matchLength:m}=this._parseLiteral(n),h===null)return o(this);(p!==null||m!==0)&&(c="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(n))&&(c="var",h=p[0]);break;case"@":this._previousMarker==="literal"&&(p=this._langcode.exec(n))?(c="langcode",h=p[1]):(p=this._keyword.exec(n))&&(c=p[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){c=".",m=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(p=this._number.exec(n)||r&&(p=this._number.exec(`${n} `)))&&(c="literal",h=p[0],d=typeof p[1]=="string"?En.double:typeof p[2]=="string"?En.decimal:En.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(p=this._sparqlKeyword.exec(n))?c=p[0].toUpperCase():g=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(c="literal",h=p[0],d=En.boolean):g=!0;break;case"a":(p=this._shortPredicates.exec(n))?(c="abbreviation",h="a"):g=!0;break;case"=":this._n3Mode&&n.length>1&&(c="abbreviation",n[1]!==">"?(m=1,h="="):(m=2,h=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(m=1,c=f);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(c="{|",m=2):(c=f,m=1));break;case"|":n.length>=2&&n[1]==="}"&&(c="|}",m=2);break;default:g=!0}if(g&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(p=this._prefix.exec(n))?(c="prefix",h=p[1]||""):((p=this._prefixed.exec(n))||r&&(p=this._prefixed.exec(`${n} `)))&&(c="prefixed",d=p[1]||"",h=this._unescape(p[2]))),this._previousMarker==="^^")switch(c){case"prefixed":c="type";break;case"IRI":c="typeIRI";break;default:c=""}if(!c)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?o(this):this._input=n;let _=m||p[0].length,b=s(c,h,d,u,_);this.previousToken=b,this._previousMarker=c,n=n.substr(_,n.length)}function s(a,l,u,f,c){let h=n?i-n.length:i,d=h+c,p={type:a,value:l,prefix:u,line:f,start:h,end:d};return e(null,p),p}function o(a){e(a._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let r=!1,n=e.replace(ah,(i,s,o,a)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof o=="string"){let l=Number.parseInt(o,16);return l<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(l&1023))}return a in Na?Na[a]:(r=!0,"")});return r?null:n}_parseLiteral(e){if(e.length>=3){let r=e.match(/^(?:"""|"|'''|'|)/)[0],n=r.length,i=Math.max(this._literalClosingPos,n);for(;(i=e.indexOf(r,i))>0;){let s=0;for(;e[i-s-1]==="\\";)s++;if(s%2===0){let o=e.substring(n,i),a=o.split(/\r\n|\r|\n/).length-1,l=i+n;if(n===1&&a!==0||n===3&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:l}}i++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;let r=new Error(`Unexpected "${e}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,r){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof r=="function")queueMicrotask(()=>this._tokenizeToEnd(r,!0));else{let n=[],i;if(this._tokenizeToEnd((s,o)=>s?i=s:n.push(o),!0),i)throw i;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Pa.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),e.on("error",r)}};var{rdf:ch,xsd:ht}=B,Ht,dh=0;var Vi={namedNode:La,blankNode:Oa,variable:Ca,literal:Ba,defaultGraph:hh,quad:Qi,triple:Qi,fromTerm:Ar,fromQuad:Fa},te=Vi,ee=class t{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof t?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}},zt=class extends ee{get termType(){return"NamedNode"}},Ve=class t extends ee{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){let e=this.id,r=e.lastIndexOf('"')+1;return r<e.length&&e[r++]==="@"?e.substr(r).toLowerCase():""}get datatype(){return new zt(this.datatypeString)}get datatypeString(){let e=this.id,r=e.lastIndexOf('"')+1,n=r<e.length?e[r]:"";return n==="^"?e.substr(r+2):n!=="@"?ht.string:ch.langString}equals(e){return e instanceof t?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},vr=class extends ee{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},Rr=class extends ee{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},Tr=class extends ee{constructor(){return super(""),Ht||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};Ht=new Tr;function Ke(t,e,r){if(e=e||Vi,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===Vi)return new Ve(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));let n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),t[n+1]==="@"?t.substr(n+2):e.namedNode(t.substr(n+3)));case"[":t=JSON.parse(t);break;default:if(!r||!Array.isArray(t))return e.namedNode(t)}return e.quad(Ke(t[0],e,!0),Ke(t[1],e,!0),Ke(t[2],e,!0),t[3]&&Ke(t[3],e,!0))}function Pe(t,e){if(typeof t=="string")return t;if(t instanceof ee&&t.termType!=="Quad")return t.id;if(!t)return Ht.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==ht.string?`^^${t.datatype.value}`:""}`;case"Quad":let r=[Pe(t.subject,!0),Pe(t.predicate,!0),Pe(t.object,!0)];return t.graph&&t.graph.termType!=="DefaultGraph"&&r.push(Pe(t.graph,!0)),e?r:JSON.stringify(r);default:throw new Error(`Unexpected termType: ${t.termType}`)}}var Qe=class extends ee{constructor(e,r,n,i){super(""),this._subject=e,this._predicate=r,this._object=n,this._graph=i||Ht}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}};function La(t){return new zt(t)}function Oa(t){return new vr(t||`n3-${dh++}`)}function Ba(t,e){if(typeof e=="string")return new Ve(`"${t}"@${e.toLowerCase()}`);let r=e?e.value:"";return r===""&&(typeof t=="boolean"?r=ht.boolean:typeof t=="number"&&(Number.isFinite(t)?r=Number.isInteger(t)?ht.integer:ht.double:(r=ht.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),r===""||r===ht.string?new Ve(`"${t}"`):new Ve(`"${t}"^^${r}`)}function Ca(t){return new Rr(t)}function hh(){return Ht}function Qi(t,e,r,n){return new Qe(t,e,r,n)}function Ar(t){if(t instanceof ee)return t;switch(t.termType){case"NamedNode":return La(t.value);case"BlankNode":return Oa(t.value);case"Variable":return Ca(t.value);case"DefaultGraph":return Ht;case"Literal":return Ba(t.value,t.language||t.datatype);case"Quad":return Fa(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function Fa(t){if(t instanceof Qe)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return Qi(Ar(t.subject),Ar(t.predicate),Ar(t.object),Ar(t.graph))}var Ma=0,Je=class{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&Da(this,e.factory);let r=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),i=/trig/.test(r),s=/triple/.test(r),o=/quad/.test(r),a=this._n3Mode=/n3/.test(r),l=s||o;(this._supportsNamedGraphs=!(n||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||s||a),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=r===""||/star|\*$/.test(r),l&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new dt({lineMode:l,n3:a,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Ma=0}_setBase(e){if(!e)this._base="",this._basePath="";else{let r=e.indexOf("#");r>=0&&(e=e.substr(0,r)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,r,n,i,s){let o=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:i,object:s,graph:r,inverse:o?this._inversePredicate:!1,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,r){let n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,r){let n;switch(e.type){case"IRI":case"typeIRI":let i=this._resolveIRI(e.value);if(i===null)return this._error("Invalid IRI",e);n=this._factory.namedNode(i);break;case"type":case"prefixed":let s=this._prefixes[e.prefix];if(s===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(s+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){let r=e.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${r}`,e):(this._subject=null,r==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);let r=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let r=null,n=null,i=this._readListItem,s=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=r=this._factory.blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),o.length!==0&&o[o.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(r=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((r=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._factory.blankNode()),s===null?a.predicate===null?a.subject=n:a.object=n:this._emit(s,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let r=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":let n=this._readEntity(e);if(n===void 0)return;r=this._factory.literal(this._literalValue,n),e=null;break;case"langcode":r=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:r}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,r){let n=this._completeLiteral(e);if(n)return this._object=n.literal,r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let r,n=this._graph,i=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);let o=this._predicate,a=this._object;this._subject=this._factory.quad(i,o,a,this.DEFAULTGRAPH),r=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,r=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(i!==null){let o=this._predicate,a=this._object;s?this._emit(a,o,i,n):this._emit(i,o,a,n)}return r}_readBlankNodePunctuation(e){let r;switch(e.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);let r=this._readEntity(e);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(e){let r=e.type==="IRI"&&this._resolveIRI(e.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let r;switch(e.type){case"IRI":case"prefixed":if((r=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:let r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){let i=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let r,n,i=this._factory.blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=i):(r=this._object,this._object=i),this._emit(r,n,i,this._graph),this._readPath}_readBackwardPath(e){let r=this._factory.blankNode(),n,i;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(i=this._subject,this._subject=r):(i=this._object,this._object=r),this._emit(r,n,i,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);let r=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_getContextEndReader(){let e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,r,n,i){this._callback(null,this._factory.quad(e,r,n,i||this.DEFAULTGRAPH))}_error(e,r){let n=new Error(`${e} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=An}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;let r=e.length,n="",i=-1,s=-1,o=0,a="/";for(;i<r;){switch(a){case":":if(s<0&&e[++i]==="/"&&e[++i]==="/")for(;(s=i+1)<r&&e[s]!=="/";)i=s;break;case"?":case"#":i=r;break;case"/":if(e[i+1]===".")switch(a=e[++i+1],a){case"/":n+=e.substring(o,i-1),o=i+1;break;case void 0:case"?":case"#":return n+e.substring(o,i)+e.substr(i+1);case".":if(a=e[++i+1],a===void 0||a==="/"||a==="?"||a==="#"){if(n+=e.substring(o,i-2),(o=n.lastIndexOf("/"))>=s&&(n=n.substr(0,o)),a!=="/")return`${n}/${e.substr(i+1)}`;o=i+1}}}a=e[++i]}return n+e.substring(o)}parse(e,r,n){let i,s,o;if(r&&(r.onQuad||r.onPrefix||r.onComment)?(i=r.onQuad,s=r.onPrefix,o=r.onComment):(i=r,s=n),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Ma++}_`,this._prefixCallback=s||An,this._inversePredicate=!1,this._quantified=Object.create(null),!i){let l=[],u;if(this._callback=(f,c)=>{f?u=f:c&&l.push(c)},this._lexer.tokenize(e).every(f=>this._readCallback=this._readCallback(f)),u)throw u;return l}let a=(l,u)=>{l!==null?(this._callback(l),this._callback=An):this._readCallback&&(this._readCallback=this._readCallback(u))};o&&(this._lexer.comments=!0,a=(l,u)=>{l!==null?(this._callback(l),this._callback=An):this._readCallback&&(u.type==="comment"?o(u.value):this._readCallback=this._readCallback(u))}),this._callback=i,this._lexer.tokenize(e,a)}};function An(){}function Da(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(B.rdf.first),t.RDF_REST=e.namedNode(B.rdf.rest),t.RDF_NIL=e.namedNode(B.rdf.nil),t.N3_FORALL=e.namedNode(B.r.forAll),t.N3_FORSOME=e.namedNode(B.r.forSome),t.ABBREVIATIONS={a:e.namedNode(B.rdf.type),"=":e.namedNode(B.owl.sameAs),">":e.namedNode(B.log.implies),"<":e.namedNode(B.log.isImpliedBy)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}Da(Je.prototype,te);var Ji={};hr(Ji,{inDefaultGraph:()=>gh,isBlankNode:()=>mh,isDefaultGraph:()=>pt,isLiteral:()=>yh,isNamedNode:()=>ph,isQuad:()=>bh,isVariable:()=>_h,prefix:()=>wh,prefixes:()=>Ua});function ph(t){return!!t&&t.termType==="NamedNode"}function mh(t){return!!t&&t.termType==="BlankNode"}function yh(t){return!!t&&t.termType==="Literal"}function _h(t){return!!t&&t.termType==="Variable"}function bh(t){return!!t&&t.termType==="Quad"}function pt(t){return!!t&&t.termType==="DefaultGraph"}function gh(t){return pt(t.graph)}function wh(t,e){return Ua({"":t.value||t},e)("")}function Ua(t,e){let r=Object.create(null);for(let i in t)n(i,t[i]);e=e||te;function n(i,s){if(typeof s=="string"){let o=Object.create(null);r[i]=a=>o[a]||(o[a]=e.namedNode(s+a))}else if(!(i in r))throw new Error(`Unknown prefix: ${i}`);return r[i]}return n}function Gt(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var xh=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,Sh=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,$a="./",Eh="../",Yi="?",qa="#",mt=class t{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!xh.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!t.supports(this.base))return this._baseMatcher=/.^/;let e=/^[^:]*:\/*/.exec(this.base)[0],r=["^",Gt(e)],n=[],i=[],s=/[^/?#]*([/?#])/y,o,a=0,l=0,u=s.lastIndex=e.length;for(;!a&&!l&&(o=s.exec(this.base));)o[1]===qa?l=s.lastIndex-1:(r.push(Gt(o[0]),"(?:"),n.push(")?"),o[1]!==Yi?i.push(u=s.lastIndex):(a=u=s.lastIndex,l=this.base.indexOf(qa,a),this._pathReplacements[a]=Yi));for(let f=0;f<i.length;f++)this._pathReplacements[i[f]]=Eh.repeat(i.length-f-1);return this._pathReplacements[i[i.length-1]]=$a,this._baseLength=l>0?l:this.base.length,r.push(Gt(this.base.substring(u,this._baseLength)),a?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...r,...n].join(""))}toRelative(e){let r=this._getBaseMatcher().exec(e);if(!r)return e;let n=r[0].length;if(n===this._baseLength&&n===e.length)return"";let i=this._pathReplacements[n];if(i){let s=e.substring(n);return i!==Yi&&!Sh.test(s)?e:i===$a&&/^[^?#]/.test(s)?s:i+s}return e.substring(n-1)}};var Ir=te.defaultGraph(),{rdf:Ah,xsd:Kt}=B,Wa=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,za=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,vh={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"},yt=class extends ee{equals(e){return e===this}},be=class{constructor(e,r){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(r=e,e=null),r=r||{},this._lists=r.lists,e)this._outputStream=e,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(i,s,o){n+=i,o&&o()},end:i=>{i&&i(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Ir,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseIri=new mt(r.baseIRI)))}get _inDefaultGraph(){return Ir.equals(this._graph)}_write(e,r){this._outputStream.write(e,"utf8",r)}_writeQuad(e,r,n,i,s){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Ir.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),e.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,s):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,s):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,s)}catch(o){s&&s(o)}}_writeQuadLine(e,r,n,i,s){delete this._prefixMatch,this._write(this.quadToString(e,r,n,i),s)}quadToString(e,r,n,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(e){let r="";for(let n of e)r+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return r}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let r=e.value;this._baseIri&&(r=this._baseIri.toRelative(r)),Wa.test(r)&&(r=r.replace(za,Ha));let n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(e){let r=e.value;if(Wa.test(r)&&(r=r.replace(za,Ha)),e.language)return`"${r}"@${e.language}`;if(this._lineMode){if(e.datatype.value===Kt.string)return`"${r}"`}else switch(e.datatype.value){case Kt.string:return`"${r}"`;case Kt.boolean:if(r==="true"||r==="false")return r;break;case Kt.integer:if(/^[+-]?\d+$/.test(r))return r;break;case Kt.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case Kt.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===Ah.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:r,object:n,graph:i}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${pt(i)?"":` ${this._encodeIriOrBlank(i)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,r,n,i,s){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,r):typeof i=="function"?this._writeQuad(e,r,n,Ir,i):this._writeQuad(e,r,n,i||Ir,s)}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}addPrefix(e,r,n){let i={};i[e]=r,this.addPrefixes(i,n)}addPrefixes(e,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let i in e){let s=e[i];typeof s!="string"&&(s=s.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[s]=i+=":",this._write(`@prefix ${i} <${s}>.
`)}if(n){let i="",s="";for(let o in this._prefixIRIs)i+=i?`|${o}`:o,s+=(s?"|":"")+this._prefixIRIs[o];i=Gt(i,/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp(`^(?:${s})[^/]*$|^(${i})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(e,r){let n=e,i,s;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:r}]:"length"in e||(n=[e]),s=n.length){case 0:return new yt("[]");case 1:if(i=n[0],!(i.object instanceof yt))return new yt(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let o="[";for(let a=0;a<s;a++)i=n[a],i.predicate.equals(e)?o+=`, ${this._encodeObject(i.object)}`:(o+=`${(a?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new yt(`${o}
]`)}}list(e){let r=e&&e.length||0,n=new Array(r);for(let i=0;i<r;i++)n[i]=this._encodeObject(e[i]);return new yt(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=e&&((n,i)=>{r=null,e(n,i)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}};function Ha(t){let e=vh[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}var mo=sn(si());var po=Symbol("iter");function qr(t,e,r=4){if(r===0)return Object.assign(t,e);for(let n in e)t[n]=qr(t[n]||Object.create(null),e[n],r-1);return t}function nc(t,e,r=4){let n=!1;for(let i in t)if(i in e){let s=r===0?null:nc(t[i],e[i],r-1);if(s!==!1)n=n||Object.create(null),n[i]=s;else if(r===3)return!1}return n}function ic(t,e,r=4){let n=!1;for(let i in t)if(!(i in e))n=n||Object.create(null),n[i]=r===0?null:qr({},t[i],r-1);else if(r!==0){let s=ic(t[i],e[i],r-1);if(s!==!1)n=n||Object.create(null),n[i]=s;else if(r===3)return!1}return n}var Wr=class{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||te}_termFromId(e){if(e[0]==="."){let r=this._entities,n=e.split(".");return this._factory.quad(this._termFromId(r[n[1]]),this._termFromId(r[n[2]]),this._termFromId(r[n[3]]),n[4]&&this._termFromId(r[n[4]]))}return Ke(e,this._factory)}_termToNumericId(e){if(e.termType==="Quad"){let r=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),i=this._termToNumericId(e.object),s;return r&&n&&i&&(pt(e.graph)||(s=this._termToNumericId(e.graph)))&&this._ids[s?`.${r}.${n}.${i}.${s}`:`.${r}.${n}.${i}`]}return this._ids[Pe(e)]}_termToNewNumericId(e){let r=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${pt(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:Pe(e);return this._ids[r]||(this._ids[this._entities[++this._id]=r]=this._id)}createBlankNode(e){let r,n;if(e)for(r=e=`_:${e}`,n=1;this._ids[r];)r=e+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}},rt=class t{constructor(e,r){this._size=0,this._graphs=Object.create(null),!r&&e&&!e[0]&&typeof e.match!="function"&&(r=e,e=null),r=r||{},this._factory=r.factory||te,this._entityIndex=r.entityIndex||new Wr({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addAll(e)}get size(){let e=this._size;if(e!==null)return e;e=0;let r=this._graphs,n,i;for(let s in r)for(let o in n=r[s].subjects)for(let a in i=n[o])e+=Object.keys(i[a]).length;return this._size=e}_addToIndex(e,r,n,i){let s=e[r]||(e[r]={}),o=s[n]||(s[n]={}),a=i in o;return a||(o[i]=null),!a}_removeFromIndex(e,r,n,i){let s=e[r],o=s[n];delete o[i];for(let a in o)return;delete s[n];for(let a in s)return;delete e[r]}*_findInIndex(e,r,n,i,s,o,a,l){let u,f,c,h=this._entities,d=this._termFromId(h[l]),p={subject:null,predicate:null,object:null};r&&((u=e,e={})[r]=u[r]);for(let m in e)if(f=e[m]){p[s]=this._termFromId(h[m]),n&&((u=f,f={})[n]=u[n]);for(let g in f)if(c=f[g]){p[o]=this._termFromId(h[g]);let _=i?i in c?[i]:[]:Object.keys(c);for(let b=0;b<_.length;b++)p[a]=this._termFromId(h[_[b]]),yield this._factory.quad(p.subject,p.predicate,p.object,d)}}}_loop(e,r){for(let n in e)r(n)}_loopByKey0(e,r,n){let i,s;if(i=e[r])for(s in i)n(s)}_loopByKey1(e,r,n){let i,s;for(i in e)s=e[i],s[r]&&n(i)}_loopBy2Keys(e,r,n,i){let s,o,a;if((s=e[r])&&(o=s[n]))for(a in o)i(a)}_countInIndex(e,r,n,i){let s=0,o,a,l;r&&((o=e,e={})[r]=o[r]);for(let u in e)if(a=e[u]){n&&((o=a,a={})[n]=o[n]);for(let f in a)(l=a[f])&&(i?i in l&&s++:s+=Object.keys(l).length)}return s}_getGraphs(e){return e=e===""?1:e&&(this._termToNumericId(e)||-1),typeof e!="number"?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){let r=Object.create(null);return n=>{n in r||(r[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,r,n,i){r||(i=e.graph,n=e.object,r=e.predicate,e=e.subject),i=i?this._termToNewNumericId(i):1;let s=this._graphs[i];return s||(s=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(s)),e=this._termToNewNumericId(e),r=this._termToNewNumericId(r),n=this._termToNewNumericId(n),this._addToIndex(s.subjects,e,r,n)?(this._addToIndex(s.predicates,r,n,e),this._addToIndex(s.objects,n,e,r),this._size=null,!0):!1}addQuads(e){for(let r=0;r<e.length;r++)this.addQuad(e[r])}delete(e){return this.removeQuad(e),this}has(e,r,n,i){return e&&e.subject&&({subject:e,predicate:r,object:n,graph:i}=e),!this.readQuads(e,r,n,i).next().done}import(e){return e.on("data",r=>{this.addQuad(r)}),e}removeQuad(e,r,n,i){r||({subject:e,predicate:r,object:n,graph:i}=e),i=i?this._termToNumericId(i):1;let s=this._graphs,o,a,l;if(!(e=e&&this._termToNumericId(e))||!(r=r&&this._termToNumericId(r))||!(n=n&&this._termToNumericId(n))||!(o=s[i])||!(a=o.subjects[e])||!(l=a[r])||!(n in l))return!1;this._removeFromIndex(o.subjects,e,r,n),this._removeFromIndex(o.predicates,r,n,e),this._removeFromIndex(o.objects,n,e,r),this._size!==null&&this._size--;for(e in o.subjects)return!0;return delete s[i],!0}removeQuads(e){for(let r=0;r<e.length;r++)this.removeQuad(e[r])}remove(e){return e.on("data",r=>{this.removeQuad(r)}),e}removeMatches(e,r,n,i){let s=new mo.Readable({objectMode:!0}),o=this.readQuads(e,r,n,i);return s._read=a=>{for(;--a>=0;){let{done:l,value:u}=o.next();if(l){s.push(null);return}s.push(u)}},this.remove(s)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,r,n,i){return[...this.readQuads(e,r,n,i)]}*readQuads(e,r,n,i){let s=this._getGraphs(i),o,a,l,u;if(!(e&&!(a=this._termToNumericId(e))||r&&!(l=this._termToNumericId(r))||n&&!(u=this._termToNumericId(n))))for(let f in s)(o=s[f])&&(a?u?yield*this._findInIndex(o.objects,u,a,l,"object","subject","predicate",f):yield*this._findInIndex(o.subjects,a,l,null,"subject","predicate","object",f):l?yield*this._findInIndex(o.predicates,l,u,null,"predicate","object","subject",f):u?yield*this._findInIndex(o.objects,u,null,null,"object","subject","predicate",f):yield*this._findInIndex(o.subjects,null,null,null,"subject","predicate","object",f))}match(e,r,n,i){return new tt(this,e,r,n,i,{entityIndex:this._entityIndex})}countQuads(e,r,n,i){let s=this._getGraphs(i),o=0,a,l,u,f;if(e&&!(l=this._termToNumericId(e))||r&&!(u=this._termToNumericId(r))||n&&!(f=this._termToNumericId(n)))return 0;for(let c in s)(a=s[c])&&(e?n?o+=this._countInIndex(a.objects,f,l,u):o+=this._countInIndex(a.subjects,l,u,f):r?o+=this._countInIndex(a.predicates,u,f,l):o+=this._countInIndex(a.objects,f,l,u));return o}forEach(e,r,n,i,s){this.some(o=>(e(o,this),!1),r,n,i,s)}every(e,r,n,i,s){return!this.some(o=>!e(o,this),r,n,i,s)}some(e,r,n,i,s){for(let o of this.readQuads(r,n,i,s))if(e(o,this))return!0;return!1}getSubjects(e,r,n){let i=[];return this.forSubjects(s=>{i.push(s)},e,r,n),i}forSubjects(e,r,n,i){let s=this._getGraphs(i),o,a,l;if(e=this._uniqueEntities(e),!(r&&!(a=this._termToNumericId(r))||n&&!(l=this._termToNumericId(n))))for(i in s)(o=s[i])&&(a?l?this._loopBy2Keys(o.predicates,a,l,e):this._loopByKey1(o.subjects,a,e):l?this._loopByKey0(o.objects,l,e):this._loop(o.subjects,e))}getPredicates(e,r,n){let i=[];return this.forPredicates(s=>{i.push(s)},e,r,n),i}forPredicates(e,r,n,i){let s=this._getGraphs(i),o,a,l;if(e=this._uniqueEntities(e),!(r&&!(a=this._termToNumericId(r))||n&&!(l=this._termToNumericId(n))))for(i in s)(o=s[i])&&(a?l?this._loopBy2Keys(o.objects,l,a,e):this._loopByKey0(o.subjects,a,e):l?this._loopByKey1(o.predicates,l,e):this._loop(o.predicates,e))}getObjects(e,r,n){let i=[];return this.forObjects(s=>{i.push(s)},e,r,n),i}forObjects(e,r,n,i){let s=this._getGraphs(i),o,a,l;if(e=this._uniqueEntities(e),!(r&&!(a=this._termToNumericId(r))||n&&!(l=this._termToNumericId(n))))for(i in s)(o=s[i])&&(a?l?this._loopBy2Keys(o.subjects,a,l,e):this._loopByKey1(o.objects,a,e):l?this._loopByKey0(o.predicates,l,e):this._loop(o.objects,e))}getGraphs(e,r,n){let i=[];return this.forGraphs(s=>{i.push(s)},e,r,n),i}forGraphs(e,r,n,i){for(let s in this._graphs)this.some(o=>(e(o.graph),!0),r,n,i,this._termFromId(this._entities[s]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:r=!1}={}){let n={},i=r?(()=>!0):((a,l)=>{throw new Error(`${a.value} ${l}`)}),s=this.getQuads(null,B.rdf.rest,B.rdf.nil,null),o=e?[...s]:[];return s.forEach(a=>{let l=[],u=!1,f,c,h=a.graph,d=a.subject;for(;d&&!u;){let p=this.getQuads(null,null,d,null),m=this.getQuads(d,null,null,null),g,_=null,b=null,S=null;for(let w=0;w<m.length&&!u;w++)g=m[w],g.graph.equals(h)?f?u=i(d,"has non-list arcs out"):g.predicate.value===B.rdf.first?_?u=i(d,"has multiple rdf:first arcs"):o.push(_=g):g.predicate.value===B.rdf.rest?b?u=i(d,"has multiple rdf:rest arcs"):o.push(b=g):p.length?u=i(d,"can't be subject and object"):(f=g,c="subject"):u=i(d,"not confined to single graph");for(let w=0;w<p.length&&!u;++w)g=p[w],f?u=i(d,"can't have coreferences"):g.predicate.value===B.rdf.rest?S?u=i(d,"has incoming rdf:rest arcs"):S=g:(f=g,c="object");_?l.unshift(_.object):u=i(d,"has no list head"),d=S&&S.subject}u?e=!1:f&&(n[f[c].value]=l)}),e&&this.removeQuads(o),n}addAll(e){if(e instanceof tt&&(e=e.filtered),Array.isArray(e))this.addQuads(e);else if(e instanceof t&&e._entityIndex===this._entityIndex)e._size!==0&&(this._graphs=qr(this._graphs,e._graphs),this._size=null);else for(let r of e)this.add(r);return this}contains(e){if(e instanceof tt&&(e=e.filtered),e===this)return!0;if(!(e instanceof t)||this._entityIndex!==e._entityIndex)return e.every(u=>this.has(u));let r=this._graphs,n=e._graphs,i,s,o,a,l;for(let u in n){if(!(i=r[u]))return!1;i=i.subjects;for(let f in s=n[u].subjects){if(!(o=i[f]))return!1;for(let c in a=s[f]){if(!(l=o[c]))return!1;for(let h in a[c])if(!(h in l))return!1}}}return!0}deleteMatches(e,r,n,i){for(let s of this.match(e,r,n,i))this.removeQuad(s);return this}difference(e){if(e&&e instanceof tt&&(e=e.filtered),e===this)return new t({entityIndex:this._entityIndex});if(e instanceof t&&e._entityIndex===this._entityIndex){let r=new t({entityIndex:this._entityIndex}),n=ic(this._graphs,e._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>!e.has(r))}equals(e){return e instanceof tt&&(e=e.filtered),e===this||this.size===e.size&&this.contains(e)}filter(e){let r=new t({entityIndex:this._entityIndex});for(let n of this)e(n,this)&&r.add(n);return r}intersection(e){if(e instanceof tt&&(e=e.filtered),e===this){let r=new t({entityIndex:this._entityIndex});return r._graphs=qr(Object.create(null),this._graphs),r._size=this._size,r}else if(e instanceof t&&this._entityIndex===e._entityIndex){let r=new t({entityIndex:this._entityIndex}),n=nc(e._graphs,this._graphs);return n&&(r._graphs=n,r._size=null),r}return this.filter(r=>e.has(r))}map(e){let r=new t({entityIndex:this._entityIndex});for(let n of this)r.add(e(n,this));return r}reduce(e,r){let n=this.readQuads(),i=r===void 0?n.next().value:r;for(let s of n)i=e(i,s,this);return i}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new be().quadsToString(this)}union(e){let r=new t({entityIndex:this._entityIndex});return r._graphs=qr(Object.create(null),this._graphs),r._size=this._size,r.addAll(e),r}*[Symbol.iterator](){yield*this.readQuads()}};function Te(t,e,r=0){let n=e[r];if(n&&!(n in t))return!1;let i=!1;for(let s in n?{[n]:t[n]}:t){let o=r===2?null:Te(t[s],e,r+1);o!==!1&&(i=i||Object.create(null),i[s]=o)}return i}var tt=class t extends mo.Readable{constructor(e,r,n,i,s,o){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:r,predicate:n,object:i,graph:s,options:o})}get filtered(){if(!this._filtered){let{n3Store:e,graph:r,object:n,predicate:i,subject:s}=this,o=this._filtered=new rt({factory:e._factory,entityIndex:this.options.entityIndex}),a,l,u;if(s&&!(a=o._termToNumericId(s))||i&&!(l=o._termToNumericId(i))||n&&!(u=o._termToNumericId(n)))return o;let f=e._getGraphs(r);for(let c in f){let h,d,p,m;(m=f[c])&&(!a&&l?(d=Te(m.predicates,[l,u,a]))&&(h=Te(m.subjects,[a,l,u]),p=Te(m.objects,[u,a,l])):u?(p=Te(m.objects,[u,a,l]))&&(h=Te(m.subjects,[a,l,u]),d=Te(m.predicates,[l,u,a])):(h=Te(m.subjects,[a,l,u]))&&(d=Te(m.predicates,[l,u,a]),p=Te(m.objects,[u,a,l])),h&&(o._graphs[c]={subjects:h,predicates:d,objects:p}))}o._size=null}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[po]&&(this[po]=this[Symbol.iterator]());let r=this[po];for(;--e>=0;){let{done:n,value:i}=r.next();if(n){this.push(null);return}this.push(i)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,r,n,i){return this.filtered.deleteMatches(e,r,n,i)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,r,n,i,s){return this.filtered.every(e,r,n,i,s)}filter(e){return this.filtered.filter(e)}forEach(e,r,n,i,s){return this.filtered.forEach(e,r,n,i,s)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,r,n,i,s){return this.filtered.some(e,r,n,i,s)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,r){return this.filtered.reduce(e,r)}toString(){return new be().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,r,n,i){return new t(this.filtered,e,r,n,i,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}};var zr=class{dataset(e){return new rt(e)}};function oc(t){let e=[];for(let{subject:r,object:n}of t.match(null,te.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,te.defaultGraph())){let i=[...t.match(null,null,null,r)],s=[...t.match(null,null,null,n)];e.push({premise:i,conclusion:s})}return e}var Hr=class{constructor(e){this._store=e}_add(e,r,n,i,s){this._store._addToIndex(i.subjects,e,r,n)&&(this._store._addToIndex(i.predicates,r,n,e),this._store._addToIndex(i.objects,n,e,r),s())}_evaluatePremise(e,r,n,i=0){let s,o,a,l,u,[f,c,h]=e.premise[i].value,d=r[e.premise[i].content],p=!(a=f.value);for(a in p?d:{[a]:d[a]})if(l=d[a]){p&&(f.value=Number(a)),s=!(a=c.value);for(a in s?l:{[a]:l[a]})if(u=l[a]){s&&(c.value=Number(a)),o=!(a=h.value);for(a in o?u:{[a]:u[a]})o&&(h.value=Number(a)),i===e.premise.length-1?e.conclusion.forEach(m=>{this._add(m.subject.value,m.predicate.value,m.object.value,r,()=>{n(m)})}):this._evaluatePremise(e,r,n,i+1);o&&(h.value=null)}s&&(c.value=null)}p&&(f.value=null)}_evaluateRules(e,r,n){for(let i=0;i<e.length;i++)this._evaluatePremise(e[i],r,n)}_reasonGraphNaive(e,r){let n=[];function i(a){a.next&&a.next.forEach(l=>{n.push([a.subject.value,a.predicate.value,a.object.value,l])})}let s=a=>{a.forEach(l=>{this._add(l.subject.value,l.predicate.value,l.object.value,r,()=>{i(l)})})};this._evaluateRules(e,r,i);let o;for(;(o=n.pop())!==void 0;){let[a,l,u,f]=o,c=f.basePremise.subject.value;c||(f.basePremise.subject.value=a);let h=f.basePremise.predicate.value;h||(f.basePremise.predicate.value=l);let d=f.basePremise.object.value;d||(f.basePremise.object.value=u),f.premise.length===0?s(f.conclusion):this._evaluatePremise(f,r,i),c||(f.basePremise.subject.value=null),h||(f.basePremise.predicate.value=null),d||(f.basePremise.object.value=null)}}_createRule({premise:e,conclusion:r}){let n={},i=o=>o.termType==="Variable"?n[o.value]=n[o.value]||{}:{value:this._store._termToNewNumericId(o)},s=o=>({subject:i(o.subject),predicate:i(o.predicate),object:i(o.object)});return{premise:e.map(o=>s(o)),conclusion:r.map(o=>s(o)),variables:Object.values(n)}}reason(e){Array.isArray(e)||(e=oc(e)),e=e.map(n=>this._createRule(n));for(let n of e)for(let i of e)for(let s=0;s<i.premise.length;s++){let o=i.premise[s];for(let a of n.conclusion){if(yo(o.subject,a.subject)&&yo(o.predicate,a.predicate)&&yo(o.object,a.object)){let l=new Set,u=[];o.subject.value=o.subject.value||1,o.object.value=o.object.value||1,o.predicate.value=o.predicate.value||1;for(let f=0;f<i.premise.length;f++)f!==s&&u.push(sc(i.premise[f],l));(a.next=a.next||[]).push({premise:u,conclusion:i.conclusion,basePremise:o})}i.variables.forEach(l=>{l.value=null})}}for(let n of e){let i=new Set;n.premise=n.premise.map(s=>sc(s,i))}let r=this._store._getGraphs();for(let n in r)this._reasonGraphNaive(e,r[n]);this._store._size=null}};function sc({subject:t,predicate:e,object:r},n){let i=t.value||n.has(t)||(n.add(t),!1),s=e.value||n.has(e)||(n.add(e),!1),o=r.value||n.has(r)||(n.add(r),!1);return!i&&s?{content:"predicates",value:[e,r,t]}:o?{content:"objects",value:[r,t,e]}:{content:"subjects",value:[t,e,r]}}function yo(t,e){return t.value===null&&(t.value=e.value),t.value===e.value}var ac=sn(si());var Gr=class extends ac.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;let r=new Je(e),n,i,s={onQuad:(o,a)=>{o&&this.emit("error",o)||a&&this.push(a)},onPrefix:(o,a)=>{this.emit("prefix",o,a)}};e&&e.comments&&(s.onComment=o=>{this.emit("comment",o)}),r.parse({on:(o,a)=>{switch(o){case"data":n=a;break;case"end":i=a;break}}},s),this._transform=(o,a,l)=>{n(o),l()},this._flush=o=>{i(),o()}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),this}};var lc=sn(si());var Kr=class extends lc.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});let r=this._writer=new be({write:(n,i,s)=>{this.push(n),s&&s()},end:n=>{this.push(null),n&&n()}},e);this._transform=(n,i,s)=>{r.addQuad(n,s)},this._flush=n=>{r.end(n)}}import(e){return e.on("data",r=>{this.write(r)}),e.on("end",()=>{this.end()}),e.on("error",r=>{this.emit("error",r)}),e.on("prefix",(r,n)=>{this._writer.addPrefix(r,n)}),this}};var oi={Lexer:dt,Parser:Je,Writer:be,Store:rt,StoreFactory:zr,EntityIndex:Wr,StreamParser:Gr,StreamWriter:Kr,Util:Ji,Reasoner:Hr,BaseIRI:mt,DataFactory:te,Term:ee,NamedNode:zt,Literal:Ve,BlankNode:vr,Variable:Rr,DefaultGraph:Tr,Quad:Qe,Triple:Qe,termFromId:Ke,termToId:Pe};var Xb=(t,e,r)=>{let n=new oi.Parser({blankNodePrefix:"",format:r}),i=Object.create(null);return{quads:n.parse(t,null,(o,a)=>{i[o]=a.id}),prefixes:i}},eg=t=>new Promise((e,r)=>{let n=new oi.Writer({format:t.type,prefixes:{...t.prefixes}}),i=t.prefixes.xsd,{quad:s,namedNode:o,literal:a,blankNode:l}=oi.DataFactory,u=(_,b)=>{let S=b.a;if(Array.isArray(S)||(S=[S]),S?.length)for(let w of S)w=t.fullURI(w),n.addQuad(s(o(_),o(Fi),o(w)))},f=(_,b)=>{if(!b)return;let S=c(b);for(let w of S){Array.isArray(w.object)||(w.object=[w.object]);for(let R of w.object)n.addQuad(s(o(_),w.predicate,R))}},c=_=>{let b=[];return Object.entries(_).forEach(S=>{let w=S[0],R=S[1],ke=t.fullURI(w),M={predicate:o(ke)};R instanceof Dt?M.object=p(R):Array.isArray(R)?M.object=g(R):R instanceof Mt?M.object=o(R.id):R instanceof ut?M.object=m(R):d(R)?M.object=h(R):console.log("weird object",R,w),b.push(M)}),b},h=_=>{let b=t.getType(_)||null;if(b)b==i+t.context.separator+"string"||b==i+t.context.separator+"number"?b=null:b=t.fullURI(b),b=o(b);else{let S=_?.language;S&&(b=S)}return _ instanceof String?_=""+_:_ instanceof Number&&(_=+_),a(_,b)},d=_=>_ instanceof String||_ instanceof Number||typeof _=="boolean"||typeof _=="string"||typeof _=="number",p=_=>{let b=[];for(let S of _)d(S)?b.push(h(S)):S.id?b.push(o(S.id)):b.push(m(S));return n.list(b)},m=_=>n.blank(c(_)),g=(_,b)=>{let S=[];for(let w of b)d(w)?S.push(h(w)):w instanceof Mt?S.push(o(w.id)):w instanceof ut?S.push(m(w)):w instanceof Dt&&S.push(p(w));return S};Object.entries(t.subjects).forEach(([_,b])=>{_=t.shortURI(_,":"),u(_,b),f(_,b)}),n.end((_,b)=>{b?e(b):r(_)})});var uc={context:Ci,..._o};globalThis.oldm=uc;var ur=uc;function ai(t){t=Object.assign({contentType:"text/turtle",prefixes:{ldp:"http://www.w3.org/ns/ldp#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",dct:"http://purl.org/dc/terms/",stat:"http://www.w3.org/ns/posix/stat#",turtle:"http://www.w3.org/ns/iana/media-types/text/turtle#",schem:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",acl:"http://www.w3.org/ns/auth/acl#",pims:"http://www.w3.org/ns/pim/space#",vcard:"http://www.w3.org/2006/vcard/ns#",foaf:"http://xmlns.com/foaf/0.1/"},parser:ur.n3Parser,writer:ur.n3Writer},t),t.prefixes.ldp||(t.prefixes.ldp="http://www.w3.org/ns/ldp#");let e=ur.context(t);return async function(n,i){if(n.headers.get("Accept")||(n=n.with({headers:{Accept:t.accept??t.contentType}})),n.method!=="GET"&&n.method!=="HEAD"&&n.data&&typeof n.data=="object"&&!(n.data instanceof ReadableStream)){let o=n.headers.get("Content-Type");(!o||isPlainText(o))&&(n=n.with({headers:{"Content-Type":t.contentType}})),fc(n.headers.get("Content-Type"))&&(n=n.with({body:await e.writer(n.data)}))}let s=await i(n);if(s&&fc(s.headers?.get("Content-Type"))){let a=await s.clone().text();try{let l=e.parse(a,n.url,s.headers.get("Content-Type"));return s.with({body:l})}catch{}}return s}}var tg=[/^text\/turtle\b/,/^application\/n-quads\b/,/^text\/x-nquads\b/,/^appliction\/n-triples\b/,/^application\/trig\b/];function fc(t){for(let e of tg)if(e.exec(t))return!0;return!1}globalThis.oldmmw=ai;var li=ai;var cc={html:{webid:html`
<dialog id="webidDialog" class="ds-dialog">
	<button class="ds-button ds-button-close" data-simply-command="webidClose">
		<svg class="ds-icon ds-icon-feather">
            <use xlink:href="assets/icons/feather-sprite.svg#x"></use>
        </svg>		
	</button>
<form class="ds-space" data-simply-command="webidSave">
	<div class="ds-alert ds-alert-error" data-flow-field="webid.error"></div>
	<label>
		Solid WebID
		<input autofocus type="url" name="webidURL" placeholder="Enter your WebID">
	</label>
	<p>Don't have a Solid WebID? Request a personal WebID at one of these providers: ....</p>
	<div class="ds-form-buttons">
		<button class="ds-button ds-button-primary">Save</button>
	</div>
</form>
</dialog>
		`},css:{webid:css`
@layer theme {
	:root {
		--ds-dialog-shadow: var(--ds-shadow-large);
		--ds-dialog-radius: var(--ds-box-radius);
		--ds-dialog-backdrop: rgba(255,255,255,0.1);
	}
}
@layer component {
	:root {
		--solid-dialog-shadow: var(--ds-dialog-shadow);
		--solid-dialog-radius: var(--ds-dialog-radius);
		--solid-dialog-width: 400px;
		--solid-dialog-height: 300px;
		--solid-dialog-backdrop: var(--ds-dialog-backdrop);
		--solid-dialog-outline: 1px solid var(--ds-grey-40);
	}
	.solid-dialog {
		width: var(--solid-dialog-width);
		height: var(--solid-dialog-height);
		border: 0;
		border-radius: var(--solid-dialog-radius);
		box-shadow: var(--solid-dialog-shadow);
		outline: var(--solid-dialog-outline);
	}
	.solid-dialog::backdrop {
		background: var(--solid-dialog-backdrop);
		backdrop-filter: blur(16px);
	}
	.ds-dialog::backdrop {
		backdrop-filter: blur(16px);		
	}
}
@media screen and (max-width:719px) {
	width: 100vw;
	height: 100vh;
}
		`},commands:{webidDialog:async function(t,e){this.actions.webidDialog()},webidSave:async function(t,e){if(!e.webidURL){this.actions.webidErrors("Please enter a WebID URL");return}this.state.webid.id=e.webidURL,await this.actions.webidSave(e.webidURL)&&document.getElementById("webidDialog").close()},webidClose:async function(t,e){document.getElementById("webidDialog").close()}},actions:{webidInit:async function(t={}){this.state.webid||(this.state.webid={config:{prefixes:{acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",schema:"http://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#"},parser:ur.n3Parser}}),Object.assign(this.state.webid.config,t)},webidDialog:async function(){this.actions.webidErrors(""),document.getElementById("webidDialog").showModal()},webidSave:async function(t){let e;try{if(e=await K.client(K.mw.thrower(),li(this.state.webid.config),K.mw.getdata()).get(t),e instanceof Response)throw new Error("Error: unexpected response: "+await profile.text());if(!e.primary)throw new Error("Error: no webID found in resource");return this.state.webid.profile=e.primary,!0}catch(r){this.actions.webidErrors(r.message)}return!1},webidErrors:async function(t){this.state.webid.error=t}},hooks:{start:function(t){this.actions.webidInit(),this.container.insertAdjacentHTML("beforeend",t.html.webid)}}};var A=class t{#e;constructor(e){this.#e=t.collapse(e)}get value(){return this.#e}toString(){return this.#e}get length(){return this.#e.length}static collapse(e,r=""){if(e instanceof t)return e.value;if(typeof e!="string")throw new TypeError("path argument must be a string or an instance of Path");if(r&&!(r instanceof t)&&(r=new t(r)),e=e.trim(),e.length===0)return r.value;t.isRelative(e)&&(e=r+e);let n=t.reduce(e,(s,o)=>(o==".."?s.pop():o!=="."&&s.push(o),s),[]),i="/";return n.length&&(i+=n.join("/"),t.isFolder(e)&&(i+="/")),i}static isAbsolute(e){return e instanceof t?!0:e.length&&e[0]==="/"}static isRelative(e){return!t.isAbsolute(e)}static isFolder(e){return e instanceof t&&(e=e.value),e.length&&e[e.length-1]=="/"}static isPath(e){return e instanceof t?!0:typeof e!="string"?!1:(e=e.trim(),new URL(e,document.location).pathname==e)}static reduce(e,r,n){return e instanceof t&&(e=e.value),e.split("/").filter(Boolean).reduce(r,n)}static map(e,r){return e instanceof t&&(e=e.value),e.split("/").filter(Boolean).map(r)}static parent(e){e instanceof t&&(e=e.value),e=e.split("/").filter(Boolean),e.pop();let r="/";return e.length&&(r+=e.join("/")+"/"),r}static filename(e){return e instanceof t&&(e=e.value),e.split("/").filter(Boolean).pop()}static head(e){return e instanceof t&&(e=e.value),e.split("/").filter(Boolean).shift()}static tail(e){e instanceof t&&(e=e.value),e=e.split("/").filter(Boolean),e.shift();let r="/";return e.length&&(r+=e.join("/")+"/"),r}};var Vr=class t{#e;#t="/";constructor(e){this.#e=e,this.#t=this.#e.path}get path(){return this.#t}cd(e){return e instanceof A||(e=new A(A.collapse(e,this.#t))),new t(this.#e.cd(e))}async read(e,r=null){if(e instanceof A||(e=new A(A.collapse(e,this.#t))),typeof r=="function"){if(!this.#e.supportsStreamingRead())throw new Error("Adapter "+this.#e.name+" does not support streaming reading.");return this.#e.readStream(e,r)}else return this.#e.read(e)}async write(e,r,n=null){if(e instanceof A||(e=new A(A.collapse(e,this.#t))),!this.#e.supportsWrite())throw new Error("Adapter "+this.#e.name+" is read only.");if(typeof r=="function"){if(!this.#e.supportsStreamingWrite())throw new Error("Adapter "+this.#e.name+" does not support streaming writing.");return this.#e.writeStream(e,r,n)}else{if(typeof r=="string")return this.#e.write(e,r,n);throw new TypeError("Cannot write contents of type "+typeof r)}}async delete(e){return e instanceof A||(e=new A(A.collapse(e,this.#t))),this.#e.delete(e)}async exists(e){return e instanceof A||(e=new A(A.collapse(e,this.#t))),this.#e.exists(e)}async list(e=""){return e instanceof A||(e=new A(A.collapse(e,this.#t))),this.#e.list(e)}};var kt=class{#e;#t;constructor(e,r="/"){this.#e=ne(e),this.#t=new A(r)}get name(){return"HttpAdapter"}get path(){return this.#t}supportsWrite(){return!0}supportsStreamingWrite(){return rg}supportsStreamingRead(){return!0}cd(e){if(!A.isPath(e))throw new TypeError(e+" is not a valid path");return A.isRelative(e)&&(e=A.collapse(e,this.#t)),new this.constructor(this.#e,e)}async write(e,r,n=null){return this.#e.put({body:r})}writeStream(e,r,n=null){throw new Error("Not yet implemented")}async read(e){let r=await this.#e.get(e),n={type:this.getMimetype(r),name:A.filename(e),http:{headers:r.headers,status:r.status,url:r.url}};return n.type.match(/text\/.*/)?n.contents=await r.text():n.type.match(/application\/json.*/)?n.contents=await r.json():n.contents=await r.blob(),n}readStream(e,r){throw new Error("Not yet implemented")}async exists(e){return this.#e.head(e)}async delete(e){return this.#e.delete(e)}async list(e){let r=["text/html","text/xhtml","text/xhtml+xml","text/xml"],n=await this.read(e);if(r.includes(n.type.split(";")[0]))var i=n.contents;else{let u=this.getUrl(e);throw new TypeError("URL "+u+" is not of a supported content type",{cause:n})}let s=q(this.#e.clientOptions.url).pathname,o=this.getUrl(e),a=document.createElement("template");a.innerHTML=i;let l=a.content.querySelectorAll("a[href]");return Array.from(l).map(u=>{let f=new URL(u.getAttribute("href"),o.href);return u.href=f.href,{filename:A.filename(u.pathname),path:u.pathname,name:u.innerText,href:u.href}}).filter(u=>{let f=new URL(u.href);return f.pathname=A.parent(f.pathname),f.href===o.href}).map(u=>({filename:u.filename,path:u.path.substring(s.length-1),name:u.name}))}getUrl(e){let r=q(this.#e.clientOptions.url).pathname;return e=A.collapse(r+A.collapse(e)),new URL(e,this.#e.clientOptions.url)}getMimetype(e){return e.headers.has("Content-Type")?e.headers.get("Content-Type"):null}},rg=(async()=>new Request("",{body:new ReadableStream,method:"POST",duplex:"half"}).headers.has("Content-Type")?!1:fetch("data:a/a;charset=utf-8,",{method:"POST",body:new ReadableStream,duplex:"half"}).then(()=>!0,()=>!1))();var dc={fs:Vr,adapters:{https:kt},path:A};globalThis.jsfs=dc;var hc=dc;globalThis.assertEnabled=!1;function Y(t,e){if(globalThis.assertEnabled){let r=ae(t,e);if(r)throw console.error("\u{1F170}\uFE0F  Assertions failed because of:",r,"in this source:",t),new Error("Assertions failed",{cause:{problems:r,source:t}})}}function x(t){return function(r,n,i){if(typeof r<"u"&&r!=null&&typeof t<"u")return ae(r,t,n,i)}}function j(t){return function(r,n,i){return r==null||typeof r>"u"?L("data is required",r,t||"any value",i):typeof t<"u"?ae(r,t,n,i):!1}}function Qr(t){return function(r,n,i){return r==null||typeof r>"u"?(ng("data does not contain recommended value",r,t,i),!1):ae(r,t,n,i)}}function re(...t){return function(r,n,i){for(let s of t)if(!ae(r,s,n,i))return!1;return L("data does not match oneOf patterns",r,t,i)}}function fr(...t){return function(r,n,i){if(!Array.isArray(r))return L("data is not an array",r,"anyOf",i);for(let s of r)if(re(...t)(s))return L("data does not match anyOf patterns",s,t,i);return!1}}function pc(...t){return function(r,n,i){let s=[];for(let o of t)s=s.concat(ae(r,o,n,i));if(s=s.filter(Boolean),s.length)return L("data does not match all given patterns",r,t,i,s)}}function I(t,e,r){try{t instanceof URL&&(t=t.href);let n=new URL(t);if(n.href!=t&&!(n.href+"/"==t||n.href==t+"/"))return L("data is not a valid url",t,"validURL",r)}catch{return L("data is not a valid url",t,"validURL",r)}}function mc(t,e,r){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return L("data is not a valid email",t,"validEmail",r)}function cr(t){return function(r,n,i){if(!(r instanceof t))return L("data is not an instanceof pattern",r,t,i)}}function Jr(t){return function(r,n,i){if(!ae(r,t,n,i))return L("data matches pattern, when required not to",r,t,i)}}function ae(t,e,r,n=""){r||(r=t);let i=[];if(e===Boolean)typeof t!="boolean"&&!(t instanceof Boolean)&&i.push(L("data is not a boolean",t,e,n));else if(e===Number)typeof t!="number"&&!(t instanceof Number)&&i.push(L("data is not a number",t,e,n));else if(e===String)typeof t!="string"&&!(t instanceof String)&&i.push(L("data is not a string",t,e,n)),t==""&&i.push(L("data is an empty string, which is not allowed",t,e,n));else if(e instanceof RegExp)if(Array.isArray(t)){let s=t.findIndex((o,a)=>ae(o,e,r,n+"["+a+"]"));s>-1&&i.push(L("data["+s+"] does not match pattern",t[s],e,n+"["+s+"]"))}else typeof t>"u"?i.push(L("data is undefined, should match pattern",t,e,n)):e.test(t)||i.push(L("data does not match pattern",t,e,n));else if(e instanceof Function){let s=e(t,r,n);s&&(Array.isArray(s)?i=i.concat(s):i.push(s))}else if(Array.isArray(e)){Array.isArray(t)||i.push(L("data is not an array",t,[],n));for(let s of e)for(let o of t.keys()){let a=ae(t[o],s,r,n+"["+o+"]");Array.isArray(a)?i=i.concat(a):a&&i.push(a)}}else if(e&&typeof e=="object")if(Array.isArray(t)){let s=t.findIndex((o,a)=>ae(o,e,r,n+"["+a+"]"));s>-1&&i.push(L("data["+s+"] does not match pattern",t[s],e,n+"["+s+"]"))}else if(!t||typeof t!="object")i.push(L("data is not an object, pattern is",t,e,n));else if(t instanceof URLSearchParams&&(t=Object.fromEntries(t)),e instanceof Function){let s=ae(t,e,r,n);s&&(i=i.concat(s))}else for(let[s,o]of Object.entries(e)){let a=ae(t[s],o,r,n+"."+s);a&&(i=i.concat(a))}else e!=t&&i.push(L("data and pattern are not equal",t,e,n));return i.length?i:!1}function L(t,e,r,n,i){let s={path:n,message:t,found:e,expected:r};return i&&(s.problems=i),s}function ng(t,e,r,n){console.warn("\u{1F170}\uFE0F  Assert: "+n,t,r,e)}function yc(t){let e,r;if(typeof localStorage<"u")e={get:()=>localStorage.getItem("metro/state:"+t),set:n=>localStorage.setItem("metro/state:"+t,n),has:()=>localStorage.getItem("metro/state:"+t)!==null,delete:()=>localStorage.remoteItem("metro/state:"+t)},r={get:n=>JSON.parse(localStorage.getItem(t+":"+n)),set:(n,i)=>localStorage.setItem(t+":"+n,JSON.stringify(i)),has:n=>localStorage.getItem(t+":"+n)!==null,delete:n=>localStorage.removeItem(t+":"+n)};else{let n=new Map;e={get:()=>n.get("metro/state:"+t),set:i=>n.set("metro/state:"+t,i),has:()=>n.has("metro/state:"+t),delete:()=>n.delete("metro/state:"+t)},r=new Map}return{state:e,tokens:r}}function bo(t){let e={client:ne(),force_authorization:!1,site:"default",oauth2_configuration:{authorization_endpoint:"/authorize",token_endpoint:"/token",redirect_uri:globalThis.document?.location.href,grant_type:"authorization_code",code_verifier:sg(64)},authorize_callback:async f=>(window.location.href!=f.href&&window.location.replace(f.href),!1)};Y(t,{});let r=Object.assign({},e.oauth2_configuration,t?.oauth2_configuration);t=Object.assign({},e,t),t.oauth2_configuration=r;let n=yc(t.site);t.tokens||(t.tokens=n.tokens),t.state||(t.state=n.state),Y(t,{oauth2_configuration:{client_id:j(/.+/),grant_type:"authorization_code",authorization_endpoint:j(I),token_endpoint:j(I),redirect_uri:j(I)}});for(let f in r)switch(f){case"access_token":case"authorization_code":case"refresh_token":t.tokens.set(f,r[f]);break}return async function(f,c){if(t.force_authorization)return i(f,c);let h;try{if(h=await c(f),h.ok)return h}catch(d){switch(h?.status){case 400:case 401:return i(f,c)}throw d}if(!h.ok)switch(h.status){case 400:case 401:return i(f,c)}return h};async function i(f,c){s();let h=t.tokens.get("access_token"),d=t.tokens.get("refresh_token"),p=ig(h);if(!h||p&&!d){try{if(!await o())return Bt("false")}catch(m){throw m}return i(f,c)}else if(p&&d){try{if(!await a())return Bt("false")}catch(m){throw m}return i(f,c)}else return f=lt(f,{headers:{Authorization:h.type+" "+h.value}}),c(f)}function s(){if(typeof window<"u"&&window?.location){let f=q(window.location),c,h,d;if(f.searchParams.has("code"))d=f.searchParams,f=f.with({search:""}),history.pushState({},"",f.href);else if(f.hash){let p=f.hash.substr(1);d=new URLSearchParams("?"+p),f=f.with({hash:""}),history.pushState({},"",f.href)}if(d){c=d.get("code"),h=d.get("state");let p=t.state.get("metro/state");if(!h||h!==p)return;c&&t.tokens.set("authorization_code",c)}}}async function o(){if(r.grant_type==="authorization_code"&&!t.tokens.has("authorization_code")){let d=await l();if(!t.authorize_callback||typeof t.authorize_callback!="function")throw H("oauth2mw: oauth2 with grant_type:authorization_code requires a callback function in client options.authorize_callback");let p=await t.authorize_callback(d);if(p)t.tokens.set("authorization_code",p);else return!1}let f=u(),c=await t.client.post(f);if(!c.ok){let d=await c.text();throw H("OAuth2mw: fetch access_token: "+c.status+": "+c.statusText,{cause:f})}let h=await c.json();if(t.tokens.set("access_token",{value:h.access_token,expires:_c(h.expires_in),type:h.token_type,scope:h.scope}),h.refresh_token){let d={value:h.refresh_token};t.tokens.set("refresh_token",d)}return t.tokens.delete("authorization_code"),h}async function a(){let f=u("refresh_token"),c=await t.client.post(f);if(!c.ok)throw H("OAuth2mw: refresh access_token: "+c.status+": "+c.statusText,{cause:f});let h=await c.json();if(t.tokens.set("access_token",{value:h.access_token,expires:_c(h.expires_in),type:h.token_type,scope:h.scope}),h.refresh_token){let d={value:h.refresh_token};t.tokens.set("refresh_token",d)}else return!1;return h}async function l(){if(!r.authorization_endpoint)throw H("oauth2mw: Missing options.oauth2_configuration.authorization_endpoint");let f=q(r.authorization_endpoint,{hash:""});Y(r,{client_id:/.+/,redirect_uri:/.+/,scope:/.*/});let c={response_type:"code",client_id:r.client_id,redirect_uri:r.redirect_uri,state:r.state||ag(40)};return r.response_type&&(c.response_type=r.response_type),r.response_mode&&(c.response_mode=r.response_mode),t.state.set(c.state),r.client_secret&&(c.client_secret=r.client_secret),r.code_verifier&&(t.tokens.set("code_verifier",r.code_verifier),c.code_challenge=await og(r.code_verifier),c.code_challenge_method="S256"),r.scope&&(c.scope=r.scope),r.prompt&&(c.prompt=r.prompt),q(f,{search:c})}function u(f=null){if(Y(r,{client_id:/.+/,redirect_uri:/.+/}),!r.token_endpoint)throw H("oauth2mw: Missing options.endpoints.token url");let c=q(r.token_endpoint,{hash:""}),h={grant_type:f||r.grant_type,client_id:r.client_id};switch(r.client_secret&&(h.client_secret=r.client_secret),r.scope&&(h.scope=r.scope),h.grant_type){case"authorization_code":h.redirect_uri=r.redirect_uri,h.code=t.tokens.get("authorization_code");let d=t.tokens.get("code_verifier");d&&(h.code_verifier=d);break;case"client_credentials":break;case"refresh_token":let p=t.tokens.get("refresh_token");h.refresh_token=p.value;break;default:throw new Error("Unknown grant_type: ".oauth2.grant_type)}return lt(c,{method:"POST",body:new URLSearchParams(h)})}}function ig(t){if(!t)return!0;let e=new Date(t.expires);return new Date().getTime()>e.getTime()}function _c(t){if(t instanceof Date)return new Date(t.getTime());if(typeof t=="number"){let e=new Date;return e.setSeconds(e.getSeconds()+t),e}throw new TypeError("Unknown expires type "+t)}function sg(t=64){let e=new Uint8Array(t);return globalThis.crypto.getRandomValues(e),bc(e)}async function og(t){let r=new TextEncoder().encode(t),n=await globalThis.crypto.subtle.digest("SHA-256",r);return bc(n)}function bc(t){let e=Array.from(new Uint8Array(t),r=>String.fromCharCode(r)).join("");return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function ag(t){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r="",n=0;for(;n<t;)r+=e.charAt(Math.floor(Math.random()*e.length)),n++;return r}function gc(){let t=new URL(document.location.href);if(!t.searchParams.has("code")){if(t.hash){let e=t.hash.substr(1);if(params=new URLSearchParams("?"+e),params.has("code"))return!0}return!1}return!0}function wc(t){return new Promise((e,r)=>{addEventListener("message",n=>{event.data.authorization_code?e(event.data.authorization_code):event.data.error?r(event.data.error):r("Unknown authorization error")},{once:!0}),window.open(t)})}function go(){return new Promise((t,e)=>{let r=globalThis.indexedDB.open("metro",1);r.onupgradeneeded=()=>r.result.createObjectStore("keyPairs",{keyPath:"domain"}),r.onerror=n=>{e(n)},r.onsuccess=n=>{let i=n.target.result;t({set:function(s,o){return new Promise((a,l)=>{let u=i.transaction("keyPairs","readwrite",{durability:"strict"}),f=u.objectStore("keyPairs");u.oncomplete=()=>{a()},u.onerror=l,f.put(s,o)})},get:function(s){return new Promise((o,a)=>{let l=i.transaction("keyPairs","readonly"),f=l.objectStore("keyPairs").get(s);f.onsuccess=()=>{o(f.result)},f.onerror=a,l.onerror=a})},clear:function(){return new Promise((s,o)=>{let a=i.transaction("keyPairs","readwrite"),u=a.objectStore("keyPairs").clear();u.onsuccess=()=>{s()},u.onerror=o,a.onerror=o})}})}})}var ug=new TextEncoder,fg=new TextDecoder;function ui(t){return typeof t=="string"?ug.encode(t):fg.decode(t)}function xc(t){if(typeof t.modulusLength!="number"||t.modulusLength<2048)throw new wo(`${t.name} modulusLength must be at least 2048 bits`)}function cg(t){switch(t.algorithm.name){case"ECDSA":return{name:t.algorithm.name,hash:"SHA-256"};case"RSA-PSS":return xc(t.algorithm),{name:t.algorithm.name,saltLength:32};case"RSASSA-PKCS1-v1_5":return xc(t.algorithm),{name:t.algorithm.name};case"Ed25519":return{name:t.algorithm.name}}throw new nt}async function dg(t,e,r){if(r.usages.includes("sign")===!1)throw new TypeError('private CryptoKey instances used for signing assertions must include "sign" in their "usages"');let n=`${Yr(ui(JSON.stringify(t)))}.${Yr(ui(JSON.stringify(e)))}`,i=Yr(await crypto.subtle.sign(cg(r),r,ui(n)));return`${n}.${i}`}var Sc=32768;function hg(t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));let e=[];for(let r=0;r<t.byteLength;r+=Sc)e.push(String.fromCharCode.apply(null,t.subarray(r,r+Sc)));return btoa(e.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Yr(t){return hg(t)}function pg(){return Yr(crypto.getRandomValues(new Uint8Array(32)))}var nt=class extends Error{constructor(e){super(e??"operation not supported"),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}},wo=class extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}};function mg(t){switch(t.algorithm.hash.name){case"SHA-256":return"PS256";default:throw new nt("unsupported RsaHashedKeyAlgorithm hash name")}}function yg(t){switch(t.algorithm.hash.name){case"SHA-256":return"RS256";default:throw new nt("unsupported RsaHashedKeyAlgorithm hash name")}}function _g(t){switch(t.algorithm.namedCurve){case"P-256":return"ES256";default:throw new nt("unsupported EcKeyAlgorithm namedCurve")}}function bg(t){switch(t.algorithm.name){case"RSA-PSS":return mg(t);case"RSASSA-PKCS1-v1_5":return yg(t);case"ECDSA":return _g(t);case"Ed25519":return"EdDSA";default:throw new nt("unsupported CryptoKey algorithm name")}}function Ec(t){return t instanceof CryptoKey}function gg(t){return Ec(t)&&t.type==="private"}function wg(t){return Ec(t)&&t.type==="public"}function xg(){return Math.floor(Date.now()/1e3)}async function fi(t,e,r,n,i,s){let o=t?.privateKey,a=t?.publicKey;if(!gg(o))throw new TypeError('"keypair.privateKey" must be a private CryptoKey');if(!wg(a))throw new TypeError('"keypair.publicKey" must be a public CryptoKey');if(a.extractable!==!0)throw new TypeError('"keypair.publicKey.extractable" must be true');if(typeof e!="string")throw new TypeError('"htu" must be a string');if(typeof r!="string")throw new TypeError('"htm" must be a string');if(n!==void 0&&typeof n!="string")throw new TypeError('"nonce" must be a string or undefined');if(i!==void 0&&typeof i!="string")throw new TypeError('"accessToken" must be a string or undefined');if(s!==void 0&&(typeof s!="object"||s===null||Array.isArray(s)))throw new TypeError('"additional" must be an object');return dg({alg:bg(o),typ:"dpop+jwt",jwk:await Sg(a)},{...s,iat:xg(),jti:pg(),htm:r,nonce:n,htu:e,ath:i?Yr(await crypto.subtle.digest("SHA-256",ui(i))):void 0},o)}async function Sg(t){let{kty:e,e:r,n,x:i,y:s,crv:o}=await crypto.subtle.exportKey("jwk",t);return{kty:e,crv:o,e:r,n,x:i,y:s}}async function Ac(t,e){let r;if(typeof t!="string"||t.length===0)throw new TypeError('"alg" must be a non-empty string');switch(t){case"PS256":r={name:"RSA-PSS",hash:"SHA-256",modulusLength:e?.modulusLength??2048,publicExponent:new Uint8Array([1,0,1])};break;case"RS256":r={name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:e?.modulusLength??2048,publicExponent:new Uint8Array([1,0,1])};break;case"ES256":r={name:"ECDSA",namedCurve:"P-256"};break;case"EdDSA":r={name:"Ed25519"};break;default:throw new nt}return crypto.subtle.generateKey(r,e?.extractable??!1,["sign","verify"])}function xo(t){return Y(t,{site:j(I),authorization_endpoint:j(I),token_endpoint:j(I),dpop_signing_alg_values_supported:x([])}),async(e,r)=>{let n=await go(),i=await n.get(t.site);if(!i){let a=await Ac("ES256");i={domain:t.site,keyPair:a},await n.set(i)}let s=K.url(e.url);if(e.url.startsWith(t.authorization_endpoint)){let a=e.body;a instanceof URLSearchParams||a instanceof FormData?a.set("dpop_jkt",i.keyPair.publicKey):a.dpop_jkt=i.keyPair.publicKey}else if(e.url.startsWith(t.token_endpoint)){let a=await fi(i.keyPair,e.url,e.method);e=e.with({headers:{DPoP:a}})}else if(e.headers.has("Authorization")){let a=localStorage.getItem(s.host+":nonce")||void 0,l=e.headers.get("Authorization").split(" ")[1],u=await fi(i.keyPair,e.url,e.method,a,l);e=e.with({headers:{Authorization:"DPoP "+l,DPoP:u}})}let o=await r(e);return o.headers.get("DPoP-Nonce")&&localStorage.setItem(s.host+":nonce",o.headers.get("DPoP-Nonce")),o}}var Zr=(...t)=>(e,r)=>t.filter(n=>r.hasOwnKey(n)).length>0?!1:L("root data must have all of",r,t),it=(...t)=>e=>Array.isArray(e)&&t.filter(r=>!e.includes(r)).length==0?!1:L("data must be an array which includes",e,t);var de=["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512"],ci=["client_secret_post","client_secret_basic","client_secret_jwt","private_key_jwt"];async function Xr(t={}){Y(t,{client:x(cr(K.client().constructor)),issuer:j(I)});let e={client:K.client().with(pe()).with(he()),requireDynamicRegistration:!1};t=Object.assign({},e,t);let r=!1;function n(l){return r}let i={issuer:j(pc(t.issuer,n)),authorization_endpoint:j(I),token_endpoint:j(I),userinfo_endpoint:Qr(I),jwks_uri:j(I),registration_endpoint:t.requireDynamicRegistration?j(I):Qr(I),scopes_supported:Qr(it("openid")),response_types_supported:t.requireDynamicRegistration?j(it("code","id_token","id_token token")):j([]),response_modes_supported:x([]),grant_types_supported:t.requireDynamicRegistration?x(it("authorization_code")):x([]),acr_values_supported:x([]),subject_types_supported:j([]),id_token_signing_alg_values_supported:j(it("RS256")),id_token_encryption_alg_values_supported:x([]),id_token_encryption_enc_values_supported:x([]),userinfo_signing_alg_values_supported:x([]),userinfo_encryption_alg_values_supported:x([]),userinfo_encryption_enc_values_supported:x([]),request_object_signing_alg_values_supported:x(it("RS256")),request_object_encryption_alg_values_supported:x([]),request_object_encryption_enc_values_supported:x([]),token_endpoint_auth_methods_supported:x(fr(...ci)),token_endpoint_auth_signing_alg_values_supported:x(it("RS256"),Jr(it("none"))),display_values_supported:x(fr("page","popup","touch","wap")),claim_types_supported:x(fr("normal","aggregated","distributed")),claims_supported:Qr([]),service_documentation:x(I),claims_locales_supported:x([]),ui_locales_supported:x([]),claims_parameter_supported:x(Boolean),request_parameter_supported:x(Boolean),request_uri_parameter_supported:x(Boolean),op_policy_uri:x(I),op_tos_uri:x(I)},s=K.url(t.issuer,".well-known/openid-configuration"),a=(await t.client.get(s)).data;return Y(a,i),Y(a.issuer,t.issuer),a}async function en(t){let e={redirect_uris:j([I]),response_types:x([]),grant_types:x(fr("authorization_code","refresh_token")),application_type:x(re("native","web")),contacts:x([mc]),client_name:x(String),logo_uri:x(I),client_uri:x(I),policy_uri:x(I),tos_uri:x(I),jwks_uri:x(I,Jr(Zr("jwks"))),jwks:x(I,Jr(Zr("jwks_uri"))),sector_identifier_uri:x(I),subject_type:x(String),id_token_signed_response_alg:x(re(...de)),id_token_encrypted_response_alg:x(re(...de)),id_token_encrypted_response_enc:x(re(...de),Zr("id_token_encrypted_response_alg")),userinfo_signed_response_alg:x(re(...de)),userinfo_encrypted_response_alg:x(re(...de)),userinfo_encrypted_response_enc:x(re(...de),Zr("userinfo_encrypted_response_alg")),request_object_signing_alg:x(re(...de)),request_object_encryption_alg:x(re(...de)),request_object_encryption_enc:x(re(...de)),token_endpoint_auth_method:x(re(...ci)),token_endpoint_auth_signing_alg:x(re(...de)),default_max_age:x(Number),require_auth_time:x(Boolean),default_acr_values:x([String]),initiate_login_uri:x([I]),request_uris:x([I])};Y(t,{client:x(cr(K.client().constructor)),registration_endpoint:I,client_info:e});let r={client:K.client().with(pe()).with(he()),client_info:{redirect_uris:[globalThis.document?.location.href]}};t=Object.assign({},r,t),t.client_info||(t.client_info={}),t.client_info.redirect_uris||(t.client_info.redirect_uris=[globalThis.document?.location.href]);let n=await t.client.post(t.registration_endpoint,{body:t.client_info}),i=n.data;if(!i.client_id||!i.client_secret)throw K.metroError("metro.oidc: Error: dynamic registration of client failed, no client_id or client_secret returned",n);return t.client_info=Object.assign(t.client_info,i),t.client_info}function di(t){let e;if(typeof localStorage<"u")e={get:r=>JSON.parse(localStorage.getItem("metro/oidc:"+t+":"+r)),set:(r,n)=>localStorage.setItem("metro/oidc:"+t+":"+r,JSON.stringify(n)),has:r=>localStorage.getItem("metro/oidc:"+t+":"+r)!==null};else{let r=new Map;e={get:n=>JSON.parse(r.get("metro/oidc:"+t+":"+n)||null),set:(n,i)=>r.set("metro/oidc:"+t+":"+n,JSON.stringify(i)),has:n=>r.has("metro/oidc:"+t+":"+n)}}return e}function So(t={}){let e={client:ne(),force_authorization:!1,use_dpop:!0,authorize_callback:async r=>(window.location.href!=r.href&&window.location.replace(r.href),!1)};return t=Object.assign({},e,t),Y(t,{client:j(cr(ne().constructor)),client_info:j(),issuer:j(I),oauth2:x({}),openid_configuration:x()}),t.store||(t.store=di(t.issuer)),!t.openid_configuration&&t.store.has("openid_configuration")&&(t.openid_configuration=t.store.get("openid_configuration")),!t.client_info?.client_id&&t.store.has("client_info")&&(t.client_info=t.store.get("client_info")),async(r,n)=>{let i;if(!t.force_authorization){try{i=await n(r)}catch(u){if(i.status!=401&&i.status!=403)throw u}if(i.ok||i.status!=401&&i.status!=403)return i}if(t.openid_configuration||(t.openid_configuration=await Xr({issuer:t.issuer}),t.store.set("openid_configuration",t.openid_configuration)),!t.client_info?.client_id){if(!t.openid_configuration.registration_endpoint)throw H("metro.oidcmw: Error: issuer "+t.issuer+" does not support dynamic client registration, but you haven't specified a client_id");t.client_info=await en({registration_endpoint:t.openid_configuration.registration_endpoint,client_info:t.client_info}),t.store.set("client_info",t.client_info)}let s=t.scope||"openid",o=Object.assign({site:t.issuer,client:t.client,force_authorization:!0,authorize_callback:t.authorize_callback,oauth2_configuration:{client_id:t.client_info?.client_id,client_secret:t.client_info?.client_secret,grant_type:"authorization_code",response_type:"code",response_mode:"query",authorization_endpoint:t.openid_configuration.authorization_endpoint,token_endpoint:t.openid_configuration.token_endpoint,scope:s,redirect_uri:t.client_info.redirect_uris[0]}}),a=async(u,f)=>{let c=await f(u);if(c.headers.get("content-type")?.startsWith("application/json")){let d=c.data?.id_token;if(!d){let p=c.clone();try{let m=await p.json();m&&m.id_token&&(d=m.id_token)}catch{}}d&&t.store.set("id_token",d)}return c},l=t.client.with(t.issuer).with(a);if(t.use_dpop){let u={site:t.issuer,authorization_endpoint:t.openid_configuration.authorization_endpoint,token_endpoint:t.openid_configuration.token_endpoint,dpop_signing_alg_values_supported:t.openid_configuration.dpop_signing_alg_values_supported};l=l.with(xo(u)),o.client=l}return l=l.with(bo(o)),i=await l.fetch(r),i}}function vc(){return gc()}function Rc(t){if(!t.store){if(!t.issuer)throw H("Must supply options.issuer or options.store to get the id_token");t.store=di(t.issuer)}return t.store.get("id_token")}var Tc={oidcmw:So,discover:Xr,register:en,isRedirected:vc,idToken:Rc};globalThis.metro.oidc||(globalThis.metro.oidc=Tc);var Ic=Tc;function Ie(t){return[String,Boolean,Number,BigInt].includes(t?.constructor)}function Eo(t){let e=[];if(t instanceof Function)e.push(t);else for(let[r,n]of Object.entries(t))n instanceof Function?e.push(i=>({[r]:n(i,r,"select")})):Ie(n)?e.push(()=>({[r]:n})):e.push(i=>({[r]:rn(i[r]).select(n)}));return e.length==1?e[0]:r=>{let n={};for(let i of e)Object.assign(n,i(r));return n}}function Ao(t){let e=[];if(Array.isArray(t))e.push(Rg(...t));else if(t instanceof RegExp)e.push(r=>t.test(r));else if(t instanceof Function)e.push(r=>t(r));else if(Ie(t))e.push(r=>Array.isArray(r)?r.filter(n=>t==n).length>0:t==r);else{let r={};for(let[i,s]of Object.entries(t))r[i]=Ao(s);let n=i=>{if(Array.isArray(i))return i.filter(s=>n(s)).length>0;if(Ie(i))return!1;for(let s in r){let o=r[s];if(!o(i?.[s]))return!1}return!0};e.push(n)}return e.length==1?e[0]:r=>{for(let n of e)if(!n(r))return!1;return!0}}var Eg=Symbol("asc"),Ag=Symbol("desc");function kc(t){let e=Object.entries(t),r=[];for(let[n,i]of e)if(i instanceof Function)r.push(i);else if(i===Eg)r.push((s,o)=>s[n]>o[n]?1:s[n]<o[n]?-1:0);else if(i===Ag)r.push((s,o)=>s[n]<o[n]?1:s[n]>o[n]?-1:0);else{if(Ie(i))throw new Error("Unknown sort order",i);{let s=kc(i);r.push((o,a)=>s(o[n],a[n]))}}return r.length==1?r[0]:(n,i)=>{for(let s of r){let o=s(n,i);if(o!==0)return o}return 0}}function jc(t){let e=[];if(t instanceof Function)e.push(t);else for(let[r,n]of Object.entries(t))n instanceof Function?e.push((i,s,o,a)=>(Ie(i)&&(i={}),s.reduce?i[r]=s.reduce(n,i[r]||[]):i[r]=n(i[r]||[],s,o,a),i)):Ie(n)?e.push(i=>(Ie(i)&&(i={}),i[r]=n,i)):e.push((i,s)=>(Ie(i)&&(i={}),i[r]=rn(s[r]).reduce(n,[]),i));return e.length==1?e[0]:(r,n,i,s)=>{let o={};for(let a of e)Object.assign(o,a(r,n,i,s));return o}}function vg(t,e){let r={};for(let n of t){let i=e(n);Array.isArray(i)||(i=[i]);for(let s of i){if(typeof s!="string"&&!(s instanceof String)){console.warn("JAQT: groupBy(selector) can only handle string values, got:",s);continue}r[s]||(r[s]=[]),r[s].push(n)}}return r}function Nc(t,e){let r=e.shift(),n=vg(t,r);if(e.length)for(let i in n)n[i]=Nc(n[i],e);return n}function Rg(...t){let e=t.map(r=>Ao(r));return r=>e.some(n=>n(r))}var Tg={apply(t,e,r){let n=t.apply(e,r);return typeof n=="object"?new Proxy(n,De):n}},De={get(t,e){let r=null;if(typeof e=="symbol"&&(r=t[e]),Array.isArray(t))switch(e){case"where":r=function(n){let i=Ao(n);return new Proxy(t.filter(s=>i(s)),De)};break;case"select":r=function(n){let i=Eo(n);return new Proxy(t.map(i),De)};break;case"reduce":r=function(n,i=[]){let s=jc(n),o=t.reduce(s,i);return Array.isArray(o)?new Proxy(o,De):Ie(o)?o:new Proxy(o,tn)};break;case"orderBy":r=function(n){let i=kc(n);return new Proxy(t.toSorted(i),De)};break;case"groupBy":r=function(...n){let i=Nc(t,n);return new Proxy(i,tn)};break}return!r&&t&&typeof t=="object"&&e==="select"&&(r=function(n){let i=Eo(n);return new Proxy(i(t),De)}),!r&&t&&typeof t[e]=="function"&&(r=new Proxy(t[e],Tg)),r||(r=t[e]),r}},tn={get(t,e){let r=null;switch(e){case"select":r=function(n){let i=Eo(n),s={};for(let o in t)Array.isArray(t[o])?s[o]=new Proxy(t[o].map(i),De):s[o]=new Proxy(t[o],tn);return s};break;case"reduce":r=function(n,i=[]){let s=jc(n),o={};for(let a in t)if(Array.isArray(t[a])){let l=t[a].reduce(s,i);Array.isArray(l)?o[a]=new Proxy(l,De):Ie(l)?o[a]=l:o[a]=new Proxy(l,tn)}else o[a]=new Proxy(t[a],tn);return o};break;default:Array.isArray(t[e])?r=rn(t[e]):r=t[e];break}return r}},hi={get(t,e){let r=null;switch(e){case"where":r=function(){return new Proxy(new dr,hi)};break;case"reduce":case"select":r=function(){return null};break;case"orderBy":r=function(){return new Proxy(new dr,hi)};break;case"groupBy":r=function(){return new Proxy(new dr,hi)};break}return!r&&typeof t?.[e]=="function"&&(r=t[e]),r}},dr=class{toJSON(){return null}};function rn(t){return!t||typeof t!="object"?new Proxy(new dr,hi):new Proxy(t,De)}function vo(t){return(e,r)=>{if(t?.length>0){let n=t.slice(),i=n.shift();for(;i;){if(Array.isArray(e)&&parseInt(i)!=i)return n.unshift(i),e.map(vo(n));typeof e?.[i]<"u"?e=e[i]:e=null,i=n.shift()}return e}else return r?typeof e?.[r]<"u"?e[r]:null:e}}var Pc=t=>(t||(t=[]),{get(e,r){if(r=="constructor"||typeof r=="symbol")return e[r];let n=t.concat([r]);return new Proxy(vo(n),Pc(n))},apply(e,r,n){let i=e(...n);return Array.isArray(i)&&(i=i.flat(1/0)),i}}),iS=new Proxy(vo(),Pc());var nn=class extends kt{#e;#t;constructor(e,r="/",n={}){e=ne(e).with(Ic.oidcmw(n)).with(li(n)),r=new A(r),super(e,r),this.#e=e,this.#t=r}get name(){return"SolidAdapter"}async read(e){let r=await this.#e.get(e),n={type:this.getMimetype(r),name:A.filename(e),http:{headers:r.headers,status:r.status,url:r.url}};return r.data&&(n.data=r.data),n.type.match(/text\/.*/)?n.contents=await r.text():n.type.match(/application\/json.*/)?n.contents=await r.json():n.contents=await r.blob(),n}async list(e){let r=await this.read(e);if(r.data){if(!r.data.primary?.ldp$contains)throw new Error(e+" could not find ldp container",{cause:r});return rn(r.data.primary.ldp$contains).where({a:"ldp$Resource"}).select({filename:n=>jsfs.path.filename(metro.url(n.id).pathname),path:n=>metro.url(n.id).pathname,type:n=>n.a.includes("ldp$Container")?"folder":"file"})}else throw new Error(e+" could not be parsed",{cause:r})}};var Lc={actions:{solidFSInit:async function(t,e){this.jsfs=new hc.fs(new nn(t,"/",e))}}};var Oc={html:{"solid-drawer":html`
	<nav class="solid-drawer-position">
		<label for="solidDrawerState" class="solid-drawer">
			<svg class="ds-icon ds-icon-feather">
	            <use xlink:href="assets/icons/feather-sprite.svg#user"></use>
	        </svg>
	    </label>
        <input type="checkbox" id="solidDrawerState" class="ds-dropdown-state">
	    <nav class="ds-dropdown-nav ds-dropdown-right ds-align-left">
	        <ul class="ds-dropdown-list">
	            <li class="ds-dropdown-item" data-simply-command="webidDialog">WebID</li>
	            <li class="ds-dropdown-item" data-simply-command="swPreferences">Preferences</li>
	            <li class="ds-dropdown-item" data-simply-command="swProfile">Profile</li>
	            <li class="ds-dropdown-item" data-simply-command="swCustomize">Customize</li>
	        </ul>
	    </nav>
	</nav>
`,"solid-preferences":html`
<dialog id="solid-preferences-dialog" class="ds-dialog">
	<button class="ds-button ds-button-close" data-simply-command="solidClose">
		<svg class="ds-icon ds-icon-feather">
            <use xlink:href="assets/icons/feather-sprite.svg#x"></use>
        </svg>		
	</button>
<form data-simply-command="solidPreferencesSave" class="ds-space">
	<h2>Preferences</h2>
	<div class="ds-margin-up ds-alert ds-alert-error" data-flow-field="solid.error"></div>
	<table class="ds-margin-up">
		<tr>
			<th>Light/Dark</th>
			<td>
				<label class="ds-inline">
					<input type="radio" name="solidPreferencesDarkmode" value="0" data-simply-command="solidDarkmode">
					Light
				</label>
				<label class="ds-inline">
					<input type="radio" name="solidPreferencesDarkmode" value="1" data-simply-command="solidDarkmode">
					Dark
				</label>
				<label class="ds-inline">
					<input type="radio" name="solidPreferencesDarkmode" value="auto" data-simply-command="solidDarkmode">
					Auto
				</label>
			</td>
		</tr>
	</table>
	<div class="ds-form-buttons">
		<button class="ds-button ds-button-primary">Save</button>
	</div>
</form>
</dialog>
		`},css:{"solid-drawer":css`
			@layer component {
				.solid-drawer-position {
					position: fixed;
					top: 0;
					right: 0;
					z-index: 100;
				}
				.solid-drawer {
					clip-path: polygon( 0 0%, 17px 100%, 100% 100%, 100% 0);
					padding: 6px 10px 6px 25px;
					background: var(--ds-grey-70);
					color: white;
					margin: 0;
				}
				.solid-drawer-position .ds-dropdown-item {
					padding: calc(0.25 * var(--ds-space)) calc(0.5 * var(--ds-space));
					cursor: pointer;
					border-bottom: 1px solid var(--ds-grey-low);
				}
				.solid-drawer-position .ds-dropdown-item:last-child {
					border-bottom: 0;
				}
				.solid-drawer-position .ds-dropdown-right {
					right: 6px;
					top: 31px;
				}
				a[data-simply-command] {
					cursor: pointer;
				}
			}
			@layer utility {
				.ds-inline {
					display: inline-block;
				}
			}
`,"solid-alert":css`
			@layer component {
				.ds-alert:empty {
					display: none;
				}
				.ds-alert {
					padding: calc(0.5 * var(--ds-space));
				}
				.ds-alert-error, .ds-alert-info, .ds-alert-warning {
					background-color: var(--ds-grey-30);
				}
				.ds-alert-error {
					border-left: 10px solid var(--ds-alert-error-color);
				}
				.ds-alert-warning {
					border-left: 10px solid var(--ds-alert-warning-color);
				}
				.ds-alert-info {
					border-left: 10px solid var(--ds-alert-info-color);
				}
			}

			`},commands:{swPreferences:async function(){this.actions.swPreferencesDialog()},solidClose:async function(t){t.closest("dialog").close()},solidPreferencesSave:async function(){try{await this.actions.swPreferencesSave()}catch(t){this.actions.solidErrors(t.message)}},solidDarkmode:async function(t,e){e=="auto"?(document.body.classList.add("ds-darkmode-auto"),document.body.classList.remove("ds-darkmode"),document.body.classList.remove("ds-lightmode")):e=="1"?(document.body.classList.add("ds-darkmode"),document.body.classList.remove("ds-lightmode"),document.body.classList.remove("ds-darkmode-auto")):(document.body.classList.add("ds-lightmode"),document.body.classList.remove("ds-darkmode"),document.body.classList.remove("ds-darkmode-auto"))}},actions:{swPreferencesDialog:async function(){this.actions.solidErrors(""),document.getElementById("solid-preferences-dialog").showModal()},swPreferencesDialogClose:async function(){document.getElementById("solid-preferences-dialog").close()},solidErrors:async function(t){this.state.solid.error=t},swPreferencesSave:async function(){throw new Error("not yet implemented")}},hooks:{start:function(t){this.state.solid||(this.state.solid={}),this.container.insertAdjacentHTML("beforeend",t.html["solid-preferences"])}}};var Bc={html:{"solid-contacts":Pt`
<div class="solid-contacts" data-flow-map="contacts.view">
	<template>
		<div class="solid-contacts-section">
			<a class="solid-contacts-letter" data-flow-field="capital" data-simply-command="solid-contacts-letter-nav"></a>
			<div class="solid-contacts-list" data-flow-list="entries">
				<template>
					<a class="solid-contacts-entry" data-simply-command="solid-contacts-show">
						<span class="solid-contacts-avatar"></span>
						<span class="solid-contacts-lastname" data-flow-field="last_name"></span>,
						<span class="solid-contacts-firstname" data-flow-field="first_name"></span>
					</a>
				</template>
			</div>
		</div>
	</template>
</div>`,"solid-contacts-filter":Pt`
<div class="solid-contacts-filter">
	<input type="search" class="solid-contacts-filter-input"
		data-simply-command="solid-contacts-filter" 
		data-simply-immediate
		data-simply-value="contacts">
</div>
		`},css:{solid:mr`
			@layer theme {
				:root {
					--ds-box-radius: 0;
					scroll-behavior: smooth;
				}
				.solid {
					width: 100%;
					height: 100%;
					min-height: 100vh;
					min-width: 100vw;
				}
			}
		`,"solid-contacts":mr`
			@layer component {
				.solid-sticky-top {
					position: sticky;
					top: 0;
					z-index: 10;
					background: var(--ds-color-background);
				}
				.solid-contacts {
					display: flow-root;
				}
				.solid-contacts-letter {
					position: sticky;
					z-index: 9;
					top: calc(2 * var(--ds-line-height));
					text-decoration: none;
					scroll-margin-top: calc(2 * var(--ds-line-height));
					display: block;
					margin: var(--ds-space-d4) var(--ds-space-d4) 0 0;
					background: var(--ds-primary);
					color: var(--ds-primary-contrast);
					width: calc(var(--ds-space-d2) + var(--ds-line-height));
					padding: var(--ds-space-d4);
					text-align: center;

				}
				.solid-contacts-entry {
					display: flex;
					align-items: center;
				}
				.solid-contacts-avatar {
					width: calc(var(--ds-space-d2) + var(--ds-line-height));
					aspect-ratio: 1;
					margin: var(--ds-space-d4) var(--ds-space-d2) 0 0;
					background-color: var(--ds-grey-medium);
				}
				.solid-contacts-letters-nav .solid-contacts-section {
					float: left;
				}
				.solid-contacts-letters-nav .solid-contacts-entry {
					display: none;
				}
				.solid-contacts-letters-nav .solid-contacts-letter {
					float: left;
				}
				.solid-contacts-filter {
					position: sticky;
					bottom: 0;
					z-index: 10;
					background: var(--ds-white);
				}
			}
		`},commands:{"solid-contacts-letter-nav":async function(t,e){let r=t.closest(".solid-contacts");r.classList.toggle("solid-contacts-letters-nav"),r.classList.contains("solid-contacts-letters-nav")||(window.location.hash=t.hash,window.setTimeout(()=>{t.scrollIntoView({behavior:"smooth"})},100))},"solid-contacts-filter":async function(t,e){let r=simply.path.get(this.state,t.dataset.simplyValue);r.state.options.name.filters.text=t.value}}};var Cc=simply.app({actions:{loadMockContacts:async function(){let t=await this.api.contacts(),e=simply.flow.model({data:t.persons,options:{}});e.addEffect(function(r){return simply.state.effect(()=>r.current.map(n=>{let i=n.last_name.search(/[A-Z]/);return i==-1&&n.last_name.trim()[0].search(/[a-z]/)==-1?n.sort_name="#"+n.last_name:n.sort_name=n.last_name.substring(i).toUpperCase(),n}))}),e.addEffect(simply.flow.sort({sortBy:"sort_name"})),e.addEffect(simply.flow.filter({name:"name",filters:{text:""},enabled:!0,properties:["last_name","first_name"],matches:function(r){if(!this.filters.text)return!0;let n=new RegExp(this.filters.text,"i");for(let i of this.properties)if(r[i].match(n))return!0;return!1}})),e.addEffect(function(r){let n={};for(let i of r.current){let s=i.sort_name[0];n[s]||(n[s]={capital:{innerHTML:s,href:"#"+s,name:s},entries:[]}),n[s].entries.push(i)}return n}),this.state.contacts=e,console.log("contacts",e)}},state:simply.state.signal({path:"/",list:[],solidConfiguration:{client_info:{client_name:"contacts",redirect_uris:[new URL("redirect.html",window.location.href)]},authorize_callback:wc}}),hooks:{start:async function(){simply.bind({root:this.state,transformers:this.transformers}),delete document.body.dataset.swLoading,this.state.webid?.id||await this.actions.webidDialog(),this.hooks.solidPreferencesLoaded.call(this)},solidPreferencesLoaded:async function(){this.actions.loadMockContacts()}},api:K.jsonApi(window.location.href,{contacts:function(){return this.get("../data/contacts.json")}}),components:{webid:cc,solidFS:Lc,solidDrawer:Oc,solidContacts:Bc}});Cc.start();globalThis.contactsApp=Cc;})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
//# sourceMappingURL=contacts.min.js.map
